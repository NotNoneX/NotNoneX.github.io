<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å†°ç³–å‡ ä½•</title>
  
  <subtitle>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¤§æµ·æ˜Ÿè¾°! | Our Goal Is The Sea And Stars!</subtitle>
  <link href="http://cvki.cn/atom.xml" rel="self"/>
  
  <link href="http://cvki.cn/"/>
  <updated>2023-08-18T08:21:25.610Z</updated>
  <id>http://cvki.cn/</id>
  
  <author>
    <name>å†°ç³–</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Dockerå¿«é€Ÿå…¥é—¨&amp;å¤‡ä»½å’Œè¿ç§»æ•°æ®</title>
    <link href="http://cvki.cn/posts/eee57fff.html"/>
    <id>http://cvki.cn/posts/eee57fff.html</id>
    <published>2023-05-08T07:07:09.000Z</published>
    <updated>2023-08-18T08:21:25.610Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸ¯å¤‡ä»½å’Œè¿ç§»æ•°æ®"><a href="#ğŸ¯å¤‡ä»½å’Œè¿ç§»æ•°æ®" class="headerlink" title="ğŸ¯å¤‡ä»½å’Œè¿ç§»æ•°æ®"></a>ğŸ¯å¤‡ä»½å’Œè¿ç§»æ•°æ®</h1><h3 id="è¿ç§»æ–¹å¼ä»‹ç»"><a href="#è¿ç§»æ–¹å¼ä»‹ç»" class="headerlink" title="è¿ç§»æ–¹å¼ä»‹ç»"></a>è¿ç§»æ–¹å¼ä»‹ç»</h3><p>å®¹å™¨ä¸­çš„æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰ç”¨æŒ‚è½½ç›®å½•ï¼Œåˆ é™¤å®¹å™¨åå°±ä¼šä¸¢å¤±æ•°æ®ã€‚<br>å‰é¢æˆ‘ä»¬å·²ç»è®²è§£äº†å¦‚ä½• <a href="doc:kze7f0ZR">æŒ‚è½½ç›®å½•</a><br>å¦‚æœä½ æ˜¯ç”¨<code>bind mount</code>ç›´æ¥æŠŠå®¿ä¸»æœºçš„ç›®å½•æŒ‚è¿›å»å®¹å™¨ï¼Œé‚£è¿ç§»æ•°æ®å¾ˆæ–¹ä¾¿ï¼Œç›´æ¥å¤åˆ¶ç›®å½•å°±å¥½äº†<br>å¦‚æœä½ æ˜¯ç”¨<code>volume</code>æ–¹å¼æŒ‚è½½çš„ï¼Œç”±äºæ•°æ®æ˜¯ç”±å®¹å™¨åˆ›å»ºå’Œç®¡ç†çš„ï¼Œéœ€è¦ç”¨ç‰¹æ®Šçš„æ–¹å¼æŠŠæ•°æ®å¼„å‡ºæ¥ã€‚</p><h3 id="å¤‡ä»½å’Œå¯¼å…¥-Volume-çš„æµç¨‹"><a href="#å¤‡ä»½å’Œå¯¼å…¥-Volume-çš„æµç¨‹" class="headerlink" title="å¤‡ä»½å’Œå¯¼å…¥ Volume çš„æµç¨‹"></a>å¤‡ä»½å’Œå¯¼å…¥ Volume çš„æµç¨‹</h3><p>å¤‡ä»½ï¼š</p><ul><li>è¿è¡Œä¸€ä¸ª ubuntu çš„å®¹å™¨ï¼ŒæŒ‚è½½éœ€è¦å¤‡ä»½çš„ volume åˆ°å®¹å™¨ï¼Œå¹¶ä¸”æŒ‚è½½å®¿ä¸»æœºç›®å½•åˆ°å®¹å™¨é‡Œçš„å¤‡ä»½ç›®å½•ã€‚</li><li>è¿è¡Œ tar å‘½ä»¤æŠŠæ•°æ®å‹ç¼©ä¸ºä¸€ä¸ªæ–‡ä»¶</li><li>æŠŠå¤‡ä»½æ–‡ä»¶å¤åˆ¶åˆ°éœ€è¦å¯¼å…¥çš„æœºå™¨</li></ul><p>å¯¼å…¥ï¼š</p><ul><li>è¿è¡Œ ubuntu å®¹å™¨ï¼ŒæŒ‚è½½å®¹å™¨çš„ volumeï¼Œå¹¶ä¸”æŒ‚è½½å®¿ä¸»æœºå¤‡ä»½æ–‡ä»¶æ‰€åœ¨ç›®å½•åˆ°å®¹å™¨é‡Œ</li><li>è¿è¡Œ tar å‘½ä»¤è§£å‹å¤‡ä»½æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</li></ul><h3 id="å¤‡ä»½-MongoDB-æ•°æ®æ¼”ç¤º"><a href="#å¤‡ä»½-MongoDB-æ•°æ®æ¼”ç¤º" class="headerlink" title="å¤‡ä»½ MongoDB æ•°æ®æ¼”ç¤º"></a>å¤‡ä»½ MongoDB æ•°æ®æ¼”ç¤º</h3><ul><li>è¿è¡Œä¸€ä¸ª mongodbï¼Œåˆ›å»ºä¸€ä¸ªåå«<code>mongo-data</code>çš„ volume æŒ‡å‘å®¹å™¨çš„ &#x2F;data ç›®å½•<br><code>docker run -p 27018:27017 --name mongo -v mongo-data:/data -d mongo:4.4</code></li><li>è¿è¡Œä¸€ä¸ª Ubuntu çš„å®¹å™¨ï¼ŒæŒ‚è½½<code>mongo</code>å®¹å™¨çš„æ‰€æœ‰ volumeï¼Œæ˜ å°„å®¿ä¸»æœºçš„ backup ç›®å½•åˆ°å®¹å™¨é‡Œé¢çš„ &#x2F;backup ç›®å½•ï¼Œç„¶åè¿è¡Œ tar å‘½ä»¤æŠŠæ•°æ®å‹ç¼©æ‰“åŒ…<br><code>docker run --rm --volumes-from mongo -v d:/backup:/backup ubuntu tar cvf /backup/backup.tar /data/</code></li></ul><p>æœ€åä½ å°±å¯ä»¥æ‹¿ç€è¿™ä¸ª backup.tar æ–‡ä»¶å»å…¶ä»–åœ°æ–¹å¯¼å…¥äº†ã€‚</p><h3 id="æ¢å¤-Volume-æ•°æ®æ¼”ç¤º"><a href="#æ¢å¤-Volume-æ•°æ®æ¼”ç¤º" class="headerlink" title="æ¢å¤ Volume æ•°æ®æ¼”ç¤º"></a>æ¢å¤ Volume æ•°æ®æ¼”ç¤º</h3><ul><li>è¿è¡Œä¸€ä¸ª ubuntu å®¹å™¨ï¼ŒæŒ‚è½½ mongo å®¹å™¨çš„æ‰€æœ‰ volumesï¼Œç„¶åè¯»å– &#x2F;backup ç›®å½•ä¸­çš„å¤‡ä»½æ–‡ä»¶ï¼Œè§£å‹åˆ° &#x2F;data&#x2F; ç›®å½•<br><code>docker run --rm --volumes-from mongo -v d:/backup:/backup ubuntu bash -c &quot;cd /data/ &amp;&amp; tar xvf /backup/backup.tar --strip 1&quot;</code></li></ul><blockquote><p>æ³¨æ„ï¼Œvolumes-from æŒ‡å®šçš„æ˜¯å®¹å™¨åå­—<br>strip 1 è¡¨ç¤ºè§£å‹æ—¶å»æ‰å‰é¢1å±‚ç›®å½•ï¼Œå› ä¸ºå‹ç¼©æ—¶åŒ…å«äº†ç»å¯¹è·¯å¾„</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ğŸ¯å¤‡ä»½å’Œè¿ç§»æ•°æ®&quot;&gt;&lt;a href=&quot;#ğŸ¯å¤‡ä»½å’Œè¿ç§»æ•°æ®&quot; class=&quot;headerlink&quot; title=&quot;ğŸ¯å¤‡ä»½å’Œè¿ç§»æ•°æ®&quot;&gt;&lt;/a&gt;ğŸ¯å¤‡ä»½å’Œè¿ç§»æ•°æ®&lt;/h1&gt;&lt;h3 id=&quot;è¿ç§»æ–¹å¼ä»‹ç»&quot;&gt;&lt;a href=&quot;#è¿ç§»æ–¹å¼ä»‹ç»&quot; class=&quot;head</summary>
      
    
    
    
    <category term="Docker" scheme="http://cvki.cn/categories/Docker/"/>
    
    
    <category term="Docker" scheme="http://cvki.cn/tags/Docker/"/>
    
    <category term="Dockerå¿«é€Ÿå…¥é—¨" scheme="http://cvki.cn/tags/Docker%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå¿«é€Ÿå…¥é—¨&amp;å‘å¸ƒå’Œéƒ¨ç½²</title>
    <link href="http://cvki.cn/posts/a502abd5.html"/>
    <id>http://cvki.cn/posts/a502abd5.html</id>
    <published>2023-05-08T06:04:09.000Z</published>
    <updated>2023-08-18T08:21:25.606Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸššå‘å¸ƒå’Œéƒ¨ç½²"><a href="#ğŸššå‘å¸ƒå’Œéƒ¨ç½²" class="headerlink" title="ğŸššå‘å¸ƒå’Œéƒ¨ç½²"></a>ğŸššå‘å¸ƒå’Œéƒ¨ç½²</h1><h3 id="é•œåƒä»“åº“ä»‹ç»"><a href="#é•œåƒä»“åº“ä»‹ç»" class="headerlink" title="é•œåƒä»“åº“ä»‹ç»"></a>é•œåƒä»“åº“ä»‹ç»</h3><p>é•œåƒä»“åº“ç”¨æ¥å­˜å‚¨æˆ‘ä»¬ build å‡ºæ¥çš„â€œå®‰è£…åŒ…â€ï¼ŒDocker å®˜æ–¹æä¾›äº†ä¸€ä¸ª <a href="https://hub.docker.com/">é•œåƒåº“</a>ï¼Œé‡Œé¢åŒ…å«äº†å¤§é‡é•œåƒï¼ŒåŸºæœ¬å„ç§è½¯ä»¶æ‰€éœ€ä¾èµ–éƒ½æœ‰ï¼Œè¦ä»€ä¹ˆç›´æ¥ä¸Šå»æœç´¢ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠè‡ªå·± build å‡ºæ¥çš„é•œåƒä¸Šä¼ åˆ° docker æä¾›çš„é•œåƒåº“ä¸­ï¼Œæ–¹ä¾¿ä¼ æ’­ã€‚<br>å½“ç„¶ä½ ä¹Ÿå¯ä»¥æ­å»ºè‡ªå·±çš„ç§æœ‰é•œåƒåº“ï¼Œæˆ–è€…ä½¿ç”¨å›½å†…å„ç§å¤§å‚æä¾›çš„é•œåƒæ‰˜ç®¡æœåŠ¡ï¼Œä¾‹å¦‚ï¼šé˜¿é‡Œäº‘ã€è…¾è®¯äº‘</p><h3 id="ä¸Šä¼ æˆ‘ä»¬çš„é•œåƒ"><a href="#ä¸Šä¼ æˆ‘ä»¬çš„é•œåƒ" class="headerlink" title="ä¸Šä¼ æˆ‘ä»¬çš„é•œåƒ"></a>ä¸Šä¼ æˆ‘ä»¬çš„é•œåƒ</h3><ul><li>é¦–å…ˆä½ è¦å…ˆ <a href="https://hub.docker.com/">æ³¨å†Œä¸€ä¸ªè´¦å·</a></li><li>åˆ›å»ºä¸€ä¸ªé•œåƒåº“<div class="tag-plugin image"><div class="image-bg"><img src="/posts/a502abd5/kv9a2wty.png" alt="image.png"></div><div class="image-meta"><span class="image-caption center">image.png</span></div></div></li><li>å‘½ä»¤è¡Œç™»å½•è´¦å·ï¼š<br><code>docker login -u username</code></li><li>æ–°å»ºä¸€ä¸ªtagï¼Œåå­—å¿…é¡»è·Ÿä½ æ³¨å†Œè´¦å·ä¸€æ ·<br><code>docker tag test:v1 username/test:v1</code></li><li>æ¨ä¸Šå»<br><code>docker push username/test:v1</code></li><li>éƒ¨ç½²è¯•ä¸‹<br><code>docker run -dp 8080:8080 username/test:v1</code></li></ul><h5 id="docker-compose-ä¸­ä¹Ÿå¯ä»¥ç›´æ¥ç”¨è¿™ä¸ªé•œåƒäº†"><a href="#docker-compose-ä¸­ä¹Ÿå¯ä»¥ç›´æ¥ç”¨è¿™ä¸ªé•œåƒäº†" class="headerlink" title="docker-compose ä¸­ä¹Ÿå¯ä»¥ç›´æ¥ç”¨è¿™ä¸ªé•œåƒäº†"></a>docker-compose ä¸­ä¹Ÿå¯ä»¥ç›´æ¥ç”¨è¿™ä¸ªé•œåƒäº†</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.7&quot;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  app:</span><br><span class="line">#    build: ./</span><br><span class="line">    image: helloguguji/test:v1</span><br><span class="line">    ports:</span><br><span class="line">      - 80:8080</span><br><span class="line">    volumes:</span><br><span class="line">      - ./:/app</span><br><span class="line">    environment:</span><br><span class="line">      - TZ=Asia/Shanghai</span><br><span class="line">  redis:</span><br><span class="line">    image: redis:5.0.13</span><br><span class="line">    volumes:</span><br><span class="line">      - redis:/data</span><br><span class="line">    environment:</span><br><span class="line">      - TZ=Asia/Shanghai</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  redis:</span><br></pre></td></tr></table></figure><h3 id="é˜¿é‡Œäº‘å®¹å™¨æ‰˜ç®¡"><a href="#é˜¿é‡Œäº‘å®¹å™¨æ‰˜ç®¡" class="headerlink" title="é˜¿é‡Œäº‘å®¹å™¨æ‰˜ç®¡"></a>é˜¿é‡Œäº‘å®¹å™¨æ‰˜ç®¡</h3><p>docker å®˜æ–¹çš„é•œåƒæ‰˜ç®¡æœ‰æ—¶å€™ä¸Šä¼ å’Œä¸‹è½½éƒ½å¤ªæ…¢äº†ï¼Œå¦‚æœä½ æƒ³è¦æ›´å¿«çš„é€Ÿåº¦ï¼Œå¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘çš„å…è´¹é•œåƒæ‰˜ç®¡<br>ç™»å½• <a href="https://www.aliyun.com/">é˜¿é‡Œäº‘</a></p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/a502abd5/kv9dqxuo.png" alt="image.png"></div><div class="image-meta"><span class="image-caption center">image.png</span></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ğŸššå‘å¸ƒå’Œéƒ¨ç½²&quot;&gt;&lt;a href=&quot;#ğŸššå‘å¸ƒå’Œéƒ¨ç½²&quot; class=&quot;headerlink&quot; title=&quot;ğŸššå‘å¸ƒå’Œéƒ¨ç½²&quot;&gt;&lt;/a&gt;ğŸššå‘å¸ƒå’Œéƒ¨ç½²&lt;/h1&gt;&lt;h3 id=&quot;é•œåƒä»“åº“ä»‹ç»&quot;&gt;&lt;a href=&quot;#é•œåƒä»“åº“ä»‹ç»&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="Docker" scheme="http://cvki.cn/categories/Docker/"/>
    
    
    <category term="Docker" scheme="http://cvki.cn/tags/Docker/"/>
    
    <category term="Dockerå¿«é€Ÿå…¥é—¨" scheme="http://cvki.cn/tags/Docker%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå¿«é€Ÿå…¥é—¨&amp;Docker-Compose</title>
    <link href="http://cvki.cn/posts/31e1fdfd.html"/>
    <id>http://cvki.cn/posts/31e1fdfd.html</id>
    <published>2023-05-07T09:34:43.000Z</published>
    <updated>2023-08-18T08:21:25.610Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸDocker-Compose"><a href="#ğŸDocker-Compose" class="headerlink" title="ğŸDocker-Compose"></a>ğŸDocker-Compose</h1><h3 id="ç°å­˜é—®é¢˜"><a href="#ç°å­˜é—®é¢˜" class="headerlink" title="ç°å­˜é—®é¢˜"></a>ç°å­˜é—®é¢˜</h3><p>åœ¨ä¸ŠèŠ‚ï¼Œæˆ‘ä»¬è¿è¡Œäº†ä¸¤ä¸ªå®¹å™¨ï¼šWeb é¡¹ç›® + Redis<br>å¦‚æœé¡¹ç›®ä¾èµ–æ›´å¤šçš„ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ç®¡ç†çš„å®¹å™¨å°±æ›´åŠ å¤šï¼Œæ¯ä¸ªéƒ½è¦å•ç‹¬é…ç½®è¿è¡Œï¼ŒæŒ‡å®šç½‘ç»œã€‚<br>è¿™èŠ‚ï¼Œæˆ‘ä»¬ä½¿ç”¨ docker-compose æŠŠé¡¹ç›®çš„å¤šä¸ªæœåŠ¡é›†åˆåˆ°ä¸€èµ·ï¼Œä¸€é”®è¿è¡Œã€‚</p><h3 id="å®‰è£…-Docker-Compose"><a href="#å®‰è£…-Docker-Compose" class="headerlink" title="å®‰è£… Docker Compose"></a>å®‰è£… Docker Compose</h3><ul><li>å¦‚æœä½ æ˜¯å®‰è£…çš„æ¡Œé¢ç‰ˆ Dockerï¼Œä¸éœ€è¦é¢å¤–å®‰è£…ï¼Œå·²ç»åŒ…å«äº†ã€‚</li><li>å¦‚æœæ˜¯æ²¡å›¾å½¢ç•Œé¢çš„æœåŠ¡å™¨ç‰ˆ Dockerï¼Œä½ éœ€è¦å•ç‹¬å®‰è£… <a href="https://docs.docker.com/compose/install/#install-compose-on-linux-systems">å®‰è£…æ–‡æ¡£</a></li><li>è¿è¡Œ<code>docker-compose</code>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</li></ul><h3 id="ç¼–å†™è„šæœ¬"><a href="#ç¼–å†™è„šæœ¬" class="headerlink" title="ç¼–å†™è„šæœ¬"></a>ç¼–å†™è„šæœ¬</h3><p>è¦æŠŠé¡¹ç›®ä¾èµ–çš„å¤šä¸ªæœåŠ¡é›†åˆåˆ°ä¸€èµ·ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ª<code>docker-compose.yml</code>æ–‡ä»¶ï¼Œæè¿°ä¾èµ–å“ªäº›æœåŠ¡<br>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://docs.docker.com/compose/">https://docs.docker.com/compose/</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.7&quot;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  app:</span><br><span class="line">    build: ./</span><br><span class="line">    ports:</span><br><span class="line">      - 80:8080</span><br><span class="line">    volumes:</span><br><span class="line">      - ./:/app</span><br><span class="line">    environment:</span><br><span class="line">      - TZ=Asia/Shanghai</span><br><span class="line">  redis:</span><br><span class="line">    image: redis:5.0.13</span><br><span class="line">    volumes:</span><br><span class="line">      - redis:/data</span><br><span class="line">    environment:</span><br><span class="line">      - TZ=Asia/Shanghai</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  redis:</span><br></pre></td></tr></table></figure><blockquote><p>å®¹å™¨é»˜è®¤æ—¶é—´ä¸æ˜¯åŒ—äº¬æ—¶é—´ï¼Œå¢åŠ  TZ&#x3D;Asia&#x2F;Shanghai å¯ä»¥æ”¹ä¸ºåŒ—äº¬æ—¶é—´</p></blockquote><h3 id="è·‘èµ·æ¥"><a href="#è·‘èµ·æ¥" class="headerlink" title="è·‘èµ·æ¥"></a>è·‘èµ·æ¥</h3><p>åœ¨<code>docker-compose.yml</code> æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œæ‰§è¡Œï¼š<code>docker-compose up</code>å°±å¯ä»¥è·‘èµ·æ¥äº†ã€‚<br>å‘½ä»¤å‚è€ƒï¼š<a href="https://docs.docker.com/compose/reference/up/">https://docs.docker.com/compose/reference/up/</a></p><p>åœ¨åå°è¿è¡Œåªéœ€è¦åŠ ä¸€ä¸ª -d å‚æ•°<code>docker-compose up -d</code><br>æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼š<code>docker-compose ps</code><br>åœæ­¢è¿è¡Œï¼š<code>docker-compose stop</code><br>é‡å¯ï¼š<code>docker-compose restart</code><br>é‡å¯å•ä¸ªæœåŠ¡ï¼š<code>docker-compose restart service-name</code><br>è¿›å…¥å®¹å™¨å‘½ä»¤è¡Œï¼š<code>docker-compose exec service-name sh</code><br>æŸ¥çœ‹å®¹å™¨è¿è¡Œlogï¼š&#96;docker-compose logs [service-name]</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ğŸDocker-Compose&quot;&gt;&lt;a href=&quot;#ğŸDocker-Compose&quot; class=&quot;headerlink&quot; title=&quot;ğŸDocker-Compose&quot;&gt;&lt;/a&gt;ğŸDocker-Compose&lt;/h1&gt;&lt;h3 id=&quot;ç°å­˜é—®é¢˜&quot;&gt;&lt;a </summary>
      
    
    
    
    <category term="Docker" scheme="http://cvki.cn/categories/Docker/"/>
    
    
    <category term="Docker" scheme="http://cvki.cn/tags/Docker/"/>
    
    <category term="Dockerå¿«é€Ÿå…¥é—¨" scheme="http://cvki.cn/tags/Docker%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå¿«é€Ÿå…¥é—¨&amp;å¤šå®¹å™¨é€šä¿¡</title>
    <link href="http://cvki.cn/posts/36d19d1c.html"/>
    <id>http://cvki.cn/posts/36d19d1c.html</id>
    <published>2023-05-06T02:17:57.000Z</published>
    <updated>2023-08-18T08:21:25.606Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦å¤šå®¹å™¨é€šä¿¡"><a href="#ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦å¤šå®¹å™¨é€šä¿¡" class="headerlink" title="ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦å¤šå®¹å™¨é€šä¿¡"></a>ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦å¤šå®¹å™¨é€šä¿¡</h1><h3 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h3><p>é¡¹ç›®å¾€å¾€éƒ½ä¸æ˜¯ç‹¬ç«‹è¿è¡Œçš„ï¼Œéœ€è¦æ•°æ®åº“ã€ç¼“å­˜è¿™äº›ä¸œè¥¿é…åˆè¿ä½œã€‚<br>è¿™èŠ‚æˆ‘ä»¬æŠŠå‰é¢çš„ Web é¡¹ç›®å¢åŠ ä¸€ä¸ª Redis ä¾èµ–ï¼Œå¤šè·‘ä¸€ä¸ª Redis å®¹å™¨ï¼Œæ¼”ç¤ºå¦‚ä½•å¤šå®¹å™¨ä¹‹é—´çš„é€šä¿¡ã€‚</p><h3 id="åˆ›å»ºè™šæ‹Ÿç½‘ç»œ"><a href="#åˆ›å»ºè™šæ‹Ÿç½‘ç»œ" class="headerlink" title="åˆ›å»ºè™šæ‹Ÿç½‘ç»œ"></a>åˆ›å»ºè™šæ‹Ÿç½‘ç»œ</h3><p>è¦æƒ³å¤šå®¹å™¨ä¹‹é—´äº’é€šï¼Œä» Web å®¹å™¨è®¿é—® Redis å®¹å™¨ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠä»–ä»¬æ”¾åˆ°åŒä¸ªç½‘ç»œä¸­å°±å¯ä»¥äº†ã€‚</p><p>æ–‡æ¡£å‚è€ƒï¼š<a href="https://docs.docker.com/engine/reference/commandline/network/">https://docs.docker.com/engine/reference/commandline/network/</a></p><h3 id="æ¼”ç¤º"><a href="#æ¼”ç¤º" class="headerlink" title="æ¼”ç¤º"></a>æ¼”ç¤º</h3><h5 id="åˆ›å»ºä¸€ä¸ªåä¸ºtest-netçš„ç½‘ç»œï¼š"><a href="#åˆ›å»ºä¸€ä¸ªåä¸ºtest-netçš„ç½‘ç»œï¼š" class="headerlink" title="åˆ›å»ºä¸€ä¸ªåä¸ºtest-netçš„ç½‘ç»œï¼š"></a>åˆ›å»ºä¸€ä¸ªåä¸º<code>test-net</code>çš„ç½‘ç»œï¼š</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create test-net</span><br></pre></td></tr></table></figure><h5 id="è¿è¡Œ-Redis-åœ¨-test-net-ç½‘ç»œä¸­ï¼Œåˆ«åredis"><a href="#è¿è¡Œ-Redis-åœ¨-test-net-ç½‘ç»œä¸­ï¼Œåˆ«åredis" class="headerlink" title="è¿è¡Œ Redis åœ¨ test-net ç½‘ç»œä¸­ï¼Œåˆ«åredis"></a>è¿è¡Œ Redis åœ¨ <code>test-net</code> ç½‘ç»œä¸­ï¼Œåˆ«å<code>redis</code></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name redis --network test-net --network-alias redis redis:latest</span><br></pre></td></tr></table></figure><h5 id="ä¿®æ”¹ä»£ç ä¸­è®¿é—®redisçš„åœ°å€ä¸ºç½‘ç»œåˆ«å"><a href="#ä¿®æ”¹ä»£ç ä¸­è®¿é—®redisçš„åœ°å€ä¸ºç½‘ç»œåˆ«å" class="headerlink" title="ä¿®æ”¹ä»£ç ä¸­è®¿é—®redisçš„åœ°å€ä¸ºç½‘ç»œåˆ«å"></a>ä¿®æ”¹ä»£ç ä¸­è®¿é—®<code>redis</code>çš„åœ°å€ä¸ºç½‘ç»œåˆ«å</h5><div class="tag-plugin image"><div class="image-bg"><img src="/posts/36d19d1c/kv98rfvb.png" alt="image.png"></div><div class="image-meta"><span class="image-caption center">image.png</span></div></div><h5 id="è¿è¡Œ-Web-é¡¹ç›®ï¼Œä½¿ç”¨åŒä¸ªç½‘ç»œ"><a href="#è¿è¡Œ-Web-é¡¹ç›®ï¼Œä½¿ç”¨åŒä¸ªç½‘ç»œ" class="headerlink" title="è¿è¡Œ Web é¡¹ç›®ï¼Œä½¿ç”¨åŒä¸ªç½‘ç»œ"></a>è¿è¡Œ Web é¡¹ç›®ï¼Œä½¿ç”¨åŒä¸ªç½‘ç»œ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 8080:8080 --name test -v D:/test:/app --network test-net -d test:v1</span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹æ•°æ®"><a href="#æŸ¥çœ‹æ•°æ®" class="headerlink" title="æŸ¥çœ‹æ•°æ®"></a>æŸ¥çœ‹æ•°æ®</h5><p><code>http://localhost:8080/redis</code><br>å®¹å™¨ç»ˆç«¯æŸ¥çœ‹æ•°æ®æ˜¯å¦ä¸€è‡´</p><h3 id="æ›´å¤šç›¸å…³å‘½ä»¤"><a href="#æ›´å¤šç›¸å…³å‘½ä»¤" class="headerlink" title="æ›´å¤šç›¸å…³å‘½ä»¤"></a>æ›´å¤šç›¸å…³å‘½ä»¤</h3><p><code>docker ps</code> æŸ¥çœ‹å½“å‰è¿è¡Œä¸­çš„å®¹å™¨<br><code>docker images</code> æŸ¥çœ‹é•œåƒåˆ—è¡¨<br><code>docker rm container-id</code> åˆ é™¤æŒ‡å®š id çš„å®¹å™¨<br><code>docker stop/start container-id</code> åœæ­¢&#x2F;å¯åŠ¨æŒ‡å®š id çš„å®¹å™¨<br><code>docker rmi image-id</code> åˆ é™¤æŒ‡å®š id çš„é•œåƒ<br><code>docker volume ls</code> æŸ¥çœ‹ volume åˆ—è¡¨<br><code>docker network ls</code> æŸ¥çœ‹ç½‘ç»œåˆ—è¡¨</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦å¤šå®¹å™¨é€šä¿¡&quot;&gt;&lt;a href=&quot;#ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦å¤šå®¹å™¨é€šä¿¡&quot; class=&quot;headerlink&quot; title=&quot;ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦å¤šå®¹å™¨é€šä¿¡&quot;&gt;&lt;/a&gt;ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦å¤šå®¹å™¨é€šä¿¡&lt;/h1&gt;&lt;h3 id=&quot;å­¦ä¹ ç›®æ ‡&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç›®æ ‡&quot;</summary>
      
    
    
    
    <category term="Docker" scheme="http://cvki.cn/categories/Docker/"/>
    
    
    <category term="Docker" scheme="http://cvki.cn/tags/Docker/"/>
    
    <category term="Dockerå¿«é€Ÿå…¥é—¨" scheme="http://cvki.cn/tags/Docker%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå¿«é€Ÿå…¥é—¨&amp;ç›®å½•æŒ‚è½½</title>
    <link href="http://cvki.cn/posts/b03c4432.html"/>
    <id>http://cvki.cn/posts/b03c4432.html</id>
    <published>2023-05-05T10:01:35.000Z</published>
    <updated>2023-08-18T08:21:25.610Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸ¥™ç›®å½•æŒ‚è½½"><a href="#ğŸ¥™ç›®å½•æŒ‚è½½" class="headerlink" title="ğŸ¥™ç›®å½•æŒ‚è½½"></a>ğŸ¥™ç›®å½•æŒ‚è½½</h1><h3 id="ç°å­˜é—®é¢˜"><a href="#ç°å­˜é—®é¢˜" class="headerlink" title="ç°å­˜é—®é¢˜"></a>ç°å­˜é—®é¢˜</h3><ul><li>ä½¿ç”¨ Docker è¿è¡Œåï¼Œæˆ‘ä»¬æ”¹äº†é¡¹ç›®ä»£ç ä¸ä¼šç«‹åˆ»ç”Ÿæ•ˆï¼Œéœ€è¦é‡æ–°<code>build</code>å’Œ<code>run</code>ï¼Œå¾ˆæ˜¯éº»çƒ¦ã€‚</li><li>å®¹å™¨é‡Œé¢äº§ç”Ÿçš„æ•°æ®ï¼Œä¾‹å¦‚ log æ–‡ä»¶ï¼Œæ•°æ®åº“å¤‡ä»½æ–‡ä»¶ï¼Œå®¹å™¨åˆ é™¤åå°±ä¸¢å¤±äº†ã€‚</li></ul><blockquote><p>ç›®å½•æŒ‚è½½è§£å†³ä»¥ä¸Šé—®é¢˜</p></blockquote><h3 id="å‡ ç§æŒ‚è½½æ–¹å¼"><a href="#å‡ ç§æŒ‚è½½æ–¹å¼" class="headerlink" title="å‡ ç§æŒ‚è½½æ–¹å¼"></a>å‡ ç§æŒ‚è½½æ–¹å¼</h3><ul><li><code>bind mount</code> ç›´æ¥æŠŠå®¿ä¸»æœºç›®å½•æ˜ å°„åˆ°å®¹å™¨å†…ï¼Œé€‚åˆæŒ‚ä»£ç ç›®å½•å’Œé…ç½®æ–‡ä»¶ã€‚å¯æŒ‚åˆ°å¤šä¸ªå®¹å™¨ä¸Š</li><li><code>volume</code> ç”±å®¹å™¨åˆ›å»ºå’Œç®¡ç†ï¼Œåˆ›å»ºåœ¨å®¿ä¸»æœºï¼Œæ‰€ä»¥åˆ é™¤å®¹å™¨ä¸ä¼šä¸¢å¤±ï¼Œå®˜æ–¹æ¨èï¼Œæ›´é«˜æ•ˆï¼ŒLinux æ–‡ä»¶ç³»ç»Ÿï¼Œé€‚åˆå­˜å‚¨æ•°æ®åº“æ•°æ®ã€‚å¯æŒ‚åˆ°å¤šä¸ªå®¹å™¨ä¸Š</li><li><code>tmpfs mount</code> é€‚åˆå­˜å‚¨ä¸´æ—¶æ–‡ä»¶ï¼Œå­˜å®¿ä¸»æœºå†…å­˜ä¸­ã€‚ä¸å¯å¤šå®¹å™¨å…±äº«ã€‚</li></ul><p>æ–‡æ¡£å‚è€ƒï¼š<a href="https://docs.docker.com/storage/">https://docs.docker.com/storage/</a></p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/b03c4432/kv96dc4q.png" alt="image.png"></div><div class="image-meta"><span class="image-caption center">image.png</span></div></div><h3 id="æŒ‚è½½æ¼”ç¤º"><a href="#æŒ‚è½½æ¼”ç¤º" class="headerlink" title="æŒ‚è½½æ¼”ç¤º"></a>æŒ‚è½½æ¼”ç¤º</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bind mount` æ–¹å¼ç”¨ç»å¯¹è·¯å¾„ `-v D:/code:/app</span><br><span class="line">volume` æ–¹å¼ï¼Œåªéœ€è¦ä¸€ä¸ªåå­— `-v db-data:/app</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š<br><code>docker run -p 8080:8080 --name test-hello -v D:/code:/app -d test:v1</code></p><blockquote><p>æ³¨æ„ï¼<br>å› ä¸ºæŒ‚è½½åï¼Œå®¹å™¨é‡Œçš„ä»£ç å°±ä¼šæ›¿æ¢ä¸ºä½ æœ¬æœºçš„ä»£ç äº†ï¼Œå¦‚æœä½ ä»£ç ç›®å½•æ²¡æœ‰<code>node_modules</code>ç›®å½•ï¼Œä½ éœ€è¦åœ¨ä»£ç ç›®å½•æ‰§è¡Œä¸‹<code>npm install --registry=https://registry.npm.taobao.org</code>ç¡®ä¿ä¾èµ–åº“éƒ½å·²ç»å®‰è£…ï¼Œå¦åˆ™å¯èƒ½ä¼šæç¤ºâ€œError: Cannot find module â€˜koaâ€™â€<br>å¦‚æœä½ çš„ç”µè„‘æ²¡æœ‰å®‰è£… <a href="https://nodejs.org/en/">nodejs</a>ï¼Œä½ éœ€è¦å®‰è£…ä¸€ä¸‹æ‰èƒ½æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ğŸ¥™ç›®å½•æŒ‚è½½&quot;&gt;&lt;a href=&quot;#ğŸ¥™ç›®å½•æŒ‚è½½&quot; class=&quot;headerlink&quot; title=&quot;ğŸ¥™ç›®å½•æŒ‚è½½&quot;&gt;&lt;/a&gt;ğŸ¥™ç›®å½•æŒ‚è½½&lt;/h1&gt;&lt;h3 id=&quot;ç°å­˜é—®é¢˜&quot;&gt;&lt;a href=&quot;#ç°å­˜é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;ç°</summary>
      
    
    
    
    <category term="Docker" scheme="http://cvki.cn/categories/Docker/"/>
    
    
    <category term="Docker" scheme="http://cvki.cn/tags/Docker/"/>
    
    <category term="Dockerå¿«é€Ÿå…¥é—¨" scheme="http://cvki.cn/tags/Docker%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå¿«é€Ÿå…¥é—¨&amp;åˆ¶ä½œè‡ªå·±çš„é•œåƒ</title>
    <link href="http://cvki.cn/posts/118ee6c6.html"/>
    <id>http://cvki.cn/posts/118ee6c6.html</id>
    <published>2023-05-04T18:13:18.000Z</published>
    <updated>2023-08-18T08:21:25.606Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸ’½åˆ¶ä½œè‡ªå·±çš„é•œåƒ"><a href="#ğŸ’½åˆ¶ä½œè‡ªå·±çš„é•œåƒ" class="headerlink" title="ğŸ’½åˆ¶ä½œè‡ªå·±çš„é•œåƒ"></a>ğŸ’½åˆ¶ä½œè‡ªå·±çš„é•œåƒ</h1><h3 id="ä¸ºè‡ªå·±çš„-Web-é¡¹ç›®æ„å»ºé•œåƒ"><a href="#ä¸ºè‡ªå·±çš„-Web-é¡¹ç›®æ„å»ºé•œåƒ" class="headerlink" title="ä¸ºè‡ªå·±çš„ Web é¡¹ç›®æ„å»ºé•œåƒ"></a>ä¸ºè‡ªå·±çš„ Web é¡¹ç›®æ„å»ºé•œåƒ</h3><p>ç¤ºä¾‹é¡¹ç›®ä»£ç ï¼š<a href="https://github.com/gzyunke/test-docker">https://github.com/gzyunke/test-docker</a><br>è¿™æ˜¯ä¸€ä¸ª Nodejs + Koa2 å†™çš„ Web é¡¹ç›®ï¼Œæä¾›äº†ç®€å•çš„ä¸¤ä¸ªæ¼”ç¤ºé¡µé¢ã€‚<br>è½¯ä»¶ä¾èµ–ï¼š<a href="https://nodejs.org/zh-cn/">nodejs</a><br>é¡¹ç›®ä¾èµ–åº“ï¼škoaã€log4jsã€koa-router</p><h3 id="ç¼–å†™-Dockerfile"><a href="#ç¼–å†™-Dockerfile" class="headerlink" title="ç¼–å†™ Dockerfile"></a>ç¼–å†™ Dockerfile</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">FROM node:11</span><br><span class="line">MAINTAINER notnonex&lt;notnonex@gmail.com&gt;</span><br><span class="line"></span><br><span class="line"># å¤åˆ¶ä»£ç </span><br><span class="line">ADD . /app</span><br><span class="line"></span><br><span class="line"># è®¾ç½®å®¹å™¨å¯åŠ¨åçš„é»˜è®¤è¿è¡Œç›®å½•</span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line"># è¿è¡Œå‘½ä»¤ï¼Œå®‰è£…ä¾èµ–</span><br><span class="line"># RUN å‘½ä»¤å¯ä»¥æœ‰å¤šä¸ªï¼Œä½†æ˜¯å¯ä»¥ç”¨ &amp;&amp; è¿æ¥å¤šä¸ªå‘½ä»¤æ¥å‡å°‘å±‚çº§ã€‚</span><br><span class="line"># ä¾‹å¦‚ RUN npm install &amp;&amp; cd /app &amp;&amp; mkdir logs</span><br><span class="line">RUN npm install --registry=https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line"># CMD æŒ‡ä»¤åªèƒ½ä¸€ä¸ªï¼Œæ˜¯å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤ï¼Œç®—æ˜¯ç¨‹åºçš„å…¥å£ã€‚</span><br><span class="line"># å¦‚æœè¿˜éœ€è¦è¿è¡Œå…¶ä»–å‘½ä»¤å¯ä»¥ç”¨ &amp;&amp; è¿æ¥ï¼Œä¹Ÿå¯ä»¥å†™æˆä¸€ä¸ªshellè„šæœ¬å»æ‰§è¡Œã€‚</span><br><span class="line"># ä¾‹å¦‚ CMD cd /app &amp;&amp; ./start.sh</span><br><span class="line">CMD node app.js</span><br></pre></td></tr></table></figure><p><a href="https://docs.docker.com/engine/reference/builder/#run">Dockerfileæ–‡æ¡£</a></p><blockquote><p>å®ç”¨æŠ€å·§ï¼š<br>å¦‚æœä½ å†™ Dockerfile æ—¶ç»å¸¸é‡åˆ°ä¸€äº›è¿è¡Œé”™è¯¯ï¼Œä¾èµ–é”™è¯¯ç­‰ï¼Œä½ å¯ä»¥ç›´æ¥è¿è¡Œä¸€ä¸ªä¾èµ–çš„åº•ï¼Œç„¶åè¿›å…¥ç»ˆç«¯è¿›è¡Œé…ç½®ç¯å¢ƒï¼ŒæˆåŠŸåå†æŠŠåšè¿‡çš„æ­¥éª¤å‘½ä»¤å†™é“ Dockerfile æ–‡ä»¶ä¸­ï¼Œè¿™æ ·ç¼–å†™è°ƒè¯•ä¼šå¿«å¾ˆå¤šã€‚<br>ä¾‹å¦‚ä¸Šé¢çš„åº•æ˜¯<code>node:11</code>ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œ<code>docker run -it -d node:11 bash</code>ï¼Œè·‘èµ·æ¥åè¿›å…¥å®¹å™¨ç»ˆç«¯é…ç½®ä¾èµ–çš„è½¯ä»¶ï¼Œç„¶åå°è¯•è·‘èµ·æ¥è‡ªå·±çš„è½¯ä»¶ï¼Œæœ€åæŠŠæ‰€æœ‰åšè¿‡çš„æ­¥éª¤å†™å…¥åˆ° Dockerfile å°±å¥½äº†ã€‚<br>æŒæ¡å¥½è¿™ä¸ªæŠ€å·§ï¼Œä½ çš„ Dockerfile æ–‡ä»¶ç¼–å†™èµ·æ¥å°±éå¸¸çš„å¾—å¿ƒåº”æ‰‹äº†ã€‚</p></blockquote><h3 id="Build-ä¸ºé•œåƒï¼ˆå®‰è£…åŒ…ï¼‰å’Œè¿è¡Œ"><a href="#Build-ä¸ºé•œåƒï¼ˆå®‰è£…åŒ…ï¼‰å’Œè¿è¡Œ" class="headerlink" title="Build ä¸ºé•œåƒï¼ˆå®‰è£…åŒ…ï¼‰å’Œè¿è¡Œ"></a>Build ä¸ºé•œåƒï¼ˆå®‰è£…åŒ…ï¼‰å’Œè¿è¡Œ</h3><p>ç¼–è¯‘ <code>docker build -t test:v1 .</code></p><blockquote><p><code>-t</code> è®¾ç½®é•œåƒåå­—å’Œç‰ˆæœ¬å·<br>å‘½ä»¤å‚è€ƒï¼š<a href="https://docs.docker.com/engine/reference/commandline/build/">https://docs.docker.com/engine/reference/commandline/build/</a></p></blockquote><p>è¿è¡Œ <code>docker run -p 8080:8080 --name test-hello test:v1</code></p><blockquote><p><code>-p</code> æ˜ å°„å®¹å™¨å†…ç«¯å£åˆ°å®¿ä¸»æœº<br><code>--name</code> å®¹å™¨åå­—<br><code>-d</code> åå°è¿è¡Œ<br>å‘½ä»¤å‚è€ƒæ–‡æ¡£ï¼š<a href="https://docs.docker.com/engine/reference/run/">https://docs.docker.com/engine/reference/run/</a></p></blockquote><h3 id="æ›´å¤šç›¸å…³å‘½ä»¤"><a href="#æ›´å¤šç›¸å…³å‘½ä»¤" class="headerlink" title="æ›´å¤šç›¸å…³å‘½ä»¤"></a>æ›´å¤šç›¸å…³å‘½ä»¤</h3><p><code>docker ps</code> æŸ¥çœ‹å½“å‰è¿è¡Œä¸­çš„å®¹å™¨<br><code>docker images</code> æŸ¥çœ‹é•œåƒåˆ—è¡¨<br><code>docker rm container-id</code> åˆ é™¤æŒ‡å®š id çš„å®¹å™¨<br><code>docker stop/start container-id</code> åœæ­¢&#x2F;å¯åŠ¨æŒ‡å®š id çš„å®¹å™¨<br><code>docker rmi image-id</code> åˆ é™¤æŒ‡å®š id çš„é•œåƒ<br><code>docker volume ls</code> æŸ¥çœ‹ volume åˆ—è¡¨<br><code>docker network ls</code> æŸ¥çœ‹ç½‘ç»œåˆ—è¡¨</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ğŸ’½åˆ¶ä½œè‡ªå·±çš„é•œåƒ&quot;&gt;&lt;a href=&quot;#ğŸ’½åˆ¶ä½œè‡ªå·±çš„é•œåƒ&quot; class=&quot;headerlink&quot; title=&quot;ğŸ’½åˆ¶ä½œè‡ªå·±çš„é•œåƒ&quot;&gt;&lt;/a&gt;ğŸ’½åˆ¶ä½œè‡ªå·±çš„é•œåƒ&lt;/h1&gt;&lt;h3 id=&quot;ä¸ºè‡ªå·±çš„-Web-é¡¹ç›®æ„å»ºé•œåƒ&quot;&gt;&lt;a href=&quot;#ä¸ºè‡ªå·±çš„-Web-é¡¹</summary>
      
    
    
    
    <category term="Docker" scheme="http://cvki.cn/categories/Docker/"/>
    
    
    <category term="Docker" scheme="http://cvki.cn/tags/Docker/"/>
    
    <category term="Dockerå¿«é€Ÿå…¥é—¨" scheme="http://cvki.cn/tags/Docker%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå¿«é€Ÿå…¥é—¨&amp;Docker å¿«é€Ÿå®‰è£…è½¯ä»¶</title>
    <link href="http://cvki.cn/posts/887b1872.html"/>
    <id>http://cvki.cn/posts/887b1872.html</id>
    <published>2023-05-04T04:05:18.000Z</published>
    <updated>2023-08-18T08:21:25.606Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸ’»Docker-å¿«é€Ÿå®‰è£…è½¯ä»¶"><a href="#ğŸ’»Docker-å¿«é€Ÿå®‰è£…è½¯ä»¶" class="headerlink" title="ğŸ’»Docker å¿«é€Ÿå®‰è£…è½¯ä»¶"></a>ğŸ’»Docker å¿«é€Ÿå®‰è£…è½¯ä»¶</h1><h3 id="ç›´æ¥å®‰è£…çš„ç¼ºç‚¹"><a href="#ç›´æ¥å®‰è£…çš„ç¼ºç‚¹" class="headerlink" title="ç›´æ¥å®‰è£…çš„ç¼ºç‚¹"></a>ç›´æ¥å®‰è£…çš„ç¼ºç‚¹</h3><ul><li>å®‰è£…éº»çƒ¦ï¼Œå¯èƒ½æœ‰å„ç§ä¾èµ–ï¼Œè¿è¡ŒæŠ¥é”™ã€‚ä¾‹å¦‚ï¼šWordPressï¼ŒElasticSearchï¼ŒRedisï¼ŒELK</li><li>å¯èƒ½å¯¹ Windows å¹¶ä¸å‹å¥½ï¼Œè¿è¡Œæœ‰å„ç§å…¼å®¹é—®é¢˜ï¼Œè½¯ä»¶åªæ”¯æŒ Linux ä¸Šè·‘</li><li>ä¸æ–¹ä¾¿å®‰è£…å¤šç‰ˆæœ¬è½¯ä»¶ï¼Œä¸èƒ½å…±å­˜ã€‚</li><li>ç”µè„‘å®‰è£…äº†ä¸€å †è½¯ä»¶ï¼Œæ‹–æ…¢ç”µè„‘é€Ÿåº¦ã€‚</li><li>ä¸åŒç³»ç»Ÿå’Œç¡¬ä»¶ï¼Œå®‰è£…æ–¹å¼ä¸ä¸€æ ·</li></ul><h3 id="Docker-å®‰è£…çš„ä¼˜ç‚¹"><a href="#Docker-å®‰è£…çš„ä¼˜ç‚¹" class="headerlink" title="Docker å®‰è£…çš„ä¼˜ç‚¹"></a>Docker å®‰è£…çš„ä¼˜ç‚¹</h3><ul><li>ä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥å®‰è£…å¥½ï¼Œå¿«é€Ÿæ–¹ä¾¿</li><li>æœ‰å¤§é‡çš„é•œåƒï¼Œå¯ç›´æ¥ä½¿ç”¨</li><li>æ²¡æœ‰ç³»ç»Ÿå…¼å®¹é—®é¢˜ï¼ŒLinux ä¸“äº«è½¯ä»¶ä¹Ÿç…§æ ·è·‘</li><li>æ”¯æŒè½¯ä»¶å¤šç‰ˆæœ¬å…±å­˜</li><li>ç”¨å®Œå°±ä¸¢ï¼Œä¸æ‹–æ…¢ç”µè„‘é€Ÿåº¦</li><li>ä¸åŒç³»ç»Ÿå’Œç¡¬ä»¶ï¼Œåªè¦å®‰è£…å¥½ Docker å…¶ä»–éƒ½ä¸€æ ·äº†ï¼Œä¸€ä¸ªå‘½ä»¤æå®šæ‰€æœ‰</li></ul><h3 id="æ¼”ç¤º-Docker-å®‰è£…-Redis"><a href="#æ¼”ç¤º-Docker-å®‰è£…-Redis" class="headerlink" title="æ¼”ç¤º Docker å®‰è£… Redis"></a>æ¼”ç¤º Docker å®‰è£… Redis</h3><p>Redis å®˜ç½‘ï¼š<a href="https://redis.io/">https://redis.io/</a></p><blockquote><p>å®˜ç½‘ä¸‹è½½å®‰è£…æ•™ç¨‹åªæœ‰æºç å®‰è£…æ–¹å¼ï¼Œæ²¡æœ‰ Windows ç‰ˆæœ¬ã€‚æƒ³è¦è‡ªå·±å®‰è£… windows ç‰ˆæœ¬éœ€è¦å»æ‰¾åˆ«äººç¼–è¯‘å¥½çš„å®‰è£…åŒ…ã€‚</p></blockquote><p>Docker å®˜æ–¹é•œåƒä»“åº“æŸ¥æ‰¾ Redis ï¼š<a href="https://hub.docker.com/">https://hub.docker.com/</a></p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/887b1872/kv8zs4qr.png" alt="Dockeré•œåƒå®˜ç½‘"></div><div class="image-meta"><span class="image-caption center">Dockeré•œåƒå®˜ç½‘</span></div></div><p>ä¸€ä¸ªå‘½ä»¤è·‘èµ·æ¥ï¼š<code>docker run -d -p 6379:6379 --name redis redis:latest</code><br>å‘½ä»¤å‚è€ƒï¼š<a href="https://docs.docker.com/engine/reference/commandline/run/">https://docs.docker.com/engine/reference/commandline/run/</a></p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/887b1872/kv8zy4xn.png" alt="Dockerè¿è¡ŒRediså"></div><div class="image-meta"><span class="image-caption center">Dockerè¿è¡ŒRediså</span></div></div><h3 id="å®‰è£…-Wordpress"><a href="#å®‰è£…-Wordpress" class="headerlink" title="å®‰è£… Wordpress"></a>å®‰è£… Wordpress</h3><p>docker-compose.yml</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">version: &#x27;3.1&#x27;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">  wordpress:</span><br><span class="line">    image: wordpress</span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - 8080:80</span><br><span class="line">    environment:</span><br><span class="line">      WORDPRESS_DB_HOST: db</span><br><span class="line">      WORDPRESS_DB_USER: exampleuser</span><br><span class="line">      WORDPRESS_DB_PASSWORD: examplepass</span><br><span class="line">      WORDPRESS_DB_NAME: exampledb</span><br><span class="line">    volumes:</span><br><span class="line">      - wordpress:/var/www/html</span><br><span class="line"></span><br><span class="line">  db:</span><br><span class="line">    image: mysql:5.7</span><br><span class="line">    restart: always</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_DATABASE: exampledb</span><br><span class="line">      MYSQL_USER: exampleuser</span><br><span class="line">      MYSQL_PASSWORD: examplepass</span><br><span class="line">      MYSQL_RANDOM_ROOT_PASSWORD: &#x27;1&#x27;</span><br><span class="line">    volumes:</span><br><span class="line">      - db:/var/lib/mysql</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  wordpress:</span><br><span class="line">  db:</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-ELK"><a href="#å®‰è£…-ELK" class="headerlink" title="å®‰è£… ELK"></a>å®‰è£… ELK</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 5601:5601 -p 9200:9200 -p 5044:5044 -it --name elk sebp/elk</span><br></pre></td></tr></table></figure><p><a href="https://docs.microsoft.com/en-us/windows/wsl/wsl-config#global-configuration-options-with-wslconfig">å†…å­˜ä¸å¤Ÿè§£å†³æ–¹æ³•</a><br>è½¬åˆ°ç”¨æˆ·ç›®å½• <code>cd ~</code>ï¼Œè·¯å¾„ç±»ä¼¼è¿™ä¸ªï¼š<code>C:\Users\&lt;UserName&gt;</code><br>åˆ›å»º <code>.wslconfig</code> æ–‡ä»¶å¡«å…¥ä»¥ä¸‹å†…å®¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[wsl2]</span><br><span class="line">memory=10GB # Limits VM memory in WSL 2 to 4 GB</span><br><span class="line">processors=2 # Makes the WSL 2 VM use two virtual processors</span><br></pre></td></tr></table></figure><p>ç”Ÿæ•ˆé…ç½®ï¼Œå‘½ä»¤è¡Œè¿è¡Œ <code>wsl --shutdown</code></p><h3 id="æ›´å¤šç›¸å…³å‘½ä»¤"><a href="#æ›´å¤šç›¸å…³å‘½ä»¤" class="headerlink" title="æ›´å¤šç›¸å…³å‘½ä»¤"></a>æ›´å¤šç›¸å…³å‘½ä»¤</h3><p><code>docker ps</code> æŸ¥çœ‹å½“å‰è¿è¡Œä¸­çš„å®¹å™¨<br><code>docker images</code> æŸ¥çœ‹é•œåƒåˆ—è¡¨<br><code>docker rm container-id</code> åˆ é™¤æŒ‡å®š id çš„å®¹å™¨<br><code>docker stop/start container-id</code> åœæ­¢&#x2F;å¯åŠ¨æŒ‡å®š id çš„å®¹å™¨<br><code>docker rmi image-id</code> åˆ é™¤æŒ‡å®š id çš„é•œåƒ<br><code>docker volume ls</code> æŸ¥çœ‹ volume åˆ—è¡¨<br><code>docker network ls</code> æŸ¥çœ‹ç½‘ç»œåˆ—è¡¨</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ğŸ’»Docker-å¿«é€Ÿå®‰è£…è½¯ä»¶&quot;&gt;&lt;a href=&quot;#ğŸ’»Docker-å¿«é€Ÿå®‰è£…è½¯ä»¶&quot; class=&quot;headerlink&quot; title=&quot;ğŸ’»Docker å¿«é€Ÿå®‰è£…è½¯ä»¶&quot;&gt;&lt;/a&gt;ğŸ’»Docker å¿«é€Ÿå®‰è£…è½¯ä»¶&lt;/h1&gt;&lt;h3 id=&quot;ç›´æ¥å®‰è£…çš„ç¼ºç‚¹&quot;&gt;&lt;a h</summary>
      
    
    
    
    <category term="Docker" scheme="http://cvki.cn/categories/Docker/"/>
    
    
    <category term="Docker" scheme="http://cvki.cn/tags/Docker/"/>
    
    <category term="Dockerå¿«é€Ÿå…¥é—¨" scheme="http://cvki.cn/tags/Docker%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå¿«é€Ÿå…¥é—¨&amp;Docker ç®€ä»‹å’Œå®‰è£…</title>
    <link href="http://cvki.cn/posts/87fcc52f.html"/>
    <id>http://cvki.cn/posts/87fcc52f.html</id>
    <published>2023-05-03T03:19:18.000Z</published>
    <updated>2023-08-18T08:21:25.606Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸ‰Docker-ç®€ä»‹å’Œå®‰è£…"><a href="#ğŸ‰Docker-ç®€ä»‹å’Œå®‰è£…" class="headerlink" title="ğŸ‰Docker ç®€ä»‹å’Œå®‰è£…"></a>ğŸ‰Docker ç®€ä»‹å’Œå®‰è£…</h1><h3 id="Docker-æ˜¯ä»€ä¹ˆ"><a href="#Docker-æ˜¯ä»€ä¹ˆ" class="headerlink" title="Docker æ˜¯ä»€ä¹ˆ"></a>Docker æ˜¯ä»€ä¹ˆ</h3><p>Docker æ˜¯ä¸€ä¸ªåº”ç”¨æ‰“åŒ…ã€åˆ†å‘ã€éƒ¨ç½²çš„å·¥å…·<br>ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ªè½»é‡çš„è™šæ‹Ÿæœºï¼Œå®ƒåªè™šæ‹Ÿä½ è½¯ä»¶éœ€è¦çš„è¿è¡Œç¯å¢ƒï¼Œå¤šä½™çš„ä¸€ç‚¹éƒ½ä¸è¦ï¼Œ<br>è€Œæ™®é€šè™šæ‹Ÿæœºåˆ™æ˜¯ä¸€ä¸ªå®Œæ•´è€Œåºå¤§çš„ç³»ç»Ÿï¼ŒåŒ…å«å„ç§ä¸ç®¡ä½ è¦ä¸è¦çš„è½¯ä»¶ã€‚</p><h3 id="è·Ÿæ™®é€šè™šæ‹Ÿæœºçš„å¯¹æ¯”"><a href="#è·Ÿæ™®é€šè™šæ‹Ÿæœºçš„å¯¹æ¯”" class="headerlink" title="è·Ÿæ™®é€šè™šæ‹Ÿæœºçš„å¯¹æ¯”"></a>è·Ÿæ™®é€šè™šæ‹Ÿæœºçš„å¯¹æ¯”</h3><table><thead><tr><th>ç‰¹æ€§</th><th>æ™®é€šè™šæ‹Ÿæœº</th><th>Docker</th></tr></thead><tbody><tr><td>è·¨å¹³å°</td><td>é€šå¸¸åªèƒ½åœ¨æ¡Œé¢çº§ç³»ç»Ÿè¿è¡Œï¼Œä¾‹å¦‚ Windows&#x2F;Macï¼Œæ— æ³•åœ¨ä¸å¸¦å›¾å½¢ç•Œé¢çš„æœåŠ¡å™¨ä¸Šè¿è¡Œ</td><td>æ”¯æŒçš„ç³»ç»Ÿéå¸¸å¤šï¼Œå„ç±» windows å’Œ Linux éƒ½æ”¯æŒ</td></tr><tr><td>æ€§èƒ½</td><td>æ€§èƒ½æŸè€—å¤§ï¼Œå†…å­˜å ç”¨é«˜ï¼Œå› ä¸ºæ˜¯æŠŠæ•´ä¸ªå®Œæ•´ç³»ç»Ÿéƒ½è™šæ‹Ÿå‡ºæ¥äº†</td><td>æ€§èƒ½å¥½ï¼Œåªè™šæ‹Ÿè½¯ä»¶æ‰€éœ€è¿è¡Œç¯å¢ƒï¼Œæœ€å¤§åŒ–å‡å°‘æ²¡ç”¨çš„é…ç½®</td></tr><tr><td>è‡ªåŠ¨åŒ–</td><td>éœ€è¦æ‰‹åŠ¨å®‰è£…æ‰€æœ‰ä¸œè¥¿</td><td>ä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥è‡ªåŠ¨éƒ¨ç½²å¥½æ‰€éœ€ç¯å¢ƒ</td></tr><tr><td>ç¨³å®šæ€§</td><td>ç¨³å®šæ€§ä¸é«˜ï¼Œä¸åŒç³»ç»Ÿå·®å¼‚å¤§</td><td>ç¨³å®šæ€§å¥½ï¼Œä¸åŒç³»ç»Ÿéƒ½ä¸€æ ·éƒ¨ç½²æ–¹å¼</td></tr></tbody></table><h3 id="æ‰“åŒ…ã€åˆ†å‘ã€éƒ¨ç½²"><a href="#æ‰“åŒ…ã€åˆ†å‘ã€éƒ¨ç½²" class="headerlink" title="æ‰“åŒ…ã€åˆ†å‘ã€éƒ¨ç½²"></a>æ‰“åŒ…ã€åˆ†å‘ã€éƒ¨ç½²</h3><p><strong>æ‰“åŒ…</strong>ï¼šå°±æ˜¯æŠŠä½ è½¯ä»¶è¿è¡Œæ‰€éœ€çš„ä¾èµ–ã€ç¬¬ä¸‰æ–¹åº“ã€è½¯ä»¶æ‰“åŒ…åˆ°ä¸€èµ·ï¼Œå˜æˆä¸€ä¸ªå®‰è£…åŒ…<br><strong>åˆ†å‘</strong>ï¼šä½ å¯ä»¥æŠŠä½ æ‰“åŒ…å¥½çš„â€œå®‰è£…åŒ…â€ä¸Šä¼ åˆ°ä¸€ä¸ªé•œåƒä»“åº“ï¼Œå…¶ä»–äººå¯ä»¥éå¸¸æ–¹ä¾¿çš„è·å–å’Œå®‰è£…<br><strong>éƒ¨ç½²</strong>ï¼šæ‹¿ç€â€œå®‰è£…åŒ…â€å°±å¯ä»¥ä¸€ä¸ªå‘½ä»¤è¿è¡Œèµ·æ¥ä½ çš„åº”ç”¨ï¼Œè‡ªåŠ¨æ¨¡æ‹Ÿå‡ºä¸€æ‘¸ä¸€æ ·çš„è¿è¡Œç¯å¢ƒï¼Œä¸ç®¡æ˜¯åœ¨ Windows&#x2F;Mac&#x2F;Linuxã€‚</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/87fcc52f/kv7rlicu.png" alt="image.png"></div><div class="image-meta"><span class="image-caption center">image.png</span></div></div><h3 id="Docker-éƒ¨ç½²çš„ä¼˜åŠ¿"><a href="#Docker-éƒ¨ç½²çš„ä¼˜åŠ¿" class="headerlink" title="Docker éƒ¨ç½²çš„ä¼˜åŠ¿"></a>Docker éƒ¨ç½²çš„ä¼˜åŠ¿</h3><p>å¸¸è§„åº”ç”¨å¼€å‘éƒ¨ç½²æ–¹å¼ï¼šè‡ªå·±åœ¨ Windows ä¸Šå¼€å‘ã€æµ‹è¯• â€“&gt; åˆ° Linux æœåŠ¡å™¨é…ç½®è¿è¡Œç¯å¢ƒéƒ¨ç½²ã€‚</p><blockquote><p>é—®é¢˜ï¼šæˆ‘æœºå™¨ä¸Šè·‘éƒ½æ²¡é—®é¢˜ï¼Œæ€ä¹ˆåˆ°æœåŠ¡å™¨å°±å„ç§é—®é¢˜äº†</p></blockquote><p>ç”¨ Docker å¼€å‘éƒ¨ç½²æµç¨‹ï¼šè‡ªå·±åœ¨ Windows ä¸Šå¼€å‘ã€æµ‹è¯• â€“&gt; æ‰“åŒ…ä¸º Docker é•œåƒï¼ˆå¯ä»¥ç†è§£ä¸ºè½¯ä»¶å®‰è£…åŒ…ï¼‰ â€“&gt; å„ç§æœåŠ¡å™¨ä¸Šåªéœ€è¦ä¸€ä¸ªå‘½ä»¤éƒ¨ç½²å¥½</p><blockquote><p>ä¼˜ç‚¹ï¼šç¡®ä¿äº†ä¸åŒæœºå™¨ä¸Šè·‘éƒ½æ˜¯ä¸€è‡´çš„è¿è¡Œç¯å¢ƒï¼Œä¸ä¼šå‡ºç°æˆ‘æœºå™¨ä¸Šè·‘æ­£å¸¸ï¼Œä½ æœºå™¨è·‘å°±æœ‰é—®é¢˜çš„æƒ…å†µã€‚</p></blockquote><p>ä¾‹å¦‚ <a href="https://easydoc.net/">æ˜“æ–‡æ¡£</a>ï¼Œ<a href="https://svnbucket.com/">SVNBucket</a> çš„ç§æœ‰åŒ–éƒ¨ç½²å°±æ˜¯ç”¨ Dockerï¼Œè½»æ¾åº”å¯¹å®¢æˆ·çš„å„ç§æœåŠ¡å™¨ã€‚</p><h3 id="Docker-é€šå¸¸ç”¨æ¥åšä»€ä¹ˆ"><a href="#Docker-é€šå¸¸ç”¨æ¥åšä»€ä¹ˆ" class="headerlink" title="Docker é€šå¸¸ç”¨æ¥åšä»€ä¹ˆ"></a>Docker é€šå¸¸ç”¨æ¥åšä»€ä¹ˆ</h3><ul><li>åº”ç”¨åˆ†å‘ã€éƒ¨ç½²ï¼Œæ–¹ä¾¿ä¼ æ’­ç»™ä»–äººå®‰è£…ã€‚ç‰¹åˆ«æ˜¯å¼€æºè½¯ä»¶å’Œæä¾›ç§æœ‰éƒ¨ç½²çš„åº”ç”¨</li><li>å¿«é€Ÿå®‰è£…æµ‹è¯•&#x2F;å­¦ä¹ è½¯ä»¶ï¼Œç”¨å®Œå°±ä¸¢ï¼ˆç±»ä¼¼å°ç¨‹åºï¼‰ï¼Œä¸æŠŠæ—¶é—´æµªè´¹åœ¨å®‰è£…è½¯ä»¶ä¸Šã€‚ä¾‹å¦‚ Redis &#x2F; MongoDB &#x2F; ElasticSearch &#x2F; ELK</li><li>å¤šä¸ªç‰ˆæœ¬è½¯ä»¶å…±å­˜ï¼Œä¸æ±¡æŸ“ç³»ç»Ÿï¼Œä¾‹å¦‚ Python2ã€Python3ï¼ŒRedis4.0ï¼ŒRedis5.0</li><li>Windows ä¸Šä½“éªŒ&#x2F;å­¦ä¹ å„ç§ Linux ç³»ç»Ÿ</li></ul><h3 id="é‡è¦æ¦‚å¿µï¼šé•œåƒã€å®¹å™¨"><a href="#é‡è¦æ¦‚å¿µï¼šé•œåƒã€å®¹å™¨" class="headerlink" title="é‡è¦æ¦‚å¿µï¼šé•œåƒã€å®¹å™¨"></a>é‡è¦æ¦‚å¿µï¼šé•œåƒã€å®¹å™¨</h3><p><strong>é•œåƒ</strong>ï¼šå¯ä»¥ç†è§£ä¸ºè½¯ä»¶å®‰è£…åŒ…ï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œä¼ æ’­å’Œå®‰è£…ã€‚<br><strong>å®¹å™¨</strong>ï¼šè½¯ä»¶å®‰è£…åçš„çŠ¶æ€ï¼Œæ¯ä¸ªè½¯ä»¶è¿è¡Œç¯å¢ƒéƒ½æ˜¯ç‹¬ç«‹çš„ã€éš”ç¦»çš„ï¼Œç§°ä¹‹ä¸ºå®¹å™¨ã€‚</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>æ¡Œé¢ç‰ˆï¼š<a href="https://www.docker.com/products/docker-desktop">https://www.docker.com/products/docker-desktop</a><br>æœåŠ¡å™¨ç‰ˆï¼š<a href="https://docs.docker.com/engine/install/#server">https://docs.docker.com/engine/install/#server</a></p><h3 id="å¯åŠ¨æŠ¥é”™è§£å†³"><a href="#å¯åŠ¨æŠ¥é”™è§£å†³" class="headerlink" title="å¯åŠ¨æŠ¥é”™è§£å†³"></a>å¯åŠ¨æŠ¥é”™è§£å†³</h3><p>æŠ¥é”™æˆªå›¾</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/87fcc52f/kvacsk82.png)" alt="**è§£å†³æ–¹æ³•**ï¼š æ§åˆ¶é¢æ¿->ç¨‹åº->å¯ç”¨æˆ–å…³é—­ windows åŠŸèƒ½ï¼Œå¼€å¯ Windows è™šæ‹ŸåŒ–å’Œ Linux å­ç³»ç»Ÿï¼ˆWSL2 image.png"></div><div class="image-meta"><span class="image-caption center">**è§£å†³æ–¹æ³•**ï¼š æ§åˆ¶é¢æ¿->ç¨‹åº->å¯ç”¨æˆ–å…³é—­ windows åŠŸèƒ½ï¼Œå¼€å¯ Windows è™šæ‹ŸåŒ–å’Œ Linux å­ç³»ç»Ÿï¼ˆWSL2 image.png</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="/posts/87fcc52f/kvactn57.png" alt="image.png"></div><div class="image-meta"><span class="image-caption center">image.png</span></div></div><p><strong>å‘½ä»¤è¡Œå®‰è£… Linux å†…æ ¸</strong><br><code>wsl.exe --install -d Ubuntu</code></p><blockquote><p>ä½ ä¹Ÿå¯ä»¥æ‰“å¼€å¾®è½¯å•†åº— Microsoft Store æœç´¢ Linux è¿›è¡Œå®‰è£…ï¼Œé€‰æ‹©ä¸€ä¸ªæœ€æ–°ç‰ˆæœ¬çš„ Ubuntu æˆ–è€… Debian éƒ½å¯ä»¥</p></blockquote><blockquote><p>ä¸Šé¢å‘½ä»¤å¾ˆå¯èƒ½ä½ å®‰è£…ä¸äº†ï¼Œå¾®è½¯å•†åº—ä½ ä¹Ÿå¯èƒ½æ‰“ä¸å¼€ï¼Œå¦‚æœé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå‚è€ƒï¼š<a href="https://blog.csdn.net/qq_42220935/article/details/104714114">https://blog.csdn.net/qq_42220935/article/details/104714114</a></p></blockquote><p><strong>è®¾ç½®å¼€æœºå¯åŠ¨ Hypervisor</strong><br><code>bcdedit /set hypervisorlaunchtype auto</code></p><blockquote><p>æ³¨æ„è¦ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€ PowerShell</p></blockquote><p><strong>è®¾ç½®é»˜è®¤ä½¿ç”¨ç‰ˆæœ¬2</strong><br><code>wsl.exe --set-default-version 2</code></p><p><strong>æŸ¥çœ‹ WSL æ˜¯å¦å®‰è£…æ­£ç¡®</strong><br><code>wsl.exe --list --verbose</code><br>åº”è¯¥å¦‚ä¸‹å›¾ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ª Linux ç³»ç»Ÿï¼Œåå­—ä½ çš„ä¸ä¸€å®šè·Ÿæˆ‘çš„ä¸€æ ·ï¼Œçœ‹ä½ å®‰è£…çš„æ˜¯ä»€ä¹ˆç‰ˆæœ¬ã€‚<br>å¹¶ä¸” VERSION æ˜¯ 2</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/87fcc52f/ldxvkks2.png" alt="image.png"></div><div class="image-meta"><span class="image-caption center">image.png</span></div></div><p><strong>ç¡®ä¿ BIOS å·²å¼€å¯è™šæ‹ŸåŒ–ï¼Œä¸‹å›¾æ£€æŸ¥æ˜¯å¦å·²å¼€å¯å¥½</strong></p><blockquote><p>å¦‚æœæ˜¯å·²ç¦ç”¨ï¼Œè¯·åœ¨å¼€æœºæ—¶æŒ‰ F2 è¿›å…¥ BIOS å¼€å¯ä¸€ä¸‹ï¼Œä¸ä¼šè®¾ç½®çš„å¯ä»¥ç½‘ä¸Šæœç´¢ä¸‹è‡ªå·±ä¸»æ¿çš„è®¾ç½®æ–¹æ³•ï¼ŒIntel å’Œ AMD çš„è®¾ç½®å¯èƒ½ç¨æœ‰ä¸åŒ</p></blockquote><div class="tag-plugin image"><div class="image-bg"><img src="/posts/87fcc52f/kvaf7ody.png" alt="image.png"></div><div class="image-meta"><span class="image-caption center">image.png</span></div></div><p><strong>å‡ºç°ä¸‹å›¾é”™è¯¯ï¼Œç‚¹å‡»é“¾æ¥å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ WSL2</strong><br><a href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi">https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi</a></p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/87fcc52f/kvajwvuw.png" alt="image.png"></div><div class="image-meta"><span class="image-caption center">image.png</span></div></div><h3 id="é•œåƒåŠ é€Ÿæº"><a href="#é•œåƒåŠ é€Ÿæº" class="headerlink" title="é•œåƒåŠ é€Ÿæº"></a>é•œåƒåŠ é€Ÿæº</h3><table><thead><tr><th>é•œåƒåŠ é€Ÿå™¨</th><th>é•œåƒåŠ é€Ÿå™¨åœ°å€</th></tr></thead><tbody><tr><td>Docker ä¸­å›½å®˜æ–¹é•œåƒ</td><td><a href="https://registry.docker-cn.com/">https://registry.docker-cn.com</a></td></tr><tr><td>DaoCloud é•œåƒç«™</td><td><a href="http://f1361db2.m.daocloud.io/">http://f1361db2.m.daocloud.io</a></td></tr><tr><td>Azure ä¸­å›½é•œåƒ</td><td><a href="https://dockerhub.azk8s.cn/">https://dockerhub.azk8s.cn</a></td></tr><tr><td>ç§‘å¤§é•œåƒç«™</td><td><a href="https://docker.mirrors.ustc.edu.cn/">https://docker.mirrors.ustc.edu.cn</a></td></tr><tr><td>é˜¿é‡Œäº‘</td><td><a href="https://ud6340vz.mirror.aliyuncs.com/">https://ud6340vz.mirror.aliyuncs.com</a></td></tr><tr><td>ä¸ƒç‰›äº‘</td><td><a href="https://reg-mirror.qiniu.com/">https://reg-mirror.qiniu.com</a></td></tr><tr><td>ç½‘æ˜“äº‘</td><td><a href="https://hub-mirror.c.163.com/">https://hub-mirror.c.163.com</a></td></tr><tr><td>è…¾è®¯äº‘</td><td><a href="https://mirror.ccs.tencentyun.com/">https://mirror.ccs.tencentyun.com</a></td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;]</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/87fcc52f/l25jdwrn.png" alt="1.png"></div><div class="image-meta"><span class="image-caption center">1.png</span></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ğŸ‰Docker-ç®€ä»‹å’Œå®‰è£…&quot;&gt;&lt;a href=&quot;#ğŸ‰Docker-ç®€ä»‹å’Œå®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;ğŸ‰Docker ç®€ä»‹å’Œå®‰è£…&quot;&gt;&lt;/a&gt;ğŸ‰Docker ç®€ä»‹å’Œå®‰è£…&lt;/h1&gt;&lt;h3 id=&quot;Docker-æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a hr</summary>
      
    
    
    
    <category term="Docker" scheme="http://cvki.cn/categories/Docker/"/>
    
    
    <category term="Docker" scheme="http://cvki.cn/tags/Docker/"/>
    
    <category term="Dockerå¿«é€Ÿå…¥é—¨" scheme="http://cvki.cn/tags/Docker%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå­¦ä¹ ç¬”è®°ä¹‹åŸºç¡€ç¯‡</title>
    <link href="http://cvki.cn/posts/85fe2496.html"/>
    <id>http://cvki.cn/posts/85fe2496.html</id>
    <published>2023-04-06T11:10:13.000Z</published>
    <updated>2023-08-18T08:21:25.578Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å­¦ä¹ èµ„æ–™ï¼š</p></blockquote><p><a href="https://www.bilibili.com/video/BV1og4y1q7M4">ã€ç‹‚ç¥è¯´Javaã€‘Dockeræœ€æ–°è¶…è¯¦ç»†ç‰ˆæ•™ç¨‹é€šä¿—æ˜“æ‡‚_å“”å“©å“”å“©_bilibili</a></p><p><a href="https://blog.csdn.net/huangjhai/article/details/118854733">Dockerå¿«é€Ÿå…¥é—¨æ€»ç»“ç¬”è®°_huangjhaiçš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/xiaozecheng/article/details/106165491">docker è¿›é˜¶ ä¹‹å®¹å™¨æ•°æ®å· DockerFile Dockerç½‘ç»œ â€” ç‹‚ç¥è¯´_chengçš„åšå®¢-CSDNåšå®¢</a></p><p>å®˜ç½‘ï¼š<a href="https://www.docker.com/">https://www.docker.com/</a></p><p>æ–‡æ¡£åœ°å€ï¼š <a href="https://docs.docker.com/">https://docs.docker.com/</a> ï¼ˆDocker å®˜ç½‘æ–‡æ¡£è¶…çº§è¯¦ç»†ï¼‰</p><p>ä»“åº“åœ°å€ï¼š<a href="https://hub.docker.com/">https://hub.docker.com/</a></p><p><a href="http://www.dockerinfo.net/document">Dockerä¸­æ–‡æ–‡æ¡£ Dockeræ¦‚è¿°-DockerInfo</a></p><p><a href="https://blog.csdn.net/nickDaDa/article/details/88716395">Docker ä¸­æ–‡æ–‡æ¡£ï¼ˆè¯‘ï¼‰_nickDaDaçš„åšå®¢-CSDNåšå®¢_dockerä¸­æ–‡æ–‡æ¡£</a></p><h2 id="1ã€Dockeræ¦‚è¿°"><a href="#1ã€Dockeræ¦‚è¿°" class="headerlink" title="1ã€Dockeræ¦‚è¿°"></a>1ã€Dockeræ¦‚è¿°</h2><h2 id="1-1-Docker-ä¸ºä»€ä¹ˆä¼šå‡ºç°"><a href="#1-1-Docker-ä¸ºä»€ä¹ˆä¼šå‡ºç°" class="headerlink" title="1.1 Docker ä¸ºä»€ä¹ˆä¼šå‡ºç°"></a>1.1 Docker ä¸ºä»€ä¹ˆä¼šå‡ºç°</h2><blockquote><p>ä¸€æ¬¾äº§å“ä¸Šçº¿ï¼šé¢ä¸´é—®é¢˜ï¼š</p></blockquote><p>é—®é¢˜1ï¼šå¼€å‘ å’Œ ä¸Šçº¿ ä¿©å¥—ç¯å¢ƒ</p><p>é—®é¢˜2ï¼šå¼€å‘äººå‘˜ å’Œ è¿ç»´äººå‘˜ ï¼Œå¼€å‘æµ‹è¯•å¯è¿è¡Œï¼Œä¸Šçº¿å°±è¿è¡Œä¸äº†</p><p>é—®é¢˜3ï¼šç¯å¢ƒé…ç½®ååˆ†éº»çƒ¦ï¼Œæ¯ä¸ªæœºå™¨éƒ½è¦éƒ¨ç½²ç¯å¢ƒï¼ˆé›†ç¾¤ Redisã€ESã€Hadoop ç­‰ç­‰ï¼‰</p><p>é—®é¢˜4ï¼š å‘å¸ƒ jaråŒ… æ—¶ åˆè¦ éƒ¨ç½²ï¼ˆMysqlã€ESã€Redisã€jdk ç­‰ç­‰ï¼‰è´¹æ—¶çš„ç¯å¢ƒï¼Œå¸Œæœ›jar + ç¯å¢ƒä¸€èµ·å‘å¸ƒ</p><p>é—®é¢˜5ï¼šéƒ¨ç½²çš„ç¯å¢ƒä¸èƒ½è·¨å¹³å° windows ä¸ Linux</p><p><strong>Docker ç»™ä»¥ä¸Šé—®é¢˜æå‡ºäº†è§£å†³æ–¹æ¡ˆ</strong></p><p>ä¼ ç»Ÿï¼šå¼€å‘æ‰“jaråŒ… ç»™è¿ç»´æ¥éƒ¨ç½²</p><p>ç°åœ¨ï¼šå¼€å‘å³è´Ÿè´£æ‰“åŒ…åˆè´Ÿè´£éƒ¨ç½²ï¼Œå…¨æ ˆå¼€å‘</p><p>å¼€å‘äººå‘˜ æ‰“jaråŒ…å¸¦ä¸Šç¯å¢ƒï¼ˆè¿™é‡Œçš„ç¯å¢ƒç§°ä¸º<strong>é•œåƒ</strong>ï¼‰ â€“ Docker ä»“åº“ï¼ˆå•†åº—ï¼‰ â€“ è¿ç»´äººå‘˜ä¸‹è½½ <strong>é•œåƒ</strong> å¯ç›´æ¥è¿è¡Œ</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406171433771.png" alt="image-20230406171433771"></div><div class="image-meta"><span class="image-caption center">image-20230406171433771</span></div></div><p>docker çš„ æ€æƒ³ æ¥æºäº é›†è£…ç®± ï¼Œæ‰“åŒ…è£…ç®±ï¼Œç›¸äº’éš”ç¦»</p><p><strong>è™šæ‹Ÿæœºéå¸¸ç¬¨é‡ï¼Œè€Œdockerååˆ†å°å·§ã€‚</strong></p><p>å¼€æºï¼šå¼€æ”¾æºä»£ç </p><h2 id="1-2-Dockerçš„æ¦‚è¿°"><a href="#1-2-Dockerçš„æ¦‚è¿°" class="headerlink" title="1.2 Dockerçš„æ¦‚è¿°"></a>1.2 Dockerçš„æ¦‚è¿°</h2><blockquote><p>1ã€åŸºæœ¬ä»‹ç»</p></blockquote><p> Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼ŒåŸºäº Go è¯­è¨€ å¹¶éµä» Apache2.0 åè®®å¼€æºã€‚</p><p> Docker å¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚</p><p> å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ï¼ˆç±»ä¼¼ iPhone çš„ appï¼‰,æ›´é‡è¦çš„æ˜¯å®¹å™¨æ€§èƒ½å¼€é”€æä½ã€‚</p><p> Docker ä» 17.03 ç‰ˆæœ¬ä¹‹ååˆ†ä¸º CEï¼ˆCommunity Edition: ç¤¾åŒºç‰ˆï¼‰ å’Œ EEï¼ˆEnterprise Edition: ä¼ä¸šç‰ˆï¼‰ï¼Œæˆ‘ä»¬ç”¨ç¤¾åŒºç‰ˆå°±å¯ä»¥äº†ã€‚</p><p>å®˜ç½‘ï¼š<a href="https://www.docker.com/">https://www.docker.com/</a></p><p>æ–‡æ¡£åœ°å€ï¼š <a href="https://docs.docker.com/">https://docs.docker.com/</a> ï¼ˆ<strong>Docker å®˜ç½‘æ–‡æ¡£è¶…çº§è¯¦ç»†</strong>ï¼‰</p><p>ä»“åº“åœ°å€ï¼š<a href="https://hub.docker.com/">https://hub.docker.com/</a></p><blockquote><p>2ã€åº”ç”¨åœºæ™¯</p></blockquote><p> Web åº”ç”¨çš„è‡ªåŠ¨åŒ–æ‰“åŒ…å’Œå‘å¸ƒã€‚</p><p> è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒæŒç»­é›†æˆã€å‘å¸ƒã€‚</p><p> åœ¨æœåŠ¡å‹ç¯å¢ƒä¸­éƒ¨ç½²å’Œè°ƒæ•´æ•°æ®åº“æˆ–å…¶ä»–çš„åå°åº”ç”¨ã€‚</p><p> ä»å¤´ç¼–è¯‘æˆ–è€…æ‰©å±•ç°æœ‰çš„ OpenShift æˆ– Cloud Foundry å¹³å°æ¥æ­å»ºè‡ªå·±çš„ PaaS ç¯å¢ƒã€‚</p><blockquote><p>3ã€Docker çš„ä¼˜åŠ¿</p></blockquote><p> Docker æ˜¯ä¸€ä¸ªç”¨äºå¼€å‘ï¼Œäº¤ä»˜å’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å¼€æ”¾å¹³å°ã€‚Docker ä½¿æ‚¨èƒ½å¤Ÿå°†åº”ç”¨ç¨‹åºä¸åŸºç¡€æ¶æ„åˆ†å¼€ï¼Œä»è€Œå¯ä»¥å¿«é€Ÿäº¤ä»˜è½¯ä»¶ã€‚å€ŸåŠ© Dockerï¼Œæ‚¨å¯ä»¥ä¸ç®¡ç†åº”ç”¨ç¨‹åºç›¸åŒçš„æ–¹å¼æ¥ç®¡ç†åŸºç¡€æ¶æ„ã€‚é€šè¿‡åˆ©ç”¨ Docker çš„æ–¹æ³•æ¥å¿«é€Ÿäº¤ä»˜ï¼Œæµ‹è¯•å’Œéƒ¨ç½²ä»£ç ï¼Œæ‚¨å¯ä»¥å¤§å¤§å‡å°‘ç¼–å†™ä»£ç å’Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œä»£ç ä¹‹é—´çš„å»¶è¿Ÿã€‚</p><p>(1) å¿«é€Ÿï¼Œä¸€è‡´åœ°äº¤ä»˜æ‚¨çš„åº”ç”¨ç¨‹åºã€‚</p><p> Docker å…è®¸å¼€å‘äººå‘˜ä½¿ç”¨æ‚¨æä¾›çš„åº”ç”¨ç¨‹åºæˆ–æœåŠ¡çš„æœ¬åœ°å®¹å™¨åœ¨æ ‡å‡†åŒ–ç¯å¢ƒä¸­å·¥ä½œï¼Œä»è€Œç®€åŒ–äº†å¼€å‘çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p> å®¹å™¨éå¸¸é€‚åˆæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ï¼ˆCI &#x2F; CDï¼‰å·¥ä½œæµç¨‹ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹æ–¹æ¡ˆï¼š</p><p> æ‚¨çš„å¼€å‘äººå‘˜åœ¨æœ¬åœ°ç¼–å†™ä»£ç ï¼Œå¹¶ä½¿ç”¨ Docker å®¹å™¨ä¸åŒäº‹å…±äº«ä»–ä»¬çš„å·¥ä½œã€‚ä»–ä»¬ä½¿ç”¨ Docker å°†å…¶åº”ç”¨ç¨‹åºæ¨é€åˆ°æµ‹è¯•ç¯å¢ƒä¸­ï¼Œå¹¶æ‰§è¡Œè‡ªåŠ¨æˆ–æ‰‹åŠ¨æµ‹è¯•ã€‚å½“å¼€å‘äººå‘˜å‘ç°é”™è¯¯æ—¶ï¼Œä»–ä»¬å¯ä»¥åœ¨å¼€å‘ç¯å¢ƒä¸­å¯¹å…¶è¿›è¡Œä¿®å¤ï¼Œç„¶åå°†å…¶é‡æ–°éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒä¸­ï¼Œä»¥è¿›è¡Œæµ‹è¯•å’ŒéªŒè¯ã€‚æµ‹è¯•å®Œæˆåï¼Œå°†ä¿®è¡¥ç¨‹åºæ¨é€ç»™ç”Ÿäº§ç¯å¢ƒï¼Œå°±åƒå°†æ›´æ–°çš„é•œåƒæ¨é€åˆ°ç”Ÿäº§ç¯å¢ƒä¸€æ ·ç®€å•ã€‚</p><p>(2) å“åº”å¼éƒ¨ç½²å’Œæ‰©å±•-<br>Docker æ˜¯åŸºäºå®¹å™¨çš„å¹³å°ï¼Œå…è®¸é«˜åº¦å¯ç§»æ¤çš„å·¥ä½œè´Ÿè½½ã€‚Docker å®¹å™¨å¯ä»¥åœ¨å¼€å‘äººå‘˜çš„æœ¬æœºä¸Šï¼Œæ•°æ®ä¸­å¿ƒçš„ç‰©ç†æˆ–è™šæ‹Ÿæœºä¸Šï¼Œäº‘æœåŠ¡ä¸Šæˆ–æ··åˆç¯å¢ƒä¸­è¿è¡Œã€‚</p><p> Docker çš„å¯ç§»æ¤æ€§å’Œè½»é‡çº§çš„ç‰¹æ€§ï¼Œè¿˜å¯ä»¥ä½¿æ‚¨è½»æ¾åœ°å®ŒæˆåŠ¨æ€ç®¡ç†çš„å·¥ä½œè´Ÿæ‹…ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡éœ€æ±‚æŒ‡ç¤ºï¼Œå®æ—¶æ‰©å±•æˆ–æ‹†é™¤åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ã€‚</p><p>(3) åœ¨åŒä¸€ç¡¬ä»¶ä¸Šè¿è¡Œæ›´å¤šå·¥ä½œè´Ÿè½½-<br>Docker è½»å·§å¿«é€Ÿã€‚å®ƒä¸ºåŸºäºè™šæ‹Ÿæœºç®¡ç†ç¨‹åºçš„è™šæ‹Ÿæœºæä¾›äº†å¯è¡Œã€ç»æµã€é«˜æ•ˆçš„æ›¿ä»£æ–¹æ¡ˆï¼Œå› æ­¤æ‚¨å¯ä»¥åˆ©ç”¨æ›´å¤šçš„è®¡ç®—èƒ½åŠ›æ¥å®ç°ä¸šåŠ¡ç›®æ ‡ã€‚Docker éå¸¸é€‚åˆäºé«˜å¯†åº¦ç¯å¢ƒä»¥åŠä¸­å°å‹éƒ¨ç½²ï¼Œè€Œæ‚¨å¯ä»¥ç”¨æ›´å°‘çš„èµ„æºåšæ›´å¤šçš„äº‹æƒ…ã€‚</p><h2 id="2ã€-è™šæ‹ŸåŒ–æŠ€æœ¯å’Œå®¹å™¨åŒ–æŠ€æœ¯"><a href="#2ã€-è™šæ‹ŸåŒ–æŠ€æœ¯å’Œå®¹å™¨åŒ–æŠ€æœ¯" class="headerlink" title="2ã€ è™šæ‹ŸåŒ–æŠ€æœ¯å’Œå®¹å™¨åŒ–æŠ€æœ¯"></a>2ã€ è™šæ‹ŸåŒ–æŠ€æœ¯å’Œå®¹å™¨åŒ–æŠ€æœ¯</h2><p> è™šæ‹ŸåŒ–æŠ€æœ¯ç‰¹ç‚¹ï¼š1.èµ„æºå ç”¨å¤š 2.å†—ä½™æ­¥éª¤å¤š 3.å¯åŠ¨å¾ˆæ…¢</p><p> å®¹å™¨åŒ–æŠ€æœ¯ï¼šå®¹å™¨åŒ–æŠ€æœ¯ä¸æ˜¯æ¨¡æ‹Ÿçš„ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿ</p><p> è™šæ‹Ÿæœºéå¸¸ç¬¨é‡ï¼Œè€Œdockerååˆ†å°å·§ã€‚</p><blockquote><p>æ¯”è¾ƒDockerå’Œè™šæ‹Ÿæœºçš„ä¸åŒï¼š</p></blockquote><ul><li>ä¼ ç»Ÿè™šæ‹Ÿæœºï¼š</li></ul><p> è™šæ‹Ÿå‡ºç¡¬ä»¶ï¼Œè¿è¡Œä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œç„¶ååœ¨è¿™ä¸ªç³»ç»Ÿä¸Šå®‰è£…å’Œè¿è¡Œè½¯ä»¶ã€‚</p><ul><li>Dockerå®¹å™¨ ï¼š</li></ul><p> Dockerå®¹å™¨å†…çš„åº”ç”¨ç›´æ¥è¿è¡Œåœ¨å®¿ä¸»æœºçš„å†…å®¹ï¼Œå®¹å™¨æ˜¯æ²¡æœ‰è‡ªå·±çš„å†…æ ¸çš„ï¼Œä¹Ÿæ²¡æœ‰è™šæ‹Ÿç¡¬ä»¶ã€‚</p><p> æ¯ä¸ªå®¹å™¨éƒ½æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œæ¯ä¸ªå®¹å™¨éƒ½æœ‰å±äºè‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼Œäº’ä¸å½±å“ã€‚</p><blockquote><p>DevOps (Dev:å¼€å‘ï¼ŒOps:è¿ç»´)</p></blockquote><p>å®¹å™¨åŒ–å¸¦æ¥çš„å¥½å¤„ï¼š</p><ul><li>åº”ç”¨æ›´å¿«é€Ÿçš„äº¤ä»˜å’Œéƒ¨ç½²-<br>ä¼ ç»Ÿï¼šä¸€å †å¸®åŠ©æ–‡æ¡£ï¼Œå®‰è£…ç¨‹åº-<br>Docker :æ‰“åŒ…é•œåƒå‘å¸ƒæµ‹è¯•ï¼Œä¸€é”®è¿è¡Œ</li><li>æ›´ä¾¿æ·çš„å‡çº§å’Œæ‰©ç¼©å®¹-<br>ä½¿ç”¨äº†Dockerä¹‹åï¼Œæˆ‘ä»¬éƒ¨ç½²åº”ç”¨å°±å’Œæ­ç§¯æœ¨ä¸€æ ·ï¼-<br>é¡¹ç›®æ‰“åŒ…ä¸ºä¸€ä¸ªé•œåƒï¼Œæ‰©å±•æœåŠ¡å™¨A !æœåŠ¡å™¨B</li><li>æ›´ç®€å•çš„ç³»ç»Ÿè¿ç»´-<br>åœ¨å®¹å™¨åŒ–ä¹‹åï¼Œæˆ‘ä»¬çš„å¼€å‘ï¼Œæµ‹è¯•ç¯å¢ƒéƒ½æ˜¯é«˜åº¦ä¸€è‡´çš„.</li><li>æ›´é«˜æ•ˆçš„è®¡ç®—èµ„æºåˆ©ç”¨ï¼š-<br>Dockeræ˜¯å†…æ ¸çº§åˆ«çš„è™šæ‹ŸåŒ–ï¼Œå¯ä»¥å†ä¸€ä¸ªç‰©ç†æœºä¸Šå¯ä»¥è¿è¡Œå¾ˆå¤šçš„å®¹å™¨å®ä¾‹ï¼æœåŠ¡å™¨çš„æ€§èƒ½å¯ä»¥è¢«å‹æ¦¨åˆ°æè‡´ã€‚</li></ul><h2 id="3ã€-Dockerçš„åŸºæœ¬ç»„æˆ"><a href="#3ã€-Dockerçš„åŸºæœ¬ç»„æˆ" class="headerlink" title="3ã€ Dockerçš„åŸºæœ¬ç»„æˆ"></a>3ã€ Dockerçš„åŸºæœ¬ç»„æˆ</h2><blockquote><p>Dockerçš„åŸºæœ¬ç»„æˆå›¾å¦‚ä¸‹ï¼š</p></blockquote><p>Client:å®¢æˆ·ç«¯</p><p>DOCKER_HOST:dockerçš„ä¸»æœºï¼ˆæœåŠ¡å™¨ï¼‰</p><p>Registry: è¿œç¨‹ä»“åº“</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406171444126.png" alt="image-20230406171444126"></div><div class="image-meta"><span class="image-caption center">image-20230406171444126</span></div></div><blockquote><p>åŸºæœ¬ç»„æˆ</p></blockquote><ul><li><p>é•œåƒ(image ):-<br>dockeré•œåƒå°±å¥½æ¯”æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ¨¡æ¿æ¥åˆ›å»ºå®¹å™¨æœåŠ¡ï¼Œtomcaté•œåƒ&#x3D;&#x3D;&gt; run &#x3D;&#x3D;&gt; tomcatOIå®¹å™¨(æä¾›æœåŠ¡å™¨)ï¼Œé€šè¿‡è¿™ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨(æœ€ç»ˆæœåŠ¡è¿è¡Œæˆ–è€…é¡¹ç›®è¿è¡Œå°±æ˜¯åœ¨å®¹å™¨ä¸­çš„).</p><p> å¼€å‘äººå‘˜ æ‰“jaråŒ…å¸¦ä¸Šç¯å¢ƒï¼ˆè¿™é‡Œçš„ç¯å¢ƒç§°ä¸º<strong>é•œåƒ</strong>ï¼‰</p></li><li><p>å®¹å™¨(container ):-<br>Dockerç”¨å®¹å™¨æŠ€æœ¯ï¼Œç‹¬ç«‹è¿è¡ŒYæˆ–è€…ä¸€ä¸ªç»„åº”ç”¨ï¼Œé€šè¿‡é•œåƒæ¥åˆ›å»ºçš„ã€‚å¯åŠ¨ï¼Œåœæ­¢ï¼Œåˆ é™¤ï¼ŒåŸºæœ¬å‘½ä»¤ï¼ç›®å‰å°±å¯ä»¥æŠŠè¿™ä¸ªå®¹å™¨ç†è§£ä¸ºå°±æ˜¯ä¸€ä¸ªç®€æ˜“çš„linuxç³»ç»Ÿ</p><p><strong>é•œåƒå¯åŠ¨åå‡ºç°å®¹å™¨</strong></p><p>ï¼ˆé•œåƒç›¸å½“äºç±»ï¼Œå®¹å™¨ç›¸å½“äºå®ä¾‹ã€‚ä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨ï¼‰</p></li><li><p>ä»“åº“(repository ):-<br>ä»“åº“å°±æ˜¯å­˜æ”¾é•œåƒçš„åœ°æ–¹ï¼ä»“åº“åˆ†ä¸ºå…¬æœ‰ä»“åº“å’Œç§æœ‰ä»“åº“ï¼Docker Hub (é»˜è®¤æ˜¯å›½å¤–çš„)</p></li></ul><h2 id="4ã€-Dockerçš„å®‰è£…"><a href="#4ã€-Dockerçš„å®‰è£…" class="headerlink" title="4ã€ Dockerçš„å®‰è£…"></a>4ã€ Dockerçš„å®‰è£…</h2><p><a href="https://docs.docker.com/engine/install/centos/">åœ¨ CentOS | ä¸Šå®‰è£… Docker å¼•æ“Docker æ–‡æ¡£</a></p><blockquote><p>ç¯å¢ƒå‡†å¤‡</p></blockquote><p>Linux CentOS7</p><p>1ã€æŸ¥çœ‹ç³»ç»Ÿçš„å†…æ ¸ï¼š<code>uname -r</code></p><p>ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ä¸º3.10.0</p><pre><code>[root@192 ~]#  uname -r3.10.0-1160.el7.x86_64</code></pre><p>â€‹        </p><p>2ã€æŸ¥çœ‹ç³»ç»Ÿé…ç½®<code>cat /etc/os-release</code></p><pre><code>[root@192 ~]# cat /etc/os-releaseNAME=&quot;CentOS Linux&quot;VERSION=&quot;7 (Core)&quot;ID=&quot;centos&quot;ID_LIKE=&quot;rhel fedora&quot;VERSION_ID=&quot;7&quot;PRETTY_NAME=&quot;CentOS Linux 7 (Core)&quot;ANSI_COLOR=&quot;0;31&quot;CPE_NAME=&quot;cpe:/o:centos:centos:7&quot;HOME_URL=&quot;https://www.centos.org/&quot;BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;CENTOS_MANTISBT_PROJECT=&quot;CentOS-7&quot;CENTOS_MANTISBT_PROJECT_VERSION=&quot;7&quot;REDHAT_SUPPORT_PRODUCT=&quot;centos&quot;REDHAT_SUPPORT_PRODUCT_VERSION=&quot;7&quot;</code></pre><p>â€‹        </p><blockquote><p>å¸è½½æ—§ç‰ˆæœ¬</p></blockquote><p>æ—§ç‰ˆæœ¬çš„ Docker è¢«ç§°ä¸º æˆ– .å¦‚æœå·²å®‰è£…è¿™äº›é¡¹ï¼Œè¯·å°†å…¶ä»¥åŠå…³è”çš„ä¾èµ–é¡¹ä¸€èµ·å¸è½½ã€‚</p><pre><code>[root@192 ~]# sudo yum remove docker \                  docker-client \                  docker-client-latest \                  docker-common \                  docker-latest \                  docker-latest-logrotate \                  docker-logrotate \                  docker-engine</code></pre><p>â€‹        </p><h2 id="4-1-å¼€å§‹å®‰è£…"><a href="#4-1-å¼€å§‹å®‰è£…" class="headerlink" title="4.1 å¼€å§‹å®‰è£…"></a>4.1 å¼€å§‹å®‰è£…</h2><blockquote><p>Dockerçš„å®‰è£…æ­¥éª¤</p></blockquote><p>1ã€ä¸‹è½½éœ€è¦çš„å®‰è£…åŒ…</p><pre><code>yum install -y yum-utils</code></pre><p>â€‹        </p><p>2ã€è®¾ç½®é˜¿é‡Œäº‘çš„Dockeré•œåƒä»“åº“</p><pre><code>yum-config-manager \    --add-repo \    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo </code></pre><p>â€‹        </p><p>3ã€æ›´æ–°yumè½¯ä»¶åŒ…ç´¢å¼•</p><pre><code>yum makecache fast</code></pre><p>â€‹        </p><p>4ã€å®‰è£…dockerç›¸å…³çš„é…ç½®</p><p>docker-ce æ˜¯ç¤¾åŒºç‰ˆï¼Œdocker-ee ä¼ä¸šç‰ˆ</p><pre><code> yum install docker-ce docker-ce-cli containerd.io</code></pre><p>â€‹        </p><p>å‡ºç°äº†completedï¼ˆæˆ– å®Œæ¯•ï¼ï¼‰å³å®‰è£…æˆåŠŸã€‚</p><p>5ã€å¯åŠ¨Docker</p><pre><code># å¯åŠ¨Dockersystemctl start docker# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬å·ï¼Œæ˜¯å¦å¯åŠ¨æˆåŠŸdocker version# è®¾ç½®å¼€æœºè‡ªå¯åŠ¨systemctl enable docker</code></pre><p>â€‹        </p><h2 id="4-2-hello-worldé•œåƒæµ‹è¯•"><a href="#4-2-hello-worldé•œåƒæµ‹è¯•" class="headerlink" title="4.2 hello-worldé•œåƒæµ‹è¯•"></a>4.2 hello-worldé•œåƒæµ‹è¯•</h2><p>1ã€ä¸‹è½½hello-worldé•œåƒè¿›è¡Œæµ‹è¯•</p><pre><code>docker run hello-world</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# clear[root@192 ~]# docker run hello-worldUnable to find image &#39;hello-world:latest&#39; locally //æœ¬åœ°æ²¡åœ¨åˆ° hello-world é•œåƒlatest: Pulling from library/hello-world // pull è¿œç¨‹æ‹‰å– hello-world é•œåƒ2db29710123e: Pull complete  // pullå®ŒæˆDigest: sha256:507ecde44b8eb741278274653120c2bf793b174c06ff4eaa672b713b3263477bStatus: Downloaded newer image for hello-world:latestHello from Docker! //è¿è¡ŒæˆåŠŸThis message shows that your installation appears to be working correctly.To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.    (amd64) 3. The Docker daemon created a new container from that image which runs the    executable that produces the output you are currently reading. 4. The Docker daemon streamed that output to the Docker client, which sent it    to your terminal.To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bashShare images, automate workflows, and more with a free Docker ID: https://hub.docker.com/For more examples and ideas, visit: https://docs.docker.com/get-started/</code></pre><p>â€‹        </p><p>2ã€æŸ¥çœ‹ä¸‹è½½çš„hello-worldé•œåƒ</p><pre><code>[root@192 ~]# docker imagesREPOSITORY    TAG       IMAGE ID       CREATED        SIZEhello-world   latest    feb5d9fea6a5   4 months ago   13.3kB //hello-worldé•œåƒ</code></pre><p>â€‹        </p><blockquote><p>Dockerçš„å¸è½½</p></blockquote><p>1ã€å¸è½½ä¾èµ–</p><pre><code>yum remove docker-ce docker-ce-cli containerd.io</code></pre><p>â€‹        </p><p>2ã€åˆ é™¤èµ„æº <code>./var/lib/docker</code>æ˜¯dockerçš„é»˜è®¤å·¥ä½œè·¯å¾„</p><pre><code>rm -rf /var/lib/docker</code></pre><p>â€‹        </p><h2 id="5ã€é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ"><a href="#5ã€é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ" class="headerlink" title="5ã€é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ"></a>5ã€é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ</h2><p><strong>æœ¬åœ°æœºå™¨æ— æ³•ä½¿ç”¨</strong></p><p>1ã€è¿›å…¥é˜¿é‡Œäº‘å®˜ç½‘ï¼Œæœç´¢å®¹å™¨é•œåƒæœåŠ¡</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406171456451.png" alt="image-20230406171456451"></div><div class="image-meta"><span class="image-caption center">image-20230406171456451</span></div></div><p>2ã€åŒæ—¶æ‰§è¡Œå®˜æ–¹çš„å‘½ä»¤</p><pre><code>sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-&#39;EOF&#39;&#123;  &quot;registry-mirrors&quot;: [&quot;https://2y5oty1p.mirror.aliyuncs.com&quot;]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart docke</code></pre><p>â€‹        </p><p>3ã€æŸ¥çœ‹é…ç½®å‘½ä»¤<code>docker info</code>ï¼Œé…ç½®æˆåŠŸ-</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406171511070.png" alt="image-20230406171511070"></div><div class="image-meta"><span class="image-caption center">image-20230406171511070</span></div></div><h2 id="6ã€DockeråŸç†"><a href="#6ã€DockeråŸç†" class="headerlink" title="6ã€DockeråŸç†"></a>6ã€DockeråŸç†</h2><h2 id="6-1-Dockerå®¹å™¨è¿è¡Œæµç¨‹"><a href="#6-1-Dockerå®¹å™¨è¿è¡Œæµç¨‹" class="headerlink" title="6.1 Dockerå®¹å™¨è¿è¡Œæµç¨‹"></a>6.1 Dockerå®¹å™¨è¿è¡Œæµç¨‹</h2><p>å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œ<code>docker run</code>çš„è¿è¡Œæµç¨‹å¦‚ä¸‹å›¾ï¼š</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406171517262.png" alt="image-20230406171517262"></div><div class="image-meta"><span class="image-caption center">image-20230406171517262</span></div></div><h2 id="6-2-åº•å±‚åŸç†"><a href="#6-2-åº•å±‚åŸç†" class="headerlink" title="6.2 åº•å±‚åŸç†"></a>6.2 åº•å±‚åŸç†</h2><p>Dockeræ˜¯ä¸€ä¸ªClient-Serverï¼ˆå®¢æˆ·ç«¯-æœåŠ¡å™¨ï¼‰ç»“æ„çš„ç³»ç»Ÿï¼ŒDockerçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šï¼Œé€šè¿‡Sockerä»å®¢æˆ·ç«¯è®¿é—®ï¼Docker Server(æœåŠ¡å™¨)æ¥æ”¶åˆ°Docker-Client(å®¢æˆ·ç«¯)çš„æŒ‡ä»¤ï¼Œå°±ä¼šæ‰§è¡Œè¿™ä¸ªæŒ‡ä»¤ï¼</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406171533139.png" alt="image-20230406171533139"></div><div class="image-meta"><span class="image-caption center">image-20230406171533139</span></div></div><blockquote><p>Dockerä¸ºä»€ä¹ˆæ¯”VMWare(è™šæ‹Ÿæœº)å¿«ï¼Ÿ</p></blockquote><p>1ã€Dockeræ¯”è™šæ‹Ÿæœºæ›´å°‘çš„æŠ½è±¡å±‚</p><p>2ã€dockeråˆ©ç”¨å®¿ä¸»æœºçš„å†…æ ¸ï¼Œè€ŒVMéœ€è¦çš„æ˜¯Guest OSï¼ˆè™šæ‹Ÿæœºæ“ä½œç³»ç»Ÿï¼‰</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406171547989.png" alt="image-20230406171547989"></div><div class="image-meta"><span class="image-caption center">image-20230406171547989</span></div></div><p> Dockeræ–°å»ºä¸€ä¸ªå®¹å™¨çš„æ—¶å€™ï¼Œä¸éœ€è¦åƒè™šæ‹Ÿæœºä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªæ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œç›´æ¥åˆ©ç”¨å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿï¼Œè€Œè™šæ‹Ÿæœºæ˜¯éœ€è¦åŠ è½½Guest OSï¼ˆè™šæ‹Ÿæœºæ“ä½œç³»ç»Ÿï¼‰ã€‚Dockerå’ŒVMçš„å¯¹æ¯”å¦‚ä¸‹ï¼š</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406171551174.png" alt="image-20230406171551174"></div><div class="image-meta"><span class="image-caption center">image-20230406171551174</span></div></div><h2 id="7ã€Dockerå¸¸ç”¨å‘½ä»¤"><a href="#7ã€Dockerå¸¸ç”¨å‘½ä»¤" class="headerlink" title="7ã€Dockerå¸¸ç”¨å‘½ä»¤"></a>7ã€Dockerå¸¸ç”¨å‘½ä»¤</h2><p>å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£åœ°å€:<a href="https://docs.docker.com/engine/reference/commandline/docker/">https://docs.docker.com/engine/reference/commandline/docker/</a></p><h2 id="7-1-å…¨éƒ¨å‘½ä»¤"><a href="#7-1-å…¨éƒ¨å‘½ä»¤" class="headerlink" title="7.1 å…¨éƒ¨å‘½ä»¤"></a>7.1 å…¨éƒ¨å‘½ä»¤</h2><pre><code>[root@192 ~]# docker --help Usage:  docker [OPTIONS] COMMAND// docker [é€‰é¡¹] å‘½ä»¤A self-sufficient runtime for containers //ç¿»è¯‘ï¼šå®¹å™¨çš„è‡ªç»™è‡ªè¶³è¿è¡Œæ—¶</code></pre><p>â€‹<br>â€‹    Options:ã€é€‰é¡¹ã€‘<br>â€‹          â€“config string      &#x2F;&#x2F;å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶çš„ä½ç½® (default â€œ&#x2F;root&#x2F;.dockerâ€)<br>â€‹      -c, â€“context string    &#x2F;&#x2F;ç”¨äºè¿æ¥åˆ°å®ˆæŠ¤è¿›ç¨‹çš„ä¸Šä¸‹æ–‡çš„åç§°(è¦†ç›–DOCKER_HOST envå˜é‡å’Œé»˜è®¤ä¸Šä¸‹æ–‡è®¾ç½® â€œdocker context useâ€)<br>â€‹      -D, â€“debug              &#x2F;&#x2F;å¯ç”¨è°ƒè¯•æ¨¡å¼<br>â€‹      -H, â€“host list          &#x2F;&#x2F;å®ˆæŠ¤è¿›ç¨‹ socket(s) è¿æ¥<br>â€‹      -l, â€“log-level string   &#x2F;&#x2F;è®¾ç½®æ—¥å¿—çº§åˆ« (â€œdebugâ€|â€infoâ€|â€warnâ€|â€errorâ€|â€fatalâ€) (default â€œinfoâ€)<br>â€‹          â€“tls                &#x2F;&#x2F;ä½¿ç”¨ TLS; éšå« â€“tlsverify<br>â€‹          â€“tlscacert string   &#x2F;&#x2F;ä»…ç”±æ­¤CAç­¾åçš„ä¿¡ä»»è¯ä¹¦(default â€œ&#x2F;root&#x2F;.docker&#x2F;ca.pemâ€)<br>â€‹          â€“tlscert string     &#x2F;&#x2F;TLSè¯ä¹¦æ–‡ä»¶è·¯å¾„ (default â€œ&#x2F;root&#x2F;.docker&#x2F;cert.pemâ€)<br>â€‹          â€“tlskey string      &#x2F;&#x2F;TLSå¯†é’¥æ–‡ä»¶çš„è·¯å¾„  (default â€œ&#x2F;root&#x2F;.docker&#x2F;key.pemâ€)<br>â€‹          â€“tlsverify          &#x2F;&#x2F;ä½¿ç”¨TLSå¹¶éªŒè¯è¿œç«¯<br>â€‹      -v, â€“version            &#x2F;&#x2F;æ‰“å°ç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º<br>â€‹<br>â€‹    Management Commands:ã€ç®¡ç†å‘½ä»¤ã€‘<br>â€‹      app*        Docker App (Docker Inc., v0.9.1-beta3)<br>â€‹      builder     Manage(ç®¡ç†) builds<br>â€‹      buildx*     Docker Buildx (Docker Inc., v0.7.1-docker)<br>â€‹      config      Manage Docker configs<br>â€‹      container   Manage containers &#x2F;&#x2F;containers:å®¹å™¨<br>â€‹      context     Manage contexts<br>â€‹      image       Manage images<br>â€‹      manifest    Manage Docker image manifests and manifest lists &#x2F;&#x2F;ç®¡ç†Dockeré•œåƒæ¸…å•å’Œæ¸…å•åˆ—è¡¨<br>â€‹      network     Manage networks<br>â€‹      node        Manage Swarm nodes &#x2F;&#x2F;ç¾¤èŠ‚ç‚¹<br>â€‹      plugin      Manage plugins &#x2F;&#x2F;æ’ä»¶<br>â€‹      scan*       Docker Scan (Docker Inc., v0.12.0) &#x2F;&#x2F;Scan:æ‰«æ<br>â€‹      secret      Manage Docker secrets &#x2F;&#x2F;å¯†ç <br>â€‹      service     Manage services<br>â€‹      stack       Manage Docker stacks<br>â€‹      swarm       Manage Swarm &#x2F;&#x2F;ç¾¤<br>â€‹      system      Manage Docker<br>â€‹      trust       Manage trust on Docker images &#x2F;&#x2F; trust:ä¿¡ä»»<br>â€‹      volume      Manage volumes &#x2F;&#x2F;å·<br>â€‹<br>â€‹    Commands:ã€å‘½ä»¤ã€‘<br>â€‹      attach      &#x2F;&#x2F;å°†æœ¬åœ°æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯æµé™„åŠ åˆ°è¿è¡Œçš„å®¹å™¨ attach:é™„åŠ <br>â€‹      build       &#x2F;&#x2F;ä»Dockerfileæ„å»ºä¸€ä¸ªæ˜ åƒ<br>â€‹      commit      &#x2F;&#x2F;æ ¹æ®å®¹å™¨çš„æ›´æ”¹åˆ›å»ºä¸€ä¸ªæ–°é•œåƒ<br>â€‹      cp          &#x2F;&#x2F;åœ¨å®¹å™¨å’Œæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¹‹é—´å¤åˆ¶æ–‡ä»¶&#x2F;æ–‡ä»¶å¤¹<br>â€‹      create      &#x2F;&#x2F;åˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨<br>â€‹      diff        &#x2F;&#x2F;æ£€æŸ¥å®¹å™¨æ–‡ä»¶ç³»ç»Ÿä¸­æ–‡ä»¶æˆ–ç›®å½•çš„æ›´æ”¹<br>â€‹      events      &#x2F;&#x2F;ä»æœåŠ¡å™¨è·å–å®æ—¶äº‹ä»¶ events:äº‹ä»¶<br>â€‹      exec        &#x2F;&#x2F;åœ¨è¿è¡Œçš„å®¹å™¨ä¸­è¿è¡Œå‘½ä»¤ exec:æ‰§è¡Œ<br>â€‹      export      &#x2F;&#x2F;å°†å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿå¯¼å‡ºä¸ºtarå­˜æ¡£æ–‡ä»¶ export:å¯¼å‡º<br>â€‹      history     &#x2F;&#x2F;æ˜¾ç¤ºä¸€ä¸ªé•œåƒçš„å†å²<br>â€‹      images      &#x2F;&#x2F;é•œåƒçš„åˆ—è¡¨<br>â€‹      import      &#x2F;&#x2F;ä»tarballæ–‡ä»¶ä¸­å¯¼å…¥å†…å®¹ä»¥åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿæ˜ åƒ<br>â€‹      info        &#x2F;&#x2F;æ˜¾ç¤ºæ•´ä¸ªç³»ç»Ÿçš„ä¿¡æ¯<br>â€‹      inspect     &#x2F;&#x2F;è¿”å›Dockerå¯¹è±¡çš„åº•å±‚ä¿¡æ¯ inspect:æ£€æŸ¥<br>â€‹      kill        &#x2F;&#x2F;æ€æ­»ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨<br>â€‹      load        &#x2F;&#x2F;ä»tarå­˜æ¡£æ–‡ä»¶æˆ–STDINåŠ è½½é•œåƒ<br>â€‹      login       &#x2F;&#x2F;ç™»å½•åˆ°Dockeræ³¨å†Œè¡¨<br>â€‹      logout      &#x2F;&#x2F;ä»Dockeræ³¨å†Œè¡¨æ³¨é”€<br>â€‹      logs        &#x2F;&#x2F;è·å–å®¹å™¨çš„æ—¥å¿—<br>â€‹      pause       &#x2F;&#x2F;æš‚åœä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä¸­çš„æ‰€æœ‰è¿›ç¨‹ pause:æš‚åœ<br>â€‹      port        &#x2F;&#x2F;åˆ—å‡ºå®¹å™¨çš„ç«¯å£æ˜ å°„æˆ–ç‰¹å®šæ˜ å°„<br>â€‹      ps          &#x2F;&#x2F;å®¹å™¨çš„åˆ—è¡¨<br>â€‹      pull        &#x2F;&#x2F;ä»ä»“åº“ï¼ˆregistryï¼‰ä¸­æ‹‰å–é•œåƒæˆ–å­˜å‚¨åº“<br>â€‹      push        &#x2F;&#x2F;å°†é•œåƒæˆ–å­˜å‚¨åº“æ¨é€åˆ°ä»“åº“ï¼ˆregistryï¼‰<br>â€‹      rename      &#x2F;&#x2F;é‡å‘½åä¸€ä¸ªå®¹å™¨<br>â€‹      restart     &#x2F;&#x2F;é‡æ–°å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨<br>â€‹      rm          &#x2F;&#x2F;ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨<br>â€‹      rmi          &#x2F;&#x2F;ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒ<br>â€‹      run         &#x2F;&#x2F;åœ¨æ–°å®¹å™¨ä¸­è¿è¡Œå‘½ä»¤<br>â€‹      save        &#x2F;&#x2F;å°†ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒä¿å­˜åˆ°tarå­˜æ¡£æ–‡ä»¶(é»˜è®¤æƒ…å†µä¸‹æµåˆ°STDOUT)<br>â€‹      search      &#x2F;&#x2F;åœ¨Docker Hubæœç´¢é•œåƒ<br>â€‹      start       &#x2F;&#x2F;å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªåœæ­¢çš„å®¹å™¨<br>â€‹      stats       &#x2F;&#x2F;æ˜¾ç¤ºå®¹å™¨èµ„æºä½¿ç”¨ç»Ÿè®¡çš„å®æ—¶æµ<br>â€‹      stop        &#x2F;&#x2F;åœæ­¢ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨<br>â€‹      tag         &#x2F;&#x2F;åˆ›å»ºå¼•ç”¨SOURCE_IMAGEçš„æ ‡è®°TARGET_IMAGE<br>â€‹      top         &#x2F;&#x2F;æ˜¾ç¤ºå®¹å™¨çš„è¿è¡Œè¿›ç¨‹<br>â€‹      unpause     &#x2F;&#x2F;å–æ¶ˆæš‚åœä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä¸­çš„æ‰€æœ‰è¿›ç¨‹ unpause:ä¸æš‚åœ<br>â€‹      update     &#x2F;&#x2F;æ›´æ–°ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨çš„é…ç½®<br>â€‹      version    &#x2F;&#x2F;æŸ¥çœ‹Dockerç‰ˆæœ¬ä¿¡æ¯<br>â€‹      wait        &#x2F;&#x2F;é˜»å¡ç›´åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨åœæ­¢ï¼Œç„¶åæ‰“å°å®ƒä»¬çš„é€€å‡ºä»£ç <br>â€‹<br>â€‹    Run â€˜docker COMMAND â€“helpâ€™ for more information on a command.</p><p>â€‹        </p><h2 id="7-2-åŸºç¡€å‘½ä»¤"><a href="#7-2-åŸºç¡€å‘½ä»¤" class="headerlink" title="7.2 åŸºç¡€å‘½ä»¤"></a>7.2 åŸºç¡€å‘½ä»¤</h2><pre><code>docker version          #æŸ¥çœ‹dockerçš„ç‰ˆæœ¬ä¿¡æ¯docker info             #æŸ¥çœ‹dockerçš„ç³»ç»Ÿä¿¡æ¯,åŒ…æ‹¬é•œåƒå’Œå®¹å™¨çš„æ•°é‡docker å‘½ä»¤ --help       #å¸®åŠ©å‘½ä»¤(å¯æŸ¥çœ‹å¯é€‰çš„å‚æ•°)docker COMMAND --helpdocker --help           #åˆ—å‡ºæ‰€æœ‰å‘½ä»¤</code></pre><p>â€‹        </p><h2 id="7-3-é•œåƒå‘½ä»¤"><a href="#7-3-é•œåƒå‘½ä»¤" class="headerlink" title="7.3 é•œåƒå‘½ä»¤"></a>7.3 é•œåƒå‘½ä»¤</h2><blockquote><p>æ‹‰å–(ä¸‹è½½)ä¸€ä¸ªé•œåƒ</p></blockquote><pre><code>//docker pull é•œåƒ[:tag]  tag:ç‰ˆæœ¬ï¼ˆç‰ˆæœ¬é»˜è®¤æœ€æ–°ï¼‰docker pull mysqldocker pull mysql:5.7 //æŒ‡å®šç‰ˆæœ¬</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker pull mysqlUsing default tag: latestlatest: Pulling from library/mysql# == åˆ†å±‚ä¸‹è½½ï¼Œdocker iamgeçš„æ ¸å¿ƒè”åˆæ–‡ä»¶ç³»ç»Ÿ ==6552179c3509: Pull complete d69aa66e4482: Pull complete  3b19465b002b: Pull complete #...Digest: sha256:92d27b8222bbcf53bc42c70ca7cd1010d6c0527efc61f14980ce77c50932bef4 # ç­¾åStatus: Downloaded newer image for mysql:latestdocker.io/library/mysql:latest #çœŸå®åœ°å€# ä¸‹è½½æˆåŠŸ[root@192 ~]# docker imagesREPOSITORY    TAG       IMAGE ID       CREATED        SIZEmysql         latest    d1dc36cf8d9e   3 days ago     519MBhello-world   latest    feb5d9fea6a5   4 months ago   13.3kB#ç­‰ä»·äºdocker pull mysql ç­‰ä»·äº docker pull docker.io/library/mysqlzlatest</code></pre><p>â€‹        </p><p><strong>åˆ†å±‚ä¸‹è½½</strong>,æ¯”å¦‚mysql5.7 ä¸ mysql 8.0 æœ‰å±‚ä¸€è‡´å°±ä¸ç”¨é‡æ–°ä¸‹è½½</p><blockquote><p><code>docker images</code> æŸ¥çœ‹æœ¬åœ°ä¸»æœºçš„æ‰€æœ‰é•œåƒ</p></blockquote><pre><code>[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker images[é•œåƒçš„ä»“åº“æº  é•œåƒçš„æ ‡ç­¾  é•œåƒçš„id     é•œåƒçš„åˆ›å»ºæ—¶é—´    é•œåƒçš„å¤§å°]REPOSITORY    TAG       IMAGE ID       CREATED         SIZEhello-world   latest    bf756fb1ae65   11 months ago   13.3kB</code></pre><p>â€‹<br>â€‹    # å¯é€‰å‚æ•°<br>â€‹<br>â€‹    -a&#x2F;â€“all åˆ—å‡ºæ‰€æœ‰é•œåƒ<br>â€‹    -q&#x2F;â€“quiet åªæ˜¾ç¤ºé•œåƒçš„id</p><p>â€‹        </p><blockquote><p><code>docker search</code> æœç´¢é•œåƒ</p></blockquote><pre><code>[root@192 ~]# docker search mysql  NAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATEDmysql                             MySQL is a widely used, open-source relationâ€¦   12043     [OK]       mariadb                           MariaDB Server is a high performing open souâ€¦   4613      [OK]       mysql/mysql-server                Optimized MySQL Server Docker images. Createâ€¦   901       [OK]phpmyadmin                        phpMyAdmin - A web interface for MySQL and Mâ€¦   439       [OK]       //...// STARS:æ”¶è—æ•°</code></pre><p>â€‹        </p><p>æŸ¥çœ‹å…¶å¯é€‰å‚æ•°</p><pre><code>[root@192 ~]# docker search --helpUsage:  docker search [OPTIONS] TERMSearch the Docker Hub for imagesOptions:  -f, --filter filter   //æ ¹æ®æ‰€æä¾›çš„æ¡ä»¶è¿‡æ»¤è¾“å‡º      --format string   //ä½¿ç”¨Goæ¨¡æ¿çš„æ¼‚äº®æ‰“å°æœç´¢      --limit int       //æœç´¢ç»“æœçš„æœ€å¤§æ•°ç›®(é»˜è®¤25ä¸ª)      --no-trunc        //ä¸æˆªæ–­è¾“å‡º</code></pre><p>â€‹        </p><blockquote><p>æœç´¢æ”¶è—æ•°å¤§äº3000çš„é•œåƒ</p></blockquote><pre><code>// STARS:æ”¶è—æ•°[root@192 ~]# docker search mysql --filter=STARS=3000NAME      DESCRIPTION                                     STARS     OFFICIAL   AUTOMATEDmysql     MySQL is a widely used, open-source relationâ€¦   12043     [OK]       mariadb   MariaDB Server is a high performing open souâ€¦   4613      [OK]  </code></pre><p>â€‹        </p><blockquote><p>åœ¨ä»“åº“æœç´¢</p></blockquote><p><a href="https://hub.docker.com/search?q=mysql&type=image">https://hub.docker.com/search?q=mysql&amp;type=image</a></p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406171559287.png" alt="image-20230406171559287"></div><div class="image-meta"><span class="image-caption center">image-20230406171559287</span></div></div><blockquote><p>åˆ é™¤é•œåƒ</p></blockquote><pre><code>docker rmi -f ã€é•œåƒidã€‘</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# clear[root@192 ~]# docker rmi -f feb5d9fea6a5Untagged: hello-world:latestUntagged: hello-world@sha256:507ecde44b8eb741278274653120c2bf793b174c06ff4eaa672b713b3263477bDeleted: sha256:feb5d9fea6a5e9606aa995e879d862b825965ba48de054caab5ef356dc6b3412</code></pre><p>â€‹        </p><ul><li><p>åˆ é™¤å¤šä¸ªé•œåƒ</p><p>docker rmi -f ã€é•œåƒidã€‘ ã€é•œåƒidã€‘ ã€é•œåƒidã€‘ â€¦</p><p>â€‹    </p></li><li><p>åˆ é™¤æ‰€æœ‰é•œåƒ</p><p>docker rmi -f $(docker images)</p><p>â€‹</p></li></ul><h2 id="7-4-å®¹å™¨å‘½ä»¤"><a href="#7-4-å®¹å™¨å‘½ä»¤" class="headerlink" title="7.4 å®¹å™¨å‘½ä»¤"></a>7.4 å®¹å™¨å‘½ä»¤</h2><p><strong>é•œåƒå¯åŠ¨åå‡ºç°å®¹å™¨</strong></p><p>ï¼ˆé•œåƒç›¸å½“äºç±»ï¼Œå®¹å™¨ç›¸å½“äºå®ä¾‹ã€‚ä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨ï¼‰</p><p>ï¼ˆé•œåƒç›¸å½“äºä½ å®‰è£…ç³»ç»Ÿæ—¶ä¸‹è½½çš„é•œåƒæ–‡ä»¶ï¼Œè€Œå®¹å™¨å‘¢å°±ç›¸å½“äºä½ å®‰è£…å¥½çš„ç³»ç»Ÿï¼‰</p><blockquote><p>1ã€å…ˆæ‹‰å–ä¸€ä¸ªcentosé•œåƒ</p></blockquote><pre><code>docker pull centos</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker pull centosUsing default tag: latestlatest: Pulling from library/centosa1d0c7532777: Pull complete Digest: sha256:a27fd8080b517143cbbbab9dfb7c8571c40d67d534bbdee55bd6c473f432b177Status: Downloaded newer image for centos:latestdocker.io/library/centos:latest</code></pre><p>â€‹        </p><blockquote><p>è¿è¡Œå®¹å™¨</p></blockquote><p>runæ˜¯æ–°å»ºä¸€ä¸ªå®¹å™¨(ç›´æ¥ä½¿ç”¨å®¹å™¨ä¼šè‡ªåŠ¨é€€å‡º)ï¼Œstartæ˜¯å¯åŠ¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å®¹å™¨</p><pre><code>//imageï¼šé•œåƒåå­—æˆ–id docker run [å¯é€‰å‚æ•°] image//å‚æ•°è¯´æ˜--name=&quot;åå­—&quot;           //æŒ‡å®šå®¹å™¨åå­—-d                     //åå°æ–¹å¼è¿è¡Œ è‹¥æ²¡æœ‰æä¾›æœåŠ¡åˆ™è‡ªåŠ¨é€€å‡ºï¼ˆåœæ­¢ï¼‰-it                    //ä½¿ç”¨äº¤äº’æ–¹å¼è¿è¡Œ,è¿›å…¥å®¹å™¨æŸ¥çœ‹å†…å®¹-p                     //æŒ‡å®šå®¹å™¨çš„ç«¯å£(å°å†™çš„P)     -p ip:ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£  //é…ç½®ä¸»æœºç«¯å£æ˜ å°„åˆ°å®¹å™¨ç«¯å£(å°å†™çš„P)     -p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£      -p å®¹å™¨ç«¯å£  -P                     //éšæœºæŒ‡å®šç«¯å£(å¤§å†™çš„P)</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker start --help// CONTAINER:å®¹å™¨idUsage:  docker start [OPTIONS] CONTAINER:å®¹å™¨id [CONTAINER...]//å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªåœæ­¢çš„å®¹å™¨Options:  -a, --attach               //é™„åŠ STDOUT/STDERRå’Œå‰å‘ä¿¡å·      --detach-keys string   //è¦†ç›–ç”¨äºåˆ†ç¦»å®¹å™¨çš„é”®åºåˆ—  -i, --interactive         //å°†å®¹å™¨çš„STDIN</code></pre><p>â€‹        </p><blockquote><p>è¿›å…¥å®¹å™¨</p></blockquote><pre><code>docker run -it centos /bin/bash</code></pre><p>â€‹        </p><ul><li><p>å®¹å™¨å†…å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹å’Œéš”ç¦»çš„centosç¯å¢ƒ</p><p>[root@192 ~]# docker run -it centos &#x2F;bin&#x2F;bash<br>[root@b8f211692996 &#x2F;]# ls<br>bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</p><p>â€‹</p></li></ul><blockquote><p>é€€å‡ºå®¹å™¨<code>exit</code></p></blockquote><pre><code># exit åœæ­¢å¹¶é€€å‡ºå®¹å™¨ï¼ˆåå°æ–¹å¼è¿è¡Œåˆ™ä»…é€€å‡ºï¼‰# Ctrl+P+Q  ä¸åœæ­¢å®¹å™¨é€€å‡º[root@b8f211692996 /]# exitexit</code></pre><p>â€‹        </p><blockquote><p>åˆ—å‡ºå®¹å™¨</p></blockquote><pre><code>docker ps    // åˆ—å‡ºå½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨docker ps -a   // åˆ—å‡ºæ‰€æœ‰å®¹å™¨çš„è¿è¡Œè®°å½•docker ps -n=? // æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„nä¸ªå®¹å™¨docker ps -q   // åªæ˜¾ç¤ºå®¹å™¨çš„ç¼–å·</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker ps      #åˆ—å‡ºå½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMESb8f211692996   centos    &quot;/bin/bash&quot;   14 minutes ago   Up 14 minutes             zealous_lichterman[root@192 ~]# docker ps -a   # åˆ—å‡ºæ‰€æœ‰å®¹å™¨çš„è¿è¡Œè®°å½•CONTAINER ID   IMAGE          COMMAND       CREATED          STATUS                          PORTS     NAMES0f009b5ce7d7   centos         &quot;/bin/bash&quot;   3 minutes ago    Exited (0) About a minute ago             cool_lovelaceb8f211692996   centos         &quot;/bin/bash&quot;   14 minutes ago   Up 14 minutes                             zealous_lichterman9d6d432cfc32   feb5d9fea6a5   &quot;/hello&quot;      19 hours ago     Exited (0) 19 hours ago                   wizardly_booth53ef5a5247a6   feb5d9fea6a5   &quot;/hello&quot;      19 hours ago     Exited (0) 19 hours ago                   eloquent_chatterjee</code></pre><p>â€‹        </p><blockquote><p>åœæ­¢å®¹å™¨</p></blockquote><pre><code>[root@192 ~]# docker stop --help// CONTAINERï¼šå®¹å™¨(ä½†è¦ç”¨å®¹å™¨idæ‰è¡Œ)Usage:  docker stop [OPTIONS] CONTAINER [CONTAINER...]//ç¿»è¯‘ï¼šåœæ­¢ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨Stop one or more running containersOptions:  -t, --time int   //åœ¨æ€æ­»å®ƒä¹‹å‰ç­‰å¾…å‡ ç§’é’Ÿ (default 10)</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker psCONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMESeb679ca2e254   centos    &quot;/bin/bash&quot;   4 minutes ago    Up 4 minutes              blissful_robinsonb8f211692996   centos    &quot;/bin/bash&quot;   26 minutes ago   Up 26 minutes             zealous_lichterman[root@192 ~]# docker stop centosError response from daemon: No such container: centos[root@192 ~]# docker stop eb679ca2e254eb679ca2e254[root@192 ~]# docker stop b8f211692996b8f211692996[root@192 ~]# docker psCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</code></pre><p>â€‹        </p><blockquote><p>åˆ é™¤å®¹å™¨</p></blockquote><pre><code>docker rm å®¹å™¨id                 # åˆ é™¤æŒ‡å®šçš„å®¹å™¨,ä¸èƒ½åˆ é™¤æ­£åœ¨è¿è¡Œçš„å®¹å™¨docker rm -f å®¹å™¨id     # å¼ºåˆ¶åˆ é™¤ï¼ŒåŒ…æ‹¬æ­£åœ¨è¿è¡Œçš„å®¹å™¨docker rm -f $(docker ps -aq)   # åˆ é™¤æ‰€æœ‰çš„å®¹å™¨docker ps -a -q|xargs docker rm # åˆ é™¤æ‰€æœ‰çš„å®¹å™¨</code></pre><p>â€‹        </p><blockquote><p>å¯åŠ¨å’Œåœæ­¢å®¹å™¨</p></blockquote><pre><code>docker start å®¹å™¨id          #å¯åŠ¨å®¹å™¨docker restart å®¹å™¨id        #é‡å¯å®¹å™¨docker stop å®¹å™¨id           #åœæ­¢å½“å‰è¿è¡Œçš„å®¹å™¨docker kill å®¹å™¨id           #å¼ºåˆ¶åœæ­¢å½“å‰å®¹å™¨</code></pre><p>â€‹        </p><h2 id="7-5-å…¶ä»–å¸¸ç”¨å‘½ä»¤"><a href="#7-5-å…¶ä»–å¸¸ç”¨å‘½ä»¤" class="headerlink" title="7.5 å…¶ä»–å¸¸ç”¨å‘½ä»¤"></a>7.5 å…¶ä»–å¸¸ç”¨å‘½ä»¤</h2><blockquote><p>æ—¥å¿—çš„æŸ¥çœ‹</p></blockquote><pre><code>[root@192 ~]# docker logs --helpUsage:  docker logs [OPTIONS] CONTAINER//è·å–å®¹å™¨çš„æ—¥å¿—Options:      --details        //æ˜¾ç¤ºæä¾›ç»™æ—¥å¿—çš„é¢å¤–ç»†èŠ‚  -f, --follow         //è·Ÿè¸ªæ—¥å¿—è¾“å‡º      --since string   //æ˜¾ç¤ºè‡ªå®šä¹‰æ—¶é—´æˆ³ä»¥æ¥çš„æ—¥å¿— (e.g. 2013-01-02T13:23:37Z) or relative (e.g. 42m for 42 minutes)  -n, --tail string    ã€ã€ä»æ—¥å¿—çš„æœ«å°¾æ˜¾ç¤ºçš„è¡Œæ•°(default &quot;all&quot;)  -t, --timestamps     //æ˜¾ç¤ºæ—¶é—´æˆ³      --until string  //åœ¨æ—¶é—´æˆ³ä¹‹å‰æ˜¾ç¤ºæ—¥å¿— (e.g. 2013-01-02T13:23:37Z) or relative (e.g. 42m for 42 minutes)//å¸¸ç”¨ï¼šdocker logs -tf ã€å®¹å™¨idã€‘docker logs --tail number ã€å®¹å™¨idã€‘ //numä¸ºè¦æ˜¾ç¤ºçš„æ—¥å¿—æ¡æ•°</code></pre><p>â€‹        </p><pre><code>#dockerå®¹å™¨åå°è¿è¡Œï¼Œå¿…é¡»è¦æœ‰ä¸€ä¸ªå‰å°çš„è¿›ç¨‹ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨åœæ­¢#ç¼–å†™shellè„šæœ¬å¾ªç¯æ‰§è¡Œï¼Œä½¿å¾—centoså®¹å™¨ä¿æŒè¿è¡ŒçŠ¶æ€[root@192 ~]# docker run -d centos /bin/sh -c &quot;while true;do echo hi;sleep 5;done&quot;2b8ed9e4dcb655547b3c2aa28cd849179190ec03ecca2aabf9c7a44155b13097[root@192 ~]# docker psCONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS     NAMES2b8ed9e4dcb6   centos    &quot;/bin/sh -c &#39;while tâ€¦&quot;   3 seconds ago   Up 2 seconds             beautiful_elion[root@192 ~]# docker logs -tf --tail 10 2b8ed9e4dcb62022-01-31T02:32:36.215664841Z hi2022-01-31T02:32:41.224798220Z hi2022-01-31T02:32:46.227706348Z hi2022-01-31T02:32:51.243402617Z hi2022-01-31T02:32:56.257314943Z hi2022-01-31T02:33:01.284139739Z hi2022-01-31T02:33:06.294600809Z hi# Ctrl + Shift + c é€€å‡º</code></pre><p>â€‹        </p><blockquote><p>æŸ¥çœ‹å®¹å™¨ä¸­è¿›ç¨‹ä¿¡æ¯</p></blockquote><pre><code>docker top å®¹å™¨id</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker top 2b8ed9e4dcb6UID     PID       PPID     C    STIME      TTY      TIME                CMDroot    11156    11135     0    11:31      ?     00:00:00     /bin/sh -c while true;do echo hi;sleep 5;doneroot     11886   11156     0     11:43     ?     00:00:00   /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep 5</code></pre><p>â€‹        </p><blockquote><p>æŸ¥çœ‹å®¹å™¨çš„å…ƒæ•°æ®</p></blockquote><pre><code>docker inspect å®¹å™¨id</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker inspect 2b8ed9e4dcb6 # æ˜¾ç¤ºçš„idæ˜¯ çœŸå®id çš„ ç¼©å†™[    &#123;        &quot;Id&quot;: &quot;2b8ed9e4dcb655547b3c2aa28cd849179190ec03ecca2aabf9c7a44155b13097&quot;,# çœŸå®id        &quot;Created&quot;: &quot;2022-01-31T02:32:35.769096414Z&quot;,        &quot;Path&quot;: &quot;/bin/sh&quot;,        &quot;Args&quot;: [            &quot;-c&quot;,            &quot;while true;do echo hi;sleep 5;done&quot;        ],        &quot;State&quot;: &#123;            &quot;Status&quot;: &quot;running&quot;,            &quot;Running&quot;: true,            &quot;Paused&quot;: false,</code></pre><p>â€‹<br>â€‹        </p><blockquote><p>è¿›å…¥å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</p></blockquote><p>å› ä¸ºé€šå¸¸æˆ‘ä»¬çš„å®¹å™¨éƒ½æ˜¯ä½¿ç”¨åå°æ–¹å¼æ¥è¿è¡Œçš„ï¼Œæœ‰æ—¶éœ€è¦è¿›å…¥å®¹å™¨ä¿®æ”¹é…ç½®</p><pre><code>// æ–¹å¼ä¸€ docker exec -it ã€å®¹å™¨idã€‘ /bin/bash// æ–¹å¼äºŒdocker attach ã€å®¹å™¨idã€‘</code></pre><p>â€‹        </p><p>æ–¹å¼ä¸€ï¼šè¿›å…¥å®¹å™¨åå¼€å¯ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œå¯ä»¥åœ¨é‡Œé¢æ“ä½œ ï¼ˆå¸¸ç”¨ï¼‰</p><pre><code>[root@192 ~]# docker exec -it 2b8ed9e4dcb6 /bin/bash[root@2b8ed9e4dcb6 /]# lsbin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var# æŸ¥çœ‹è¿›ç¨‹[root@48c706c3a876 /]#  ps -ef UID         PID   PPID  C STIME TTY          TIME CMDroot          1      0  0 03:38 ?        00:00:00 /bin/sh -c while true;do echo hi;sleep 5;doneroot         12      0  0 03:38 pts/0    00:00:00 /bin/bashroot         28      1  0 03:38 ?        00:00:00 /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep 5root         29     12  0 03:38 pts/0    00:00:00 ps -ef</code></pre><p>â€‹        </p><p>æ–¹å¼äºŒï¼šè¿›å…¥å®¹å™¨æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹</p><pre><code>[root@192 ~]# docker attach 2b8ed9e4dcb6 hihihi//...</code></pre><p>â€‹        </p><blockquote><p>æ‹·è´æ“ä½œ</p></blockquote><p>ï¼ˆè¿˜å¯ä»¥ä½¿ç”¨ -v å·æŠ€æœ¯ï¼‰</p><p>æ‹·è´æ“ä½œçš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>//å°†å®¹å™¨çš„æ–‡ä»¶æ‹·è´åˆ°ä¸»æœºä¸­docker cp å®¹å™¨id:å®¹å™¨å†…è·¯å¾„  ç›®çš„ä¸»æœºè·¯å¾„//docker cp 7b605b457f23:/home/Hello.txt hello.txt//å°†å®¿ä¸»æœºçš„æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨ä¸­docker cp ç›®çš„ä¸»æœºè·¯å¾„ å®¹å™¨id:å®¹å™¨å†…è·¯å¾„</code></pre><p>â€‹        </p><ul><li><p>å°†å®¹å™¨çš„æ–‡ä»¶æ‹·è´åˆ°ä¸»æœºä¸­</p><p>[root@192 ~]# docker run -it centos &#x2F;bin&#x2F;bash<br>[root@7b605b457f23 &#x2F;]# cd home&#x2F;<br>[root@7b605b457f23 home]# touch Hello.txt<br>[root@7b605b457f23 home]# ls<br>Hello.txt</p><p>â€‹</p></li></ul><p>1ã€åœ¨å®¹å™¨ä¸­æ–°å»ºæ–‡ä»¶</p><pre><code>[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker exec -it c703b5b1911f /bin/bash[root@c703b5b1911f /]# cd home[root@c703b5b1911f home]# ls#touch æ–°å»ºæ–‡ä»¶[root@c703b5b1911f home]# touch test.java[root@c703b5b1911f home]# lstest.java[root@c703b5b1911f home]# exitexit[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker psCONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMESc703b5b1911f   centos    &quot;/bin/sh -c &#39;while tâ€¦&quot;   35 minutes ago   Up 35 minutes             pedantic_banach[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker cp c703b5b1911f:/home/test.java /home[root@iZwz99sm8v95sckz8bd2c4Z ~]# ls /homehai  pan  test.java[root@7b605b457f23 home]# exitexit</code></pre><p>â€‹        </p><p>2.copyæ–‡ä»¶</p><pre><code>[root@192 ~]# cd æ¡Œé¢[root@192 æ¡Œé¢]# lsKuang[root@192 æ¡Œé¢]# docker psCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES[root@192 æ¡Œé¢]# docker ps -aCONTAINER ID   IMAGE    COMMAND        CREATED         STATUS                     PORTS     NAMES7b605b457f23   centos   &quot;/bin/bash&quot;    3 minutes ago   Exited (0) 2 minutes ago     tender_burnell# ...[root@192 æ¡Œé¢]# docker cp 7b605b457f23:/home/Hello.txt hello.txt[root@192 æ¡Œé¢]# lshello.txt  Kuang # æˆåŠŸ</code></pre><p>â€‹        </p><blockquote><p>å¸¸ç”¨å‘½ä»¤å°èŠ‚</p></blockquote><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406171613580.png" alt="image-20230406171613580"></div><div class="image-meta"><span class="image-caption center">image-20230406171613580</span></div></div><h2 id="8ã€docker-ç»ƒä¹ "><a href="#8ã€docker-ç»ƒä¹ " class="headerlink" title="8ã€docker ç»ƒä¹ "></a>8ã€docker ç»ƒä¹ </h2><h2 id="8-1-éƒ¨ç½²Nginx"><a href="#8-1-éƒ¨ç½²Nginx" class="headerlink" title="8.1 éƒ¨ç½²Nginx"></a>8.1 éƒ¨ç½²Nginx</h2><p>ï¼ˆNginxï¼šæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPå’Œåå‘ä»£ç†webæœåŠ¡å™¨ï¼‰</p><p>1ã€æœç´¢nginx</p><p><a href="https://hub.docker.com//_/nginx">https://hub.docker.com/\_/nginx</a></p><pre><code>[root@192 ~]# docker search nginxNAME                DESCRIPTION                            STARS     OFFICIAL   AUTOMATEDnginx            Official build of Nginx.                  16232     [OK] //...</code></pre><p>â€‹        </p><p>2ã€æ‹‰å–nginx</p><pre><code>[root@192 ~]# docker pull nginxUsing default tag: latestlatest: Pulling from library/nginx5eb5b503b376: Pull complete 1ae07ab881bd: Pull complete 78091884b7be: Pull complete 091c283c6a66: Pull complete 55de5851019b: Pull complete b559bad762be: Pull complete Digest: sha256:2834dc507516af02784808c5f48b7cbe38b8ed5d0f4837f16e78d00deb7e7767Status: Downloaded newer image for nginx:latestdocker.io/library/nginx:latest[root@192 ~]# docker images # ä¸‹è½½æˆåŠŸREPOSITORY   TAG       IMAGE ID       CREATED        SIZEnginx        latest    c316d5a335a5   4 days ago     142MB</code></pre><p>â€‹        </p><p>3ã€å¯åŠ¨nginxé•œåƒ</p><pre><code>[root@192 ~]# docker run -d --name nginx01 -p 8801:80 nginxb93af0c28d2baca7b03dc34eaf6d0b8778abdb989e091d9461351a48b12fb706[root@192 ~]# docker ps #è¿è¡ŒæˆåŠŸCONTAINER ID   IMAGE       COMMAND                  CREATED          STATUS                PORTS                           NAMESb93af0c28d2b   nginx     &quot;/docker-entrypoint.â€¦&quot;   13 seconds ago   Up 11 seconds   0.0.0.0:8801-&gt;80/tcp, :::8801-&gt;80/tcp   nginx01</code></pre><p>â€‹<br>â€‹        </p><p> <code>-p 8801:80</code>é€šè¿‡ç«¯å£æ˜ å°„å°† ä¸»æœºçš„8801ç«¯å£ ä¸ å®¹å™¨çš„80ç«¯å£ è¿é€šï¼Œä»è€Œæš´éœ² å®¹å™¨çš„80ç«¯å£</p><p>4ã€æµ‹è¯•è¿æ¥nginx</p><pre><code>[root@192 ~]# curl localhost:8801&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to nginx!&lt;/title&gt;&lt;style&gt;html &#123; color-scheme: light dark; &#125;body &#123; width: 35em; margin: 0 auto;font-family: Tahoma, Verdana, Arial, sans-serif; &#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Welcome to nginx!&lt;/h1&gt; # è¿æ¥æˆåŠŸ&lt;p&gt;If you see this page, the nginx web server is successfully installed andworking. Further configuration is required.&lt;/p&gt;&lt;p&gt;For online documentation and support please refer to&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;Commercial support is available at&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><p>â€‹        </p><ul><li>windowsï¼ˆå¤–ç½‘ï¼‰ä¸Šè®¿é—®æˆåŠŸ</li></ul><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406171622920.png" alt="image-20230406171622920"></div><div class="image-meta"><span class="image-caption center">image-20230406171622920</span></div></div><p>5ã€è¿›å…¥nginxå®¹å™¨</p><pre><code>[root@192 ~]# docker exec -it nginx01 /bin/bashroot@b93af0c28d2b:/# whereis nginxnginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx</code></pre><p>â€‹        </p><h2 id="8-2-éƒ¨ç½²Tomcat"><a href="#8-2-éƒ¨ç½²Tomcat" class="headerlink" title="8.2 éƒ¨ç½²Tomcat"></a>8.2 éƒ¨ç½²Tomcat</h2><p>1ã€æœç´¢tomcat</p><pre><code>[root@192 ~]# docker search tomcatNAME                          DESCRIPTION                                     STARS     OFFICIAL   AUTOMATEDtomcat                        Apache Tomcat is an open source implementatiâ€¦   3248      [OK]       </code></pre><p>â€‹        </p><p>2ã€æ‹‰å–tomcat</p><pre><code>docker pull tomcat:9.0</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker pull tomcat:9.09.0: Pulling from library/tomcat0c6b8ff8c37e: Pull complete # ...Digest: sha256:c1cbd0fcc6d937c79d9f84ad6747b8ace4846a7ddf44f9344695c61f7443fa02Status: Downloaded newer image for tomcat:9.0docker.io/library/tomcat:9.0</code></pre><p>â€‹        </p><p>3ã€å¯åŠ¨Tomcat</p><pre><code>docker run -d -p 8002:8080 --name tomcat01 tomcat</code></pre><p>â€‹        </p><ul><li><p>docker è‡ªåŠ¨ç»™æˆ‘ä¸‹è½½æœ€æ–°ç‰ˆï¼ˆå¯åŠ¨æˆåŠŸï¼‰</p><p>[root@192 ~]# docker run -d -p 8002:8080 â€“name tomcat01 tomcat<br>Unable to find image â€˜tomcat:latestâ€™ locally # æ²¡æœ‰å‘ç°æœ€æ–°ç‰ˆ<br>latest: Pulling from library&#x2F;tomcat<br>0c6b8ff8c37e: Already exists # ä¸‹è½½Tomcat9.0æ—¶å·²ä¸‹è½½</p><h1 id="â€¦"><a href="#â€¦" class="headerlink" title="â€¦"></a>â€¦</h1><p>bc5c573a9ab7: Pull complete # è¡¥å……ä¸‹è½½<br>f9f34f3a3d27: Pull complete<br>Digest: sha256:28ef9f9a08f812de2f7f1de9076f39c911e5f92615ea168693964fbc2247701c<br>Status: Downloaded newer image for tomcat:latest<br>b55631abdbffbe3bf156050846e71f03834f8984bf4fe96952ddda46e209967b #å¯åŠ¨æˆåŠŸï¼Œå®¹å™¨id</p><p>â€‹    </p></li><li><p>å¯åŠ¨æˆåŠŸ</p><p>[root@192 ~]# docker ps<br>CONTAINER ID   IMAGE     COMMAND             CREATED          STATUS          PORTS                                       NAMES<br>b55631abdbff   tomcat    â€œcatalina.sh runâ€   33 seconds ago   Up 30 seconds   0.0.0.0:8002-&gt;8080&#x2F;tcp, :::8002-&gt;8080&#x2F;tcp   tomcat01 </p><p>â€‹</p></li></ul><p>4ã€æµ‹è¯•ï¼Œwindows(å¤–ç½‘)è®¿é—®æˆåŠŸ-</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406171634897.png" alt="image-20230406171634897"></div><div class="image-meta"><span class="image-caption center">image-20230406171634897</span></div></div><p>5ã€è¿›å…¥tomcatå®¹å™¨</p><pre><code>docker exec -it nginx01 /bin/bash</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker exec -it tomcat01 /bin/bashroot@b55631abdbff:/usr/local/tomcat# lsBUILDING.txt LICENSE  README.md RUNNING.txt  conf  logs    temp     webapps.distCONTRIBUTING.md  NOTICE   RELEASE-NOTES  bin      lib   native-jni-lib  webapps  work</code></pre><p>â€‹        </p><p>(å®¹å™¨ä¸­çš„å‘½ä»¤æ˜¯å°‘äº†,é˜¿é‡Œäº‘é•œåƒé»˜è®¤ä¸‹è½½çš„æ˜¯æœ€å°çš„é•œåƒï¼Œä¿è¯æœ€å°çš„è¿è¡Œç¯å¢ƒã€‚)</p><p>6ã€éƒ¨ç½²ç½‘ç«™</p><p> åœ¨webapps.distæ–‡ä»¶åœ¨ä¸ªtomcatç½‘ç«™ä»£ç </p><pre><code>root@b55631abdbff:/usr/local/tomcat# cd webapps.dist/root@b55631abdbff:/usr/local/tomcat/webapps.dist# lsROOT  docs  examples  host-manager  managerroot@b55631abdbff:/usr/local/tomcat/webapps.dist# cd examples/root@b55631abdbff:/usr/local/tomcat/webapps.dist/examples# lsMETA-INF  WEB-INF  index.html  jsp  servlets  websocketroot@b55631abdbff:/usr/local/tomcat/webapps.dist/examples# cat index.html&lt;!--  # ...--&gt;&lt;!DOCTYPE HTML&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;title&gt;Apache Tomcat Examples&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;&lt;h3&gt;Apache Tomcat Examples&lt;/H3&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;servlets&quot;&gt;Servlets examples&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;jsp&quot;&gt;JSP Examples&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;websocket/index.xhtml&quot;&gt;WebSocket Examples&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><p>â€‹        </p><p> å°†webapps.distçš„ç½‘ç«™ä»£ç copyåˆ°webappsä¸­è®©æœåŠ¡å™¨è¿è¡Œ</p><pre><code>root@b55631abdbff:/usr/local/tomcat# cp -r webapps.dist/* webapps</code></pre><p>â€‹        </p><ul><li>æµ‹è¯•ï¼Œwindows(å¤–ç½‘)è®¿é—®æˆåŠŸ</li></ul><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406171640413.png" alt="image-20230406171640413"></div><div class="image-meta"><span class="image-caption center">image-20230406171640413</span></div></div><blockquote><p>æ€è€ƒé—®é¢˜</p></blockquote><p> æ¯æ¬¡éƒ¨ç½²é¡¹ç›®éƒ½è¦è¿›å…¥å®¹å™¨æ˜¯ä¸æ˜¯å¤ªéº»çƒ¦ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹å¤–éƒ¨å½±å“å®¹å™¨å†…éƒ¨å°±å¥½äº†ã€‚</p><h2 id="8-3-éƒ¨ç½²-ElasticSearch-Kibana"><a href="#8-3-éƒ¨ç½²-ElasticSearch-Kibana" class="headerlink" title="8.3 éƒ¨ç½² ElasticSearch+Kibana"></a>8.3 éƒ¨ç½² ElasticSearch+Kibana</h2><blockquote><p>éƒ¨ç½²éš¾ç‚¹</p></blockquote><p>ElasticSearchæ˜¯ä»€ä¹ˆï¼š <a href="https://blog.csdn.net/JENREY/article/details/81290535?ops_request_misc=%7B%22request_id%22:%22164368073116780274110758%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=164368073116780274110758&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-81290535.pc_search_insert_ulrmf&utm_term=Elasticsearch+&spm=1018.2226.3001.4187">ElasticSearchä»å…¥é—¨åˆ°ç²¾é€šï¼Œå²ä¸Šæœ€å…¨ï¼ˆæŒç»­æ›´æ–°ï¼Œæœªå®Œå¾…ç»­ï¼Œæ¯å¤©ä¸€ç‚¹ç‚¹ï¼‰_Nullçš„åšå®¢-CSDNåšå®¢</a></p><p>ElasticSearchæ˜¯ æ™ºèƒ½æœç´¢ï¼Œåˆ†å¸ƒå¼çš„æœç´¢å¼•æ“</p><p>ElasticSearchæš´éœ²çš„ç«¯å£å¤šã€ååˆ†è€—å†…å­˜ã€æ•°æ®ä¸€å®šè¦æ”¾å®‰å…¨ç›®å½•</p><p>ElasticSearchæ˜¯ä¸€ä¸ªæ—¥å¿—åˆ‡å‰²ç®¡ç†çš„å·¥å…·</p><blockquote><p>éƒ¨ç½² ElasticSearch</p></blockquote><p> æ­£å¸¸å®‰è£…ElasticSearchåå¤ªæ¶ˆè€—å†…å­˜,å¯¼è‡´Linuxå¤ªå¡äº†ï¼Œéœ€è¦æ·»åŠ  <code>-e ES_JAVA_OPTS=&quot;-Xms128m -Xmx512m&quot;</code> é…ç½®ElasticSearchçš„è™šæ‹Ÿæœºå ç”¨çš„å†…å­˜å¤§å°ã€‚</p><p>1ã€å®‰è£…å¹¶å¯åŠ¨</p><pre><code>docker run -d --name elasticsearch01 -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; -e ES_JAVA_OPTS=&quot;-Xms128m -Xmx512m&quot; elasticsearch:7.6.2</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker run -d --name elasticsearch01 -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; -e ES_JAVA_OPTS=&quot;-Xms128m -Xmx512m&quot; elasticsearch:7.6.2Unable to find image &#39;elasticsearch:7.6.2&#39; locally7.6.2: Pulling from library/elasticsearchab5ef0e58194: Pull complete c4d1ca5c8a25: Pull complete 941a3cc8e7b8: Pull complete 43ec483d9618: Pull complete c486fd200684: Pull complete 1b960df074b2: Pull complete 1719d48d6823: Pull complete Digest: sha256:1b09dbd93085a1e7bca34830e77d2981521a7210e11f11eda997add1c12711faStatus: Downloaded newer image for elasticsearch:7.6.2c097654fbab08d26f803e150b54c471336a9ba24283595ba64f33d87aba33c62[root@192 ~]# docker psCONTAINER ID   IMAGE                 COMMAND                  CREATED         STATUS         PORTS                                                                                  NAMESc097654fbab0   elasticsearch:7.6.2   &quot;/usr/local/bin/dockâ€¦&quot;   2 minutes ago   Up 2 minutes   0.0.0.0:9200-&gt;9200/tcp, :::9200-&gt;9200/tcp, 0.0.0.0:9300-&gt;9300/tcp, :::9300-&gt;9300/tcp   elasticsearch01</code></pre><p>â€‹        </p><p>2ã€æµ‹è¯•è¿æ¥ElasticSearch</p><pre><code>[root@192 ~]# curl localhost:9200&#123;  &quot;name&quot; : &quot;c097654fbab0&quot;,  &quot;cluster_name&quot; : &quot;docker-cluster&quot;,  &quot;cluster_uuid&quot; : &quot;HtBpQlrcR_mI-Suj8qzW8w&quot;,  &quot;version&quot; : &#123;    &quot;number&quot; : &quot;7.6.2&quot;,    &quot;build_flavor&quot; : &quot;default&quot;,    &quot;build_type&quot; : &quot;docker&quot;,    &quot;build_hash&quot; : &quot;ef48eb35cf30adf4db14086e8aabd07ef6fb113f&quot;,    &quot;build_date&quot; : &quot;2020-03-26T06:34:37.794943Z&quot;,    &quot;build_snapshot&quot; : false,    &quot;lucene_version&quot; : &quot;8.4.0&quot;,    &quot;minimum_wire_compatibility_version&quot; : &quot;6.8.0&quot;,    &quot;minimum_index_compatibility_version&quot; : &quot;6.0.0-beta1&quot;  &#125;,  &quot;tagline&quot; : &quot;You Know, for Search&quot;&#125;</code></pre><p>â€‹        </p><p>3ã€æŸ¥çœ‹èµ„æºå ç”¨æƒ…å†µ</p><pre><code>docker stats</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker statsCONTAINER ID   NAME              CPU %     MEM USAGE / LIMIT   MEM %     NET I/O           BLOCK I/O     PIDSc097654fbab0   elasticsearch01   0.25%     420MiB / 2.406GiB   17.05%    3.71kB / 2.75kB   0B / 1.74MB   44</code></pre><p>â€‹        </p><blockquote><p>Kibana</p></blockquote><p> Kibana æ˜¯ä¸€æ¬¾å¼€æºçš„æ•°æ®åˆ†æå’Œå¯è§†åŒ–å¹³å°ï¼Œå®ƒæ˜¯ Elastic Stack æˆå‘˜ä¹‹ä¸€ï¼Œè®¾è®¡ç”¨äºå’Œ Elasticsearch åä½œã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Kibana å¯¹ Elasticsearch ç´¢å¼•ä¸­çš„æ•°æ®è¿›è¡Œæœç´¢ã€æŸ¥çœ‹ã€äº¤äº’æ“ä½œã€‚æ‚¨å¯ä»¥å¾ˆæ–¹ä¾¿çš„åˆ©ç”¨å›¾è¡¨ã€è¡¨æ ¼åŠåœ°å›¾å¯¹æ•°æ®è¿›è¡Œå¤šå…ƒåŒ–çš„åˆ†æå’Œå‘ˆç°ã€‚</p><h2 id="9ã€å›¾å½¢åŒ–ç®¡ç†å·¥å…·Portaninerå®‰è£…"><a href="#9ã€å›¾å½¢åŒ–ç®¡ç†å·¥å…·Portaninerå®‰è£…" class="headerlink" title="9ã€å›¾å½¢åŒ–ç®¡ç†å·¥å…·Portaninerå®‰è£…"></a>9ã€å›¾å½¢åŒ–ç®¡ç†å·¥å…·Portaninerå®‰è£…</h2><p>Portanineræ˜¯Dockerçš„å›¾å½¢åŒ–ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼çš„å·¥å…·è¿˜æœ‰Rancher(CI&#x2F;CDå†ç”¨)</p><p>ï¼ˆPortaninerå¹³æ—¶æ¯”è¾ƒå°‘ç”¨ï¼‰</p><p>1ã€ä¸‹è½½è¿è¡ŒPortanineré•œåƒå¹¶è¿è¡Œï¼Œè®¾ç½®æœ¬æœºæ˜ å°„ç«¯å£ä¸º8088</p><pre><code>docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainerUnable to find image &#39;portainer/portainer:latest&#39; locallylatest: Pulling from portainer/portainer94cfa856b2b1: Pull complete 49d59ee0881a: Pull complete a2300fd28637: Pull complete Digest: sha256:fb45b43738646048a0a0cc74fcee2865b69efde857e710126084ee5de9be0f3fStatus: Downloaded newer image for portainer/portainer:latestb3b421cc14a11d7a4119eb8b3144c8f4796d7ad078ff9e1ecbdf8044b3e1a4cd[root@192 ~]# docker psCONTAINER ID   IMAGE                 COMMAND        CREATED          STATUS          PORTS                                       NAMESb3b421cc14a1   portainer/portainer   &quot;/portainer&quot;   29 seconds ago   Up 27 seconds   0.0.0.0:8088-&gt;9000/tcp, :::8088-&gt;9000/tcp   flamboyant_cray</code></pre><p>â€‹        </p><p>2ã€windows(å¤–ç½‘)è®¿é—®æˆåŠŸ</p><p>(1) ç¬¬ä¸€æ¬¡ç™»å½•è®¾ç½®adminç”¨æˆ·çš„å¯†ç  (æµ‹è¯•ä¸­ä¸ºäº†å¥½è®°å¯ä»¥è®¾ç½®æˆ12345678)</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406185947485.png" alt="image-20230406185947485"></div><div class="image-meta"><span class="image-caption center">image-20230406185947485</span></div></div><p>(2) é€‰æ‹©Local(æœ¬åœ°)</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406185950988.png" alt="image-20230406185950988"></div><div class="image-meta"><span class="image-caption center">image-20230406185950988</span></div></div><pre><code># å®‰è£…æ—¶è¦åŠ ä¸Š-v &quot;/var/run/docker.sock:/var/run/docker.sock&quot; </code></pre><p>â€‹        </p><p>(3) ä¸»é¡µ</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406185955884.png" alt="image-20230406185955884"></div><div class="image-meta"><span class="image-caption center">image-20230406185955884</span></div></div><p>ï¼ˆ4ï¼‰ æŸ¥çœ‹é•œåƒåˆ—è¡¨</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190000461.png" alt="image-20230406190000461"></div><div class="image-meta"><span class="image-caption center">image-20230406190000461</span></div></div><h2 id="10ã€Dockeré•œåƒè¯¦è§£"><a href="#10ã€Dockeré•œåƒè¯¦è§£" class="headerlink" title="10ã€Dockeré•œåƒè¯¦è§£"></a>10ã€Dockeré•œåƒè¯¦è§£</h2><h2 id="10-1-ä»€ä¹ˆæ˜¯é•œåƒ"><a href="#10-1-ä»€ä¹ˆæ˜¯é•œåƒ" class="headerlink" title="10.1 ä»€ä¹ˆæ˜¯é•œåƒ"></a>10.1 ä»€ä¹ˆæ˜¯é•œåƒ</h2><p> é•œåƒæ˜¯ä¸€ç§è½»é‡çº§ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ï¼Œç”¨æ¥æ‰“åŒ…è½¯ä»¶è¿è¡Œç¯å¢ƒå’ŒåŸºäºè¿è¡Œç¯å¢ƒå¼€å‘çš„è½¯ä»¶ï¼Œå®ƒåŒ…å«è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€è¦çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä»£ç ï¼Œè¿è¡Œæ—¶ï¼ˆä¸€ä¸ªç¨‹åºåœ¨è¿è¡Œæˆ–è€…åœ¨è¢«æ‰§è¡Œçš„ä¾èµ–ï¼‰ã€åº“ï¼Œç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ã€‚</p><p> æ‰€ä»¥åº”ç”¨ç›´æ¥æ‰“åŒ…é•œåƒï¼Œå°±å¯ä»¥ç”¨äºè¿è¡Œ</p><p> è·å¾—é•œåƒçš„é€”å¾„ï¼š</p><pre><code>- è‡ªå·±åˆ¶ä½œé•œåƒDockerFile- è¿œç¨‹ä»“åº“ä¸‹è½½- åˆ«äººcopyç»™ä½ </code></pre><p>â€‹        </p><h2 id="10-2-è”åˆæ–‡ä»¶ç³»ç»Ÿ"><a href="#10-2-è”åˆæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="10.2 è”åˆæ–‡ä»¶ç³»ç»Ÿ"></a>10.2 è”åˆæ–‡ä»¶ç³»ç»Ÿ</h2><blockquote><p>UnionFS ï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰</p></blockquote><p> Dockerçš„é•œåƒå®é™…ä¸Šç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆ(ä¸‹è½½é•œåƒæ—¶åˆ†å±‚ä¸‹è½½å¯å°è¯)ï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»Ÿæ˜¯UnionFSè”åˆæ–‡ä»¶ç³»ç»Ÿã€‚</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190005007.png" alt="image-20230406190005007"></div><div class="image-meta"><span class="image-caption center">image-20230406190005007</span></div></div><p> UnionFS ï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰æ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ç ”ç³»ç»Ÿçš„ä¿®æ”¹-<br> ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹ï¼ŒUnionæ–‡ä»¶ç³»ç»Ÿæ˜¯Dockeré•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼ˆæ²¡æœ‰çˆ¶é•œåƒï¼‰ï¼Œå¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒã€‚-<br> ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°å¤–æ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥,è¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•</p><p>ä½œç”¨ï¼šæ¯”å¦‚tomcatä¸‹è½½äº†centos,åˆ™mysqlå°±ä¸ç”¨ä¸‹è½½äº†ã€‚ç›¸åŒå±‚å¯å¤ç”¨</p><p>æ€è€ƒï¼šä¸ºä»€ä¹ˆDockeä¹Ÿåƒè¦é‡‡ç”¨è¿™ç§åˆ†å±‚çš„ç»“æ„å‘¢ï¼Ÿ-<br>æœ€å¤§çš„å¥½å¤„ï¼Œè«è¿‡äºæ˜¯èµ„æºå…±äº«äº† ï¼æ¯”å¦‚æœ‰å¤šä¸ªé•œåƒéƒ½ä»ç›¸åŒçš„Baseé•œåƒæ„å»ºè€Œæ¥ï¼Œé‚£ä¹ˆå®¿ä¸»æœºåªéœ€åœ¨ç£ç›˜ä¸Šä¿ç•™ä¸€ä»½baseé•œåƒï¼ŒåŒæ—¶å†…å­˜ä¸­ä¹Ÿåªé«˜è¦åŠ è½½ä¸€ä»½baseé•œåƒ,è¿™æ ·å°±å¯ä»¥ä¸ºæ‰€æœ‰çš„å®¹å™¨æœåŠ¡äº†ï¼Œè€Œä¸”é•œåƒçš„æ¯ä¸€å±‚éƒ½å¯ä»¥è¢«å…±äº«.-<br>æŸ¥çœ‹é•œåƒåˆ†å±‚çš„æ–¹å¼å¯ä»¥é€šè¿‡<code>docker image inspect</code>å‘½ä»¤!</p><pre><code>docker image inspect redis</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker image inspect redis[    &#123;        &quot;Id&quot;: &quot;sha256:f1b6973564e91aecb808142499829a15798fdc783a30de902bb0c4133fee19ad&quot;,        &quot;RepoTags&quot;: [            &quot;redis:latest&quot;        ],        # ...                &quot;RootFS&quot;: &#123;             &quot;Type&quot;: &quot;layers&quot;,            &quot;Layers&quot;: [ # è¿™é‡ŒæŒ‡ç¤ºäº†åˆ†å±‚ä¿¡æ¯                &quot;sha256:7d0ebbe3f5d26c1b5ec4d5dbb6fe3205d7061f9735080b0162d550530328abd6&quot;,                &quot;sha256:92b6c42121d80f330a80c20afa928e19c31ab3a5fe7cf9c91517fa8cc468b33f&quot;,                &quot;sha256:65845b69eb5c3291dd610ddf2f61f524ab206f9754900d9f3512fcbc2d38604f&quot;,                &quot;sha256:7048818d16571a765e2b0cf82c20d627abebccec73ac3d7b7973501000e6e05d&quot;,                &quot;sha256:c61d5cbf862134aad34822e96d9efc009cca19ad604419cb3f8cf8857eb18372&quot;,                &quot;sha256:ff503dae4eb68eb7a71095e5b1b1b123f42d37e923222038b64fba5a80b13307&quot;            ]        &#125;,        &quot;Metadata&quot;: &#123;            &quot;LastTagTime&quot;: &quot;0001-01-01T00:00:00Z&quot;        &#125;    &#125;]</code></pre><p>â€‹        </p><p> æ‰€æœ‰çš„Dockeré•œåƒéƒ½èµ·å§‹äºä¸€ä¸ªåŸºç¡€é•œåƒå±‚ï¼Œå½“è¿›è¡Œä¿®æ”¹æˆ–å¢åŠ æ–°çš„å†…å®¹æ—¶ï¼Œå°±ä¼šåœ¨å½“å‰é•œåƒå±‚ä¹‹ä¸Š,åˆ›å»ºæ–°çš„é•œåƒå±‚.-<br>ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡å¦‚åŸºäºUbuntu Linux 16.04åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œè¿™å°±æ˜¯æ–°é•œåƒçš„ç¬¬ä¸€å±‚ï¼›å¦‚æœåœ¨è¯¥é•œåƒä¸­æ·»åŠ PythonåŒ…ï¼Œ-<br>å°±ä¼šåœ¨åŸºç¡€é•œåƒå±‚ä¹‹ä¸Šåˆ›å»ºç¬¬äºŒä¸ªé•œåƒå±‚;å¦‚æœç»§ç»­æ·»åŠ ä¸€ä¸ªå®‰å…¨è¡¥ä¸ï¼Œå°±ä¼šåˆ›å»ºç¬¬ä¸‰ä¸ªé•œåƒå±‚ã€‚-<br>è¯¥é•œåƒå½“å‰å·²ç»åŒ…å«3ä¸ªé•œåƒå±‚ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆè¿™åªæ˜¯ä¸€ä¸ªç”¨äºæ¼”ç¤ºçš„å¾ˆç®€å•çš„ä¾‹å­ï¼‰.</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190010300.png" alt="image-20230406190010300"></div><div class="image-meta"><span class="image-caption center">image-20230406190010300</span></div></div><p> åœ¨æ·»åŠ é¢å¤–çš„é•œåƒå±‚çš„åŒæ—¶ï¼Œé•œåƒå§‹ç»ˆä¿æŒæ˜¯å½“å‰æ‰€æœ‰é•œåƒçš„ç»„åˆï¼Œç†è§£è¿™ä¸€ç‚¹éå¸¸é‡Œè¦.ä¸‹å›¾ä¸­ä¸¾äº†ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¯ä¸ªé•œåƒå±‚åŒ…å«3ä¸ªæ–‡ä»¶ï¼Œè€Œé•œåƒåŒ…å«äº†æ¥è‡ªä¸¤ä¸ªé•œåƒå±‚çš„6ä¸ªæ–‡ä»¶.</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190014018.png" alt="image-20230406190014018"></div><div class="image-meta"><span class="image-caption center">image-20230406190014018</span></div></div><p> è¿™ç§æƒ…å†µä¸‹ï¼Œä¸Šå±‚é•œåƒå±‚ä¸­çš„æ–‡ä»¶è¦†ç›–äº†åº•å±‚é•œåƒå±‚ä¸­çš„æ–‡ä»¶ã€‚è¿™æ ·å°±ä½¿å¾—æ–‡ä»¶çš„æ›´æ–°ç‰ˆæœ¬ä½œä¸ºä¸€ä¸ªæ–°é•œåƒå±‚æ·»åŠ åˆ°é•œåƒå½“ä¸­ã€‚-<br> Dockeré€šè¿‡å­˜å‚¨å¼•æ“ï¼ˆæ–°ç‰ˆæœ¬é‡‡ç”¨å¿«ç…§æœºåˆ¶ï¼‰çš„æ–¹å¼æ¥å®ç°é•œåƒå±‚å †æ ˆï¼Œå¹¶ä¿è¯å¤šé•œåƒå±‚å¯¹å¤–å±•ç¤ºä¸ºç»Ÿä¸€çš„æ–‡ä»¶ç³»ç»Ÿã€‚-<br>Linuxä¸Šå¯ç”¨çš„å­˜å‚¨å¼•æ“æœ‰AUFSã€Overlay2. Device hopperã€Btrfsä»¥åŠZFSã€‚é¡¾åæ€ä¹‰ï¼Œæ¯ç§å­˜å‚¨å¼•æ“éƒ½åŸºäºLinuxä¸­å¯¹åº”çš„-<br>æ–‡ä»¶ç³»ç»Ÿæˆ–è€…å—è®¾å¤‡æŠ€æœ¯ï¼Œå¹¶ä¸”æ¯ç§å­˜å‚¨å¼•æ“éƒ½æœ‰å…¶ç‹¬æœ‰çš„æ€§èƒ½ç‰¹ç‚¹ã€‚</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190018074.png" alt="image-20230406190018074"></div><div class="image-meta"><span class="image-caption center">image-20230406190018074</span></div></div><p> Dockeråœ¨Windowsä¸Šä»…æ”¯æŒwindowsfilter ä¸€ç§å­˜å‚¨å¼•æ“ï¼Œè¯¥å¼•æ“åŸºäºNTFSæ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šå®ç°äº†åˆ†å±‚å’ŒCoWï¼» 1ï¼½ 0-<br>ä¸‹å›¾å±•ç¤ºäº†ä¸ç³»ç»Ÿæ˜¾ç¤ºç›¸åŒçš„ä¸‰å±‚é•œåƒã€‚æ‰€æœ‰é•œåƒå±‚å †å å¹¶åˆå¹¶ï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€çš„è§†å›¾ã€‚-</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190021861.png" alt="image-20230406190021861"></div><div class="image-meta"><span class="image-caption center">image-20230406190021861</span></div></div><blockquote><p>ç‰¹ç‚¹</p></blockquote><p> Dockeré•œåƒéƒ½æ˜¯åªè¯»çš„ï¼Œå½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„å¯å†™å±‚è¢«åŠ è½½åˆ°é•œåƒçš„é¡¶éƒ¨ï¼è¿™ä¸€å±‚å°±æ˜¯æˆ‘ä»¬é€šå¸¸è¯´çš„å®¹å™¨å±‚ï¼Œå®¹å™¨ä¹‹ä¸‹çš„éƒ½å«é•œåƒå±‚ï¼</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190024959.png" alt="image-20230406190024959"></div><div class="image-meta"><span class="image-caption center">image-20230406190024959</span></div></div><h2 id="11ã€æäº¤è‡ªå·±é•œåƒ"><a href="#11ã€æäº¤è‡ªå·±é•œåƒ" class="headerlink" title="11ã€æäº¤è‡ªå·±é•œåƒ"></a>11ã€æäº¤è‡ªå·±é•œåƒ</h2><p>ä½¿ç”¨<code>docker commit</code>å‘½ä»¤æäº¤å®¹å™¨æˆä¸ºä¸€ä¸ªæ–°çš„ç‰ˆæœ¬</p><pre><code>docker commit -m=&quot;æäº¤çš„æè¿°ä¿¡æ¯&quot;  -a=&quot;ä½œè€…&quot; å®¹å™¨id ç›®æ ‡é•œåƒå:[TAG] </code></pre><p>â€‹        </p><p> ç”±äºé»˜è®¤çš„Tomcaté•œåƒçš„webappsæ–‡ä»¶å¤¹ä¸­æ²¡æœ‰ä»»ä½•å†…å®¹ï¼Œéœ€è¦ä»webapps.distä¸­æ‹·è´æ–‡ä»¶åˆ°webappsæ–‡ä»¶å¤¹ã€‚ä¸‹é¢è‡ªè¡Œåˆ¶ä½œé•œåƒï¼šå°±æ˜¯ä»webapps.distä¸­æ‹·è´æ–‡ä»¶åˆ°webappsæ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶æäº¤è¯¥é•œåƒä½œä¸ºä¸€ä¸ªæ–°çš„é•œåƒã€‚<strong>ä½¿å¾—è¯¥é•œåƒé»˜è®¤çš„webappsæ–‡ä»¶å¤¹ä¸‹å°±æœ‰æ–‡ä»¶</strong>ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1ã€å¯åŠ¨Tomcat</p><pre><code>// å¯åŠ¨Tomcat ä¸€å®šè¦é…ç½®ç«¯å£æ˜ å°„ `-p 8080:8080`docker run -it -p 8080:8080 tomcat//å¼€å¤šä¸€ä¸ªç»ˆç«¯// è¿›å…¥å®¹å™¨docker exec -it d55df6cdafe8 /bin/bash</code></pre><p>â€‹        </p><p>2ã€åˆ¶ä½œï¼ˆä¿®æ”¹ï¼‰é•œåƒï¼Œæ‹·è´<code>cp -r webapps.dist/* webapps</code></p><pre><code>root@d55df6cdafe8:/usr/local/tomcat# cd webappsroot@d55df6cdafe8:/usr/local/tomcat/webapps# lsroot@d55df6cdafe8:/usr/local/tomcat/webapps# cd ..root@d55df6cdafe8:/usr/local/tomcat# lsBUILDING.txt LICENSE  README.md RUNNING.txt  conf  logs    temp     webapps.distCONTRIBUTING.md  NOTICE   RELEASE-NOTES  bin      lib   native-jni-lib  webapps  workroot@d55df6cdafe8:/usr/local/tomcat# cp -r webapps.dist/* webappsroot@d55df6cdafe8:/usr/local/tomcat# cd webappsroot@d55df6cdafe8:/usr/local/tomcat/webapps# lsROOT  docs  examples  host-manager  manager</code></pre><p>â€‹        </p><p>3ã€windowsè®¿é—®</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190029165.png" alt="image-20230406190029165"></div><div class="image-meta"><span class="image-caption center">image-20230406190029165</span></div></div><p>4ã€æäº¤è‡ªå·±é•œåƒ,æäº¤åˆ°æœ¬åœ°ï¼ˆä¹‹åå†å‘å¸ƒåˆ°è¿œç¨‹ä»“åº“ï¼‰</p><pre><code>//docker commit -m=&quot;æäº¤çš„æè¿°ä¿¡æ¯&quot;  -a=&quot;ä½œè€…&quot; å®¹å™¨id ç›®æ ‡é•œåƒå:[TAG] docker commit -m=&quot;add webapps app&quot;  -a=&quot;ä¸€ä¸ªå¹³å‡¡deäºº&quot; 6df1e2c4a350 tomcat02:1.0</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker commit -m=&quot;add webapps app&quot;  -a=&quot;ä¸€ä¸ªå¹³å‡¡deäºº&quot; 6df1e2c4a350 tomcat02:1.0sha256:e699f08da20e848d7a9bd7c8953b63500abe1ea6a6605838dc9f97876857c229[root@192 ~]# docker imagesREPOSITORY            TAG       IMAGE ID       CREATED          SIZEtomcat02              1.0       e699f08da20e   35 seconds ago   684MB # è‡ªå·±é•œåƒtomcat                latest    413407dddb5e   4 days ago       680MBredis                 latest    f1b6973564e9   5 days ago       113MBportainer/portainer   latest    580c0e4e98b0   10 months ago    79.1MBelasticsearch         7.6.2     f29a1ee41030   22 months ago    791MB</code></pre><p>â€‹        </p><p>5ã€æµ‹è¯•</p><p> ï¼ˆ1ï¼‰å¯åŠ¨</p><pre><code>docker run -it -p 8080:8080 tomcat02:1.0</code></pre><p>â€‹        </p><p> ï¼ˆ2ï¼‰windowsè®¿é—®ï¼Œæµ‹è¯•æˆåŠŸ</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190033178.png" alt="image-20230406190033178"></div><div class="image-meta"><span class="image-caption center">image-20230406190033178</span></div></div><blockquote><p>å°èŠ‚</p></blockquote><p>å¦‚æœä½ æƒ³è¦ä¿å­˜å½“å‰å®¹å™¨çš„çŠ¶æ€ï¼Œå°±å¯ä»¥é€šè¿‡commitæ¥æäº¤ï¼Œè·å¾—ä¸€ä¸ªé•œåƒ,å°±å¥½æ¯”æˆ‘ä»¬ä»¥å‰å­¦ä¹ VMæ—¶å€™ï¼Œå¿«ç…§ä¿å­˜è™šæ‹ŸæœºçŠ¶æ€ï¼Œä¹‹åå¯çŠ¶æ€å›æ»šï¼</p><h2 id="12ã€å®¹å™¨æ•°æ®å·"><a href="#12ã€å®¹å™¨æ•°æ®å·" class="headerlink" title="12ã€å®¹å™¨æ•°æ®å·"></a>12ã€å®¹å™¨æ•°æ®å·</h2><blockquote><p>dockerçš„ç†å¿µå›é¡¾</p></blockquote><p>å°†åº”ç”¨å’Œç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªé•œåƒ</p><p>æ•°æ®ï¼Ÿå¦‚æœæ•°æ®éƒ½åœ¨å®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®¹å™¨åˆ é™¤ï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ï¼éœ€æ±‚ï¼šæ•°æ®å¯ä»¥æŒä¹…åŒ–</p><p>MySQLï¼Œå®¹å™¨åˆ é™¤äº†ï¼Œåˆ åº“è·‘è·¯ï¼éœ€æ±‚ï¼šMySQLæ•°æ®å¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°ï¼</p><p>å®¹å™¨ä¹‹é—´å¯ä»¥æœ‰ä¸€ä¸ªæ•°æ®å…±äº«çš„æŠ€æœ¯ï¼Dockerå®¹å™¨ä¸­äº§ç”Ÿçš„æ•°æ®ï¼ŒåŒæ­¥åˆ°æœ¬åœ°ï¼</p><p>è¿™å°±æ˜¯å·æŠ€æœ¯ï¼<strong>ç›®å½•çš„æŒ‚è½½</strong>ï¼Œå°†æˆ‘ä»¬å®¹å™¨å†…çš„ç›®å½•ï¼ŒæŒ‚è½½åˆ°Linuxä¸Šé¢ï¼</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190037262.png" alt="image-20230406190037262"></div><div class="image-meta"><span class="image-caption center">image-20230406190037262</span></div></div><p>ä½¿ç”¨å·æŠ€æœ¯çš„åŸå› ï¼šå®¹å™¨çš„æŒä¹…åŒ–å’ŒåŒæ­¥æ“ä½œï¼å®¹å™¨é—´ä¹Ÿæ˜¯å¯ä»¥æ•°æ®å…±äº«çš„ï¼</p><h2 id="12-1-ä½¿ç”¨æ•°æ®å·"><a href="#12-1-ä½¿ç”¨æ•°æ®å·" class="headerlink" title="12.1 ä½¿ç”¨æ•°æ®å·"></a>12.1 ä½¿ç”¨æ•°æ®å·</h2><p>æŒ‚è½½å ä¸»æœºç›®å½•å’Œå®¹å™¨ç›®å½•<strong>å…±äº«</strong>ä¸€ä¸ªç›®å½•èµ„æºï¼Œå®¹å™¨ç›®å½•ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸»æœºç›®å½•çš„å¿«æ·æ–¹å¼</p><blockquote><p>æ–¹å¼ä¸€ ï¼šç›´æ¥ä½¿ç”¨å‘½ä»¤æŒ‚è½½ -v</p></blockquote><pre><code>//-v, --volume list      ç»‘å®šæŒ‚è½½å·docker run -it -v ä¸»æœºç›®å½•:å®¹å™¨ç›®å½•  -p ä¸»æœºç«¯å£:å®¹å™¨å†…ç«¯å£//é€šè¿‡ æŸ¥çœ‹æŒ‚è½½docker inspect å®¹å™¨id</code></pre><p>â€‹        </p><p>1ã€æŒ‚è½½å¹¶è¿›å…¥å‘½ä»¤è¡Œ<code>/bin/bash</code></p><pre><code>docker run -it -v /home/ceshi:/home centos /bin/bash</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker run -it -v /home/ceshi:/home centos /bin/bash[root@a40aea147d6d /]# cd /home[root@a40aea147d6d home]# ls # ç©º</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# cd /home[root@192 home]# lsceshi # æ‰¾åˆ°ceshiç›®å½•</code></pre><p>â€‹        </p><p>2ã€æŸ¥çœ‹æŒ‚è½½</p><pre><code>docker inspect ã€å®¹å™¨idã€‘</code></pre><p>â€‹        </p><pre><code>[root@192 home]# docker inspect a40aea147d6d# ...&quot;Mounts&quot;: [            &#123;                &quot;Type&quot;: &quot;bind&quot;,                &quot;Source&quot;: &quot;/home/ceshi&quot;, # æŒ‚è½½æˆåŠŸ ä¸»æœºç›®å½•                &quot;Destination&quot;: &quot;/home&quot;, # æŒ‚è½½æˆåŠŸ å®¹å™¨ç›®å½•                &quot;Mode&quot;: &quot;&quot;,                &quot;RW&quot;: true,                &quot;Propagation&quot;: &quot;rprivate&quot;            &#125;        ],# ...</code></pre><p>â€‹        </p><p>3ã€æµ‹è¯•æŒ‚è½½</p><p>æŒ‚è½½å ä¸»æœºç›®å½•å’Œå®¹å™¨ç›®å½•<strong>å…±äº«</strong>ä¸€ä¸ªç›®å½•èµ„æºï¼Œå®¹å™¨ç›®å½•ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸»æœºç›®å½•çš„å¿«æ·æ–¹å¼</p><pre><code>[root@a40aea147d6d home]# touch test.txt # åˆ›å»ºæ–‡ä»¶[root@a40aea147d6d home]# lstest.txt</code></pre><p>â€‹        </p><pre><code>[root@192 home]# lsceshi[root@192 home]# cd ceshi/[root@192 ceshi]# lstest.txt # æŒ‚è½½æˆåŠŸï¼Œä¹Ÿtest.txtæ–‡ä»¶# å‘æ–‡ä»¶å†™å…¥æ•°æ®[root@192 ceshi]# echo &quot;This is test data&quot; &gt; test.txt[root@192 ceshi]# cat test.txt This is test data</code></pre><p>â€‹        </p><pre><code># å®¹å™¨å†…ç›®å½•ä¹Ÿæœ‰æ•°æ®[root@a40aea147d6d home]# cat test.txt This is test data</code></pre><p>â€‹        </p><p>å°±ç®—å®¹å™¨å…³é—­ï¼Œæ•°æ®ä¾æ—§ä¸€è‡´ã€‚</p><h2 id="12-2-MySQLåŒæ­¥æ•°æ®å®æˆ˜"><a href="#12-2-MySQLåŒæ­¥æ•°æ®å®æˆ˜" class="headerlink" title="12.2 MySQLåŒæ­¥æ•°æ®å®æˆ˜"></a>12.2 MySQLåŒæ­¥æ•°æ®å®æˆ˜</h2><p>1ã€è·å–mysqlé•œåƒ</p><pre><code>docker pull mysql</code></pre><p>â€‹        </p><p>2ã€è¿è¡Œå®¹å™¨,æŒ‚è½½å€†ä¸ªæ•°æ®ç›®å½•ï¼Œé…ç½®å¯†ç <code>-e MYSQL_ROOT_PASSWORD=password</code></p><pre><code># -e ç¯å¢ƒé…ç½®ï¼Œé…ç½®mysqlå¯†ç docker run -d -p 3306:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql  -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker run -d -p 3306:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql  -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql05574ce7407c7745ee28951f5ccc032062b83b9d9486ef6062a1d321df2ad0c8</code></pre><p>â€‹        </p><pre><code># å¯åŠ¨æˆåŠŸä¹‹åï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°ä½¿ç”¨sqlyogæ¥æµ‹è¯•ä¸€ä¸‹# sqlyog-è¿æ¥åˆ°æœåŠ¡å™¨çš„3306--å’Œå®¹å™¨å†…çš„3306æ˜ å°„ # åœ¨æœ¬åœ°æµ‹è¯•åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼ŒæŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬æ˜ å°„çš„è·¯å¾„æ˜¯å¦okï¼</code></pre><p>â€‹        </p><p>3ã€æµ‹è¯•è¿æ¥ï¼Œåœ¨windowsä¸Šç”¨æ•°æ®åº“è¿æ¥å·¥å…·æµ‹è¯•è¿æ¥mysqlå®¹å™¨Â·</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190044355.png" alt="image-20230406190044355"></div><div class="image-meta"><span class="image-caption center">image-20230406190044355</span></div></div><ul><li>è¿æ¥æˆåŠŸ</li></ul><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190048110.png" alt="image-20230406190048110"></div><div class="image-meta"><span class="image-caption center">image-20230406190048110</span></div></div><p>4ã€æ–‡ä»¶ç›®å½•æ˜ å°„æˆåŠŸ</p><pre><code>[root@192 mysql]# cd /home/mysql/[root@192 mysql]# lsconf  data[root@192 mysql]# cd data[root@192 data]# lsauto.cnf       ca-key.pem       #ib_16384_0.dblwr  ib_logfile0   mysql               public_key.pem   undo_001binlog.000001  ca.pem           #ib_16384_1.dblwr  ib_logfile1   mysql.ibd           server-cert.pem  undo_002binlog.000002  client-cert.pem  ib_buffer_pool     ibtmp1        performance_schema  server-key.pembinlog.index   client-key.pem   ibdata1            #innodb_temp  private_key.pem     sys</code></pre><p>â€‹        </p><p>5ã€linuxä¸­ï¼Œä¸€ä¸ªæ•°æ®åº“å¯¹åº”ä¸€ä¸ªç›®å½•ï¼Œä¸€ä¸ªæ•°æ®è¡¨å¯¹åº”ä¸€ä¸ªæ–‡ä»¶</p><p>ï¼ˆ1ï¼‰åˆ›å»ºæ•°æ®åº“</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190051764.png" alt="image-20230406190051764"></div><div class="image-meta"><span class="image-caption center">image-20230406190051764</span></div></div><p>ï¼ˆ2ï¼‰æˆåŠŸçœ‹åˆ°testç›®å½•</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190057738.png" alt="image-20230406190057738"></div><div class="image-meta"><span class="image-caption center">image-20230406190057738</span></div></div><p>ï¼ˆ3ï¼‰åˆ›å»ºæ•°æ®è¡¨</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190102699.png" alt="image-20230406190102699"></div><div class="image-meta"><span class="image-caption center">image-20230406190102699</span></div></div><p>ï¼ˆ4ï¼‰æˆåŠŸçœ‹åˆ°æ–‡ä»¶</p><blockquote><p>å®¹å™¨æ•°æ®æŒä¹…åŒ–</p></blockquote><p>å‡è®¾æˆ‘ä»¬å°†å®¹å™¨åˆ é™¤ï¼Œå‘ç°æˆ‘ä»¬æŒ‚è½½åˆ°æœ¬åœ°çš„æ•°æ®å·ä¾æ—§æ²¡æœ‰ä¸¢å¤±ï¼Œè¿™å°±å®ç°äº†å®¹å™¨æ•°æ®æŒä¹…åŒ–åŠŸèƒ½ã€‚</p><h2 id="12-3-å…·åæŒ‚è½½å’ŒåŒ¿åæŒ‚è½½"><a href="#12-3-å…·åæŒ‚è½½å’ŒåŒ¿åæŒ‚è½½" class="headerlink" title="12.3 å…·åæŒ‚è½½å’ŒåŒ¿åæŒ‚è½½"></a>12.3 å…·åæŒ‚è½½å’ŒåŒ¿åæŒ‚è½½</h2><p><strong>å·æŒ‡å®¹å™¨è¢«æŒ‚è½½çš„ä¸»æœºç›®å½•</strong></p><blockquote><p>åŒ¿åæŒ‚è½½</p></blockquote><p>1ã€åŒ¿åæŒ‚è½½å°±æ˜¯ä¸æŒ‡å®šä¸»æœºç›®å½•è¿›è¡ŒæŒ‚è½½ï¼ˆæ²¡æœ‰ç»™å·ï¼ˆä¸»æœºç›®å½•ï¼‰èµ·åå°±æ˜¯åŒ¿åï¼‰</p><pre><code># -v å®¹å™¨å†…è·¯å¾„!docker run -d -P --name nginx01 -v /etc/nginx nginx</code></pre><p>â€‹        </p><p>2ã€æŸ¥çœ‹æ‰€æœ‰çš„volumeï¼ˆå·ï¼‰çš„æƒ…å†µ</p><pre><code>docker volume ls   </code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker volume ls   DRIVER    VOLUME NAMElocal     7ef9dee8a0efcf74601d3ce615fc1a74a96008d861648d5f415c581ce426b44c #è¿™äº›å­—ç¬¦ä¸²å°±ä»£è¡¨åŒ¿åå·(ç›®å½•),æ˜¯åŒ¿åæŒ‚è½½local     8ecbc00746d9bea6a8095e65ead44e30b5cbf49f7409bc58aff9fab4b10cf0f4local     d745315f9e2d743c1a83edc5312809efba67693b8a01a27eb0a49a4ff572a450</code></pre><p>â€‹        </p><p>3ã€æŒ‡å®šå·æ¥æŸ¥çœ‹æŒ‚è½½</p><pre><code> docker volume inspect 7ef9dee8a0efcf74601d3ce615fc1a74a96008d861648d5f415c581ce426b44c</code></pre><p>â€‹        </p><pre><code>[root@192 ~]#  docker volume inspect 7ef9dee8a0efcf74601d3ce615fc1a74a96008d861648d5f415c581ce426b44c[    &#123;        &quot;CreatedAt&quot;: &quot;2022-02-01T21:04:59+08:00&quot;,        &quot;Driver&quot;: &quot;local&quot;,        &quot;Labels&quot;: null,        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/7ef9dee8a0efcf74601d3ce615fc1a74a96008d861648d5f415c581ce426b44c/_data&quot;,# æŒ‚è½½çš„ç›®å½•        &quot;Name&quot;: &quot;7ef9dee8a0efcf74601d3ce615fc1a74a96008d861648d5f415c581ce426b44c&quot;,        &quot;Options&quot;: null,        &quot;Scope&quot;: &quot;local&quot;    &#125;]</code></pre><p>â€‹<br>â€‹        </p><blockquote><p>å…·åæŒ‚è½½</p></blockquote><p>1ã€å…·åæŒ‚è½½å°±æ˜¯æŒ‡å®šäº†ä¸»æœºç›®å½•è¿›è¡ŒæŒ‚è½½ï¼ˆæœ‰ç»™å·ï¼ˆä¸»æœºç›®å½•ï¼‰èµ·åå°±æ˜¯å…·åï¼ˆæœ‰å…·ä½“çš„åï¼‰ï¼‰</p><pre><code>docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx nginx</code></pre><p>â€‹        </p><p>2ã€æŸ¥çœ‹æ‰€æœ‰çš„volumeï¼ˆå·ï¼‰çš„æƒ…å†µ</p><pre><code>[root@192 home]# docker volume ls   DRIVER    VOLUME NAMElocal     7ef9dee8a0efcf74601d3ce615fc1a74a96008d861648d5f415c581ce426b44clocal     8ecbc00746d9bea6a8095e65ead44e30b5cbf49f7409bc58aff9fab4b10cf0f4local     d745315f9e2d743c1a83edc5312809efba67693b8a01a27eb0a49a4ff572a450local     juming-nginx #æœ‰å…·ä½“çš„å,å…·åæŒ‚è½½</code></pre><p>â€‹        </p><p>3ã€æŒ‡å®šå·æ¥æŸ¥çœ‹æŒ‚è½½</p><pre><code>[root@192 home]# docker volume inspect juming-nginx[    &#123;        &quot;CreatedAt&quot;: &quot;2022-02-01T21:16:26+08:00&quot;,        &quot;Driver&quot;: &quot;local&quot;,        &quot;Labels&quot;: null,        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/juming-nginx/_data&quot;, # æŒ‚è½½çš„ç›®å½•        &quot;Name&quot;: &quot;juming-nginx&quot;,        &quot;Options&quot;: null,        &quot;Scope&quot;: &quot;local&quot;    &#125;]</code></pre><p>â€‹        </p><p> æ‰€æœ‰çš„dockerå®¹å™¨å†…çš„å·ï¼Œæ²¡æœ‰æŒ‡å®š<strong>ç»å¯¹è·¯å¾„çš„ç›®å½•</strong>çš„æƒ…å†µä¸‹éƒ½æ˜¯åœ¨<code>/var/lib/docker/volumes/xxxx/_data</code>ä¸‹çš„ï¼Œ-<br>å¦‚æœæŒ‡å®šäº†ç›®å½•ï¼Œ<code>docker volume ls</code> æ˜¯æŸ¥çœ‹ä¸åˆ°çš„ã€‚</p><blockquote><p>å°èŠ‚</p></blockquote><pre><code># ä¸‰ç§æŒ‚è½½ï¼š åŒ¿åæŒ‚è½½ã€å…·åæŒ‚è½½ã€æŒ‡å®šè·¯å¾„æŒ‚è½½-v å®¹å™¨å†…è·¯å¾„#åŒ¿åæŒ‚è½½-v å·åï¼šå®¹å™¨å†…è·¯å¾„  #å…·åæŒ‚è½½-v /å®¿ä¸»æœºè·¯å¾„ï¼šå®¹å™¨å†…è·¯å¾„ #æŒ‡å®šè·¯å¾„æŒ‚è½½ docker volume ls æ˜¯æŸ¥çœ‹ä¸åˆ°çš„</code></pre><p>â€‹        </p><blockquote><p>æ‹“å±•</p></blockquote><p>é€šè¿‡ -v å®¹å™¨å†…è·¯å¾„ï¼š ro rw æ”¹å˜è¯»å†™æƒé™</p><pre><code>ro #readonly åªè¯»rw #readwrite å¯è¯»å¯å†™docker run -d -P --name nginx05 -v juming:/etc/nginx:ro nginxdocker run -d -P --name nginx05 -v juming:/etc/nginx:rw nginx</code></pre><p>â€‹        </p><p>ro åªè¦çœ‹åˆ°roå°±è¯´æ˜è¿™ä¸ªè·¯å¾„åªèƒ½é€šè¿‡å®¿ä¸»æœºæ¥æ“ä½œï¼Œå®¹å™¨å†…éƒ¨æ˜¯æ— æ³•æ“ä½œï¼</p><h2 id><a href="#" class="headerlink" title></a></h2><h2 id="13ã€-åˆå§‹Dockerfile"><a href="#13ã€-åˆå§‹Dockerfile" class="headerlink" title="13ã€ åˆå§‹Dockerfile"></a>13ã€ åˆå§‹Dockerfile</h2><blockquote><p>ä»€ä¹ˆæ˜¯Dockerfile</p></blockquote><p>Dockerfile æ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ„å»ºæ–‡ä»¶ï¼Œæ˜¯ä¸€æ®µå‘½ä»¤è„šæœ¬ã€‚</p><blockquote><p>åˆ›å»ºDockerfile</p></blockquote><p>1ã€åˆ›å»ºdockerçš„æµ‹è¯•ç›®å½•</p><pre><code>[root@192 _data]# cd /home[root@192 home]# mkdir docker-test-volume</code></pre><p>â€‹        </p><p>2ã€åˆ›å»ºDockerfileè„šæœ¬æ–‡ä»¶ï¼Œé€šè¿‡è¿™ä¸ªè„šæœ¬å¯ä»¥ç”Ÿæˆé•œåƒ,</p><p>Dockerfileè„šæœ¬æ–‡ä»¶å†…å®¹åˆ†æ:</p><pre><code># æ–‡ä»¶ä¸­çš„å†…å®¹ æŒ‡ä»¤(å¤§å†™) å‚æ•°#é•œåƒæ˜¯ä¸€å±‚ä¸€å±‚çš„ï¼Œè¿™é‡Œçš„æ¯ä¸ªå‘½ä»¤ï¼Œå°±æ˜¯é•œåƒçš„ä¸€å±‚ï¼FROM centos # æŒ‡å®šé•œåƒVOLUME [&quot;volume01&quot;,&quot;volume02&quot;] # æŒ‚è½½ç›®å½•CMD echo &quot;----end----&quot; # CMD æ‰§è¡Œå‘½ä»¤è¡Œå‘½ä»¤ CMD /bin/bash</code></pre><p>â€‹        </p><pre><code>[root@192 docker-test-volume]# vim dockerfile01[root@192 docker-test-volume]# cat dockerfile01 FROM centos VOLUME [&quot;volume01&quot;,&quot;volume02&quot;] CMD echo &quot;----end----&quot; CMD /bin/bash</code></pre><p>â€‹        </p><p>3ã€æ‰§è¡ŒDockerfileè„šæœ¬æ–‡ä»¶ï¼Œæ„å»ºé•œåƒ</p><pre><code>docker build -f /home/docker-test-volume dockerfile01 -t /kuangshen/centos .</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker imagesREPOSITORY            TAG       IMAGE ID       CREATED         SIZEkuangshen/centos      latest    6b3e9b445d81   3 hours ago     231MB #æ„å»ºæˆåŠŸ# ...</code></pre><p>â€‹        </p><p>4ã€å¯åŠ¨é•œåƒï¼ŒæŸ¥çœ‹å®¹å™¨</p><pre><code>docker run -it /kuangshen/centos /bin/bash</code></pre><p>â€‹        </p><pre><code>[root@b68f2c5c965b /]# lsbin  etc   lib  lost+found  mnt  proc  run   srv  tmp  var   volume02dev  home  lib64  media       opt  root  sbin  sys  usr  volume01# æ‰¾åˆ°æŒ‚è½½çš„ç›®å½•volume01ã€volume02</code></pre><p>â€‹        </p><h2 id="14ã€-æ•°æ®å·å®¹å™¨"><a href="#14ã€-æ•°æ®å·å®¹å™¨" class="headerlink" title="14ã€ æ•°æ®å·å®¹å™¨"></a>14ã€ æ•°æ®å·å®¹å™¨</h2><h2 id="14-1-æ•°æ®å·å®¹å™¨"><a href="#14-1-æ•°æ®å·å®¹å™¨" class="headerlink" title="14.1 æ•°æ®å·å®¹å™¨"></a>14.1 æ•°æ®å·å®¹å™¨</h2><p>å®¹å™¨æŒ‚è½½æ•°æ®å·,å®ç°å®¹å™¨é—´çš„æ•°æ®åŒæ­¥å’Œèµ„æºå…±äº«ï¼</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190112408.png)" alt="1ã€å¯åŠ¨çˆ¶å®¹å™¨docker01 docker run -it --name docker01 kuangshen/centos â€‹ 2ã€å¯åŠ¨å®¹å™¨docker02å¹¶æŒ‚è½½åˆ°çˆ¶å®¹å™¨docker01çš„å…±äº«å·,å‘½ä»¤`--volumes-from å®¹å™¨åˆ—è¡¨` docker run -it --name docker02 --volumes-from docker01 kuangshen/centos â€‹ 3ã€æŸ¥çœ‹å®¹å™¨è¿è¡Œ [root@192 ~]# docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES fa68f1afa235 kuangshen/centos /bin/sh -c /bin/bash 11 seconds ago Up 10 seconds docker02 eb991bf17656 kuangshen/centos /bin/sh -c /bin/bash 2 minutes ago Up 2 minutes docker01 â€‹ 4ã€åœ¨çˆ¶å®¹å™¨docker01çš„å…±äº«å·ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œçœ‹docker02å…±äº«å·çš„å˜åŒ– [root@eb991bf17656 /]# cd volume01 [root@eb991bf17656 volume01]# touch docker.txt â€‹ * docker02å®¹å™¨å†…æˆåŠŸçœ‹åˆ°docker01åˆ›å»ºçš„æ–‡ä»¶ [root@fa68f1afa235 /]# cd volume01 [root@fa68f1afa235 volume01]# ls docker.txt â€‹ 5ã€å†åŠ ä¸ªdocker03è¯•è¯•ï¼Œä¹Ÿæœ‰docker01åˆ›å»ºçš„æ–‡ä»¶ docker run -it --name docker03 --volumes-from docker01 kuangshen/centos â€‹ [root@e4ad9cb37d01 /]# cd volume01 [root@e4ad9cb37d01 volume01]# ls docker.txt â€‹ 6ã€å°ç»“ * docker03åˆ›å»ºçš„æ–‡ä»¶docker01ã€docker02ä¹ŸåŒæ­¥å…±äº«ã€‚ * åˆ é™¤docker01ï¼Œdocker02å’Œdocker03ä¾æ—§ä¿æŒæ•°æ®åŒæ­¥å’Œèµ„æºå…±äº«ã€‚ * å®¹å™¨æŒ‚è½½ååŒå‘èµ„æºç»‘å®šï¼ŒåŒå‘æ‹·è´ã€‚ ## 14.2 Mysqlå®¹å™¨å®ç°æ•°æ®åŒæ­¥ 1ã€å¯åŠ¨mysql01,ç»‘å®šç«¯å£3306,é…ç½®å¯†ç `-e MYSQL_ROOT_PASSWORD=password`,æŒ‚è½½å·`-v` docker run -it --name mysql01 -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -v /etc/mysql/conf.d -v /var/lib/mysql mysql â€‹ 2ã€å¯åŠ¨mysql02ï¼ˆç»‘å®šç«¯å£3307ï¼‰ã€mysql03ï¼ˆç»‘å®šç«¯å£3308ï¼‰ # mysql02 docker run -it --name mysql02 --volumes-from mysql01 -p 3100:3306 -e MYSQL_ROOT_PASSWORD=123456 -v /etc/mysql/conf.d -v /var/lib/mysql mysql # mysql03 docker run -it --name mysql03 --volumes-from mysql01 -p 330:3306 -e MYSQL_ROOT_PASSWORD=123456 -v /etc/mysql/conf.d -v /var/lib/mysql mysql â€‹ 3ã€è¿æ¥æ•°æ®åº“æµ‹è¯• > ç»“è®º å®¹å™¨ä¹‹é—´çš„é…ç½®ä¿¡æ¯çš„ä¼ é€’ï¼Œæ•°æ®å·å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨ä¸ºæ­¢ã€‚ ä½†æ˜¯ä¸€æ—¦ä½ æŒä¹…åŒ–åˆ°äº†æœ¬åœ°ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæœ¬åœ°çš„æ•°æ®æ˜¯ä¸ä¼šåˆ é™¤çš„ï¼ ## 15ã€Dockerfileï¼ˆé‡ç‚¹ï¼‰ dockerfileæ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ–‡ä»¶ï¼å‘½ä»¤å‚æ•°è„šæœ¬ï¼ > æ„å»ºæ­¥éª¤ï¼š 1ã€ ç¼–å†™ä¸€ä¸ªdockerfileæ–‡ä»¶ 2ã€ docker build æ„å»ºç§°ä¸ºä¸€ä¸ªé•œåƒ 3ã€ docker runè¿è¡Œé•œåƒ 4ã€ docker pushå‘å¸ƒé•œåƒï¼ˆDockerHub ã€é˜¿é‡Œäº‘ä»“åº“ image-20230406190112408"></div><div class="image-meta"><span class="image-caption center">1ã€å¯åŠ¨çˆ¶å®¹å™¨docker01 docker run -it --name docker01 kuangshen/centos â€‹ 2ã€å¯åŠ¨å®¹å™¨docker02å¹¶æŒ‚è½½åˆ°çˆ¶å®¹å™¨docker01çš„å…±äº«å·,å‘½ä»¤`--volumes-from å®¹å™¨åˆ—è¡¨` docker run -it --name docker02 --volumes-from docker01 kuangshen/centos â€‹ 3ã€æŸ¥çœ‹å®¹å™¨è¿è¡Œ [root@192 ~]# docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES fa68f1afa235 kuangshen/centos /bin/sh -c /bin/bash 11 seconds ago Up 10 seconds docker02 eb991bf17656 kuangshen/centos /bin/sh -c /bin/bash 2 minutes ago Up 2 minutes docker01 â€‹ 4ã€åœ¨çˆ¶å®¹å™¨docker01çš„å…±äº«å·ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œçœ‹docker02å…±äº«å·çš„å˜åŒ– [root@eb991bf17656 /]# cd volume01 [root@eb991bf17656 volume01]# touch docker.txt â€‹ * docker02å®¹å™¨å†…æˆåŠŸçœ‹åˆ°docker01åˆ›å»ºçš„æ–‡ä»¶ [root@fa68f1afa235 /]# cd volume01 [root@fa68f1afa235 volume01]# ls docker.txt â€‹ 5ã€å†åŠ ä¸ªdocker03è¯•è¯•ï¼Œä¹Ÿæœ‰docker01åˆ›å»ºçš„æ–‡ä»¶ docker run -it --name docker03 --volumes-from docker01 kuangshen/centos â€‹ [root@e4ad9cb37d01 /]# cd volume01 [root@e4ad9cb37d01 volume01]# ls docker.txt â€‹ 6ã€å°ç»“ * docker03åˆ›å»ºçš„æ–‡ä»¶docker01ã€docker02ä¹ŸåŒæ­¥å…±äº«ã€‚ * åˆ é™¤docker01ï¼Œdocker02å’Œdocker03ä¾æ—§ä¿æŒæ•°æ®åŒæ­¥å’Œèµ„æºå…±äº«ã€‚ * å®¹å™¨æŒ‚è½½ååŒå‘èµ„æºç»‘å®šï¼ŒåŒå‘æ‹·è´ã€‚ ## 14.2 Mysqlå®¹å™¨å®ç°æ•°æ®åŒæ­¥ 1ã€å¯åŠ¨mysql01,ç»‘å®šç«¯å£3306,é…ç½®å¯†ç `-e MYSQL_ROOT_PASSWORD=password`,æŒ‚è½½å·`-v` docker run -it --name mysql01 -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -v /etc/mysql/conf.d -v /var/lib/mysql mysql â€‹ 2ã€å¯åŠ¨mysql02ï¼ˆç»‘å®šç«¯å£3307ï¼‰ã€mysql03ï¼ˆç»‘å®šç«¯å£3308ï¼‰ # mysql02 docker run -it --name mysql02 --volumes-from mysql01 -p 3100:3306 -e MYSQL_ROOT_PASSWORD=123456 -v /etc/mysql/conf.d -v /var/lib/mysql mysql # mysql03 docker run -it --name mysql03 --volumes-from mysql01 -p 330:3306 -e MYSQL_ROOT_PASSWORD=123456 -v /etc/mysql/conf.d -v /var/lib/mysql mysql â€‹ 3ã€è¿æ¥æ•°æ®åº“æµ‹è¯• > ç»“è®º å®¹å™¨ä¹‹é—´çš„é…ç½®ä¿¡æ¯çš„ä¼ é€’ï¼Œæ•°æ®å·å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨ä¸ºæ­¢ã€‚ ä½†æ˜¯ä¸€æ—¦ä½ æŒä¹…åŒ–åˆ°äº†æœ¬åœ°ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæœ¬åœ°çš„æ•°æ®æ˜¯ä¸ä¼šåˆ é™¤çš„ï¼ ## 15ã€Dockerfileï¼ˆé‡ç‚¹ï¼‰ dockerfileæ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ–‡ä»¶ï¼å‘½ä»¤å‚æ•°è„šæœ¬ï¼ > æ„å»ºæ­¥éª¤ï¼š 1ã€ ç¼–å†™ä¸€ä¸ªdockerfileæ–‡ä»¶ 2ã€ docker build æ„å»ºç§°ä¸ºä¸€ä¸ªé•œåƒ 3ã€ docker runè¿è¡Œé•œåƒ 4ã€ docker pushå‘å¸ƒé•œåƒï¼ˆDockerHub ã€é˜¿é‡Œäº‘ä»“åº“ image-20230406190112408</span></div></div><blockquote><p>å®˜æ–¹çš„é•œåƒ</p></blockquote><p>å®˜æ–¹ä»“åº“æœç´¢ï¼š<a href="https://hub.docker.com//_/centos">https://hub.docker.com/\_/centos</a></p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190118318.png" alt="image-20230406190118318"></div><div class="image-meta"><span class="image-caption center">image-20230406190118318</span></div></div><p>ç‚¹å‡»ç‰ˆæœ¬è·³è½¬åˆ°Github,çœ‹åˆ°dockerfileæ–‡ä»¶ï¼š</p><p> docker 99%çš„é•œåƒéƒ½æ˜¯ä»FROM scratchï¼ˆåŸºç¡€é•œåƒï¼‰å¼€å§‹-</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190600870.png" alt="image-20230406190600870"></div><div class="image-meta"><span class="image-caption center">image-20230406190600870</span></div></div><p>å¾ˆå¤šå®˜æ–¹é•œåƒéƒ½æ˜¯åŸºç¡€åŒ…ï¼Œå¾ˆå¤šåŠŸèƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè‡ªå·±æ­å»ºè‡ªå·±çš„é•œåƒï¼</p><p>å®˜æ–¹æ—¢ç„¶å¯ä»¥åˆ¶ä½œé•œåƒï¼Œé‚£æˆ‘ä»¬ä¹Ÿå¯ä»¥ï¼</p><h2 id="15-1-DockerFileæ„å»ºè¿‡ç¨‹"><a href="#15-1-DockerFileæ„å»ºè¿‡ç¨‹" class="headerlink" title="15.1 DockerFileæ„å»ºè¿‡ç¨‹"></a>15.1 DockerFileæ„å»ºè¿‡ç¨‹</h2><blockquote><p>DockerFileè„šæœ¬æ–‡ä»¶è¯­æ³•</p></blockquote><p>1ã€æ¯ä¸ªä¿ç•™å…³é”®å­—(æŒ‡ä»¤ï¼‰éƒ½æ˜¯å¿…é¡»æ˜¯å¤§å†™å­—æ¯</p><p>2ã€æ‰§è¡Œä»ä¸Šåˆ°ä¸‹é¡ºåº</p><p>3ã€#è¡¨ç¤ºæ³¨é‡Š</p><p>4ã€æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šåˆ›å»ºæäº¤ä¸€ä¸ªæ–°çš„é•œåƒæ›¾ï¼Œå¹¶æäº¤ï¼</p><blockquote><p>Dockerfile</p></blockquote><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190121577.png" alt="image-20230406190121577"></div><div class="image-meta"><span class="image-caption center">image-20230406190121577</span></div></div><p>Dockerfileæ˜¯é¢å‘å¼€å‘çš„ï¼Œæˆ‘ä»¬ä»¥åè¦å‘å¸ƒé¡¹ç›®ï¼Œåšé•œåƒï¼Œå°±éœ€è¦ç¼–å†™dockerfileæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ååˆ†ç®€å•ï¼</p><p>Dockeré•œåƒé€æ¸æˆä¼ä¸šäº¤ä»˜çš„æ ‡å‡†ï¼Œå¿…é¡»è¦æŒæ¡ï¼</p><p>DockerFileï¼šæ„å»ºæ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€åˆ‡çš„æ­¥éª¤ï¼Œæºä»£ç </p><p>DockerImagesï¼šé€šè¿‡DockerFileæ„å»ºç”Ÿæˆçš„é•œåƒï¼Œæœ€ç»ˆå‘å¸ƒå’Œè¿è¡Œäº§å“ã€‚</p><p>Dockerå®¹å™¨ï¼šå®¹å™¨å°±æ˜¯é•œåƒè¿è¡Œèµ·æ¥æä¾›æœåŠ¡ã€‚</p><blockquote><p>DockerFileçš„æŒ‡ä»¤</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">æŒ‡ä»¤è§£é‡Š</span><br><span class="line"></span><br><span class="line">FROMåŸºç¡€é•œåƒï¼Œä¸€åˆ‡ä»è¿™é‡Œå¼€å§‹æ„å»º</span><br><span class="line"></span><br><span class="line">MAINTAINERé•œåƒæ˜¯è°å†™çš„ï¼Œ å§“å+é‚®ç®±(ç¿»è¯‘ï¼šç»´æŠ¤äººå‘˜)</span><br><span class="line"></span><br><span class="line">RUNé•œåƒæ„å»ºçš„æ—¶å€™éœ€è¦è¿è¡Œçš„å‘½ä»¤</span><br><span class="line"></span><br><span class="line">ADDæ­¥éª¤ï¼Œtomcaté•œåƒï¼Œè¿™ä¸ªtomcatå‹ç¼©åŒ…ï¼æ·»åŠ å†…å®¹ æ·»åŠ åŒç›®å½•</span><br><span class="line"></span><br><span class="line">WORKDIRé•œåƒçš„å·¥ä½œç›®å½•</span><br><span class="line"></span><br><span class="line">VOLUMEæŒ‚è½½çš„ç›®å½•</span><br><span class="line"></span><br><span class="line">EXPOSEä¿ç•™ç«¯å£é…ç½®ï¼ˆå¼€æ”¾çš„ç«¯å£ï¼‰</span><br><span class="line"></span><br><span class="line">CMDæŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£ã€‚</span><br><span class="line"></span><br><span class="line">ENTRYPOINTæŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤ï¼ˆå…¥å£ç‚¹ï¼‰</span><br><span class="line"></span><br><span class="line">ONBUILDå½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿ DockerFile è¿™ä¸ªæ—¶å€™å°±ä¼šè¿è¡ŒONBUILDçš„æŒ‡ä»¤ï¼Œè§¦å‘æŒ‡ä»¤ã€‚</span><br><span class="line"></span><br><span class="line">COPYç±»ä¼¼ADDï¼Œå°†æˆ‘ä»¬æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­</span><br><span class="line"></span><br><span class="line">ENVæ„å»ºçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡ï¼</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="15-2-Dockerfileå®æˆ˜"><a href="#15-2-Dockerfileå®æˆ˜" class="headerlink" title="15.2 Dockerfileå®æˆ˜"></a>15.2 Dockerfileå®æˆ˜</h2><blockquote><p>åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„centosé•œåƒ</p></blockquote><p>å®˜æ–¹çš„centosè®¸å¤šå‘½ä»¤éƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„centosé•œåƒ</p><p>1ã€åˆ›å»ºå·¥ä½œç›®å½•</p><pre><code>[root@192 dockerfile]# pwd/home/dockerfile[root@192 dockerfile]# vim centos-dockerfile</code></pre><p>â€‹        </p><p>2ã€ç¼–å†™Dockerfileæ–‡ä»¶ (æ–‡ä»¶åï¼šcentos-dockerfile)</p><pre><code>FROM centosMAINTAINER root&lt;id_07221888@qq.com&gt;ENV MYPATH /usr/local # è®¾ç½®ç¯å¢ƒå˜é‡WORKDIR $MYPATH # é•œåƒçš„å·¥ä½œç›®å½•ï¼Œè¿›å…¥é•œåƒçš„åˆå§‹ç›®å½• # RUN: é•œåƒæ„å»ºçš„æ—¶å€™éœ€è¦è¿è¡Œçš„å‘½ä»¤ RUN yum -y install vim      # æ–°å¢ vim å·¥å…·RUN yum -y install net-tools # æ–°å¢ ç½‘ç»œ å·¥å…· æœ‰ifconfigå‘½ä»¤EXPOSE 80 # å¼€æ”¾çš„ç«¯å£CMD echo $MYPATH # CMDï¼šå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤CMD echo &quot;-----end----&quot;CMD /bin/bash </code></pre><p>â€‹        </p><pre><code>FROM centosMAINTAINER root&lt;id_07221888@qq.com&gt;ENV MYPATH /usr/local WORKDIR $MYPATH  RUN yum -y install vim      RUN yum -y install net-tools EXPOSE 80 CMD echo $MYPATH CMD echo &quot;-----end----&quot;CMD /bin/bash </code></pre><p>â€‹        </p><p>3ã€é€šè¿‡è¿™ä¸ªæ–‡ä»¶æ„å»ºé•œåƒ</p><pre><code># å‘½ä»¤ docker build -f æ–‡ä»¶è·¯å¾„ -t é•œåƒå:[tag] .docker build -f /home/dockerfile/centos-dockerfile  -t mycentos:0.1 .</code></pre><p>â€‹        </p><pre><code>Step 5/10 : RUN yum -y install vim ---&gt; Running in 64495d343335CentOS Linux 8 - AppStream                       68  B/s |  38  B     00:00    Error: Failed to download metadata for repo &#39;appstream&#39;: Cannot prepare internal mirrorlist: No URLs in mirrorlistThe command &#39;/bin/sh -c yum -y install vim&#39; returned a non-zero code: 1</code></pre><p>â€‹        </p><pre><code>å› ä¸ºæ²¡æœ‰vimè¿™ä¸ªrpmåŒ…ã€‚vimå‘½ä»¤åœ¨vim-ehancedè¿™ä¸ªåŒ…å†…ã€‚yumå¤±è´¥çš„å¯ä»¥åœ¨yumä¹‹å‰åŠ ä¸€ä¸ªæ›´æ–°è½¯ä»¶æº</code></pre><p>â€‹        </p><pre><code>systemctl stop firewalld.service                          # åœæ­¢é˜²ç«å¢™ </code></pre><p>â€‹        </p><p>4ã€å¯åŠ¨é•œåƒ</p><blockquote><p>åˆ—å‡ºé•œåƒçš„å˜æ›´å†å²</p></blockquote><pre><code>docker history é•œåƒ</code></pre><p>â€‹        </p><pre><code>[root@192 dockerfile]# docker history mysqlIMAGE          CREATED      CREATED BY                                      SIZE      COMMENTd1dc36cf8d9e   6 days ago   /bin/sh -c #(nop)  CMD [&quot;mysqld&quot;]               0B        &lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  EXPOSE 3306 33060            0B        &lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  ENTRYPOINT [&quot;docker-entryâ€¦   0B        &lt;missing&gt;      6 days ago   /bin/sh -c ln -s usr/local/bin/docker-entrypâ€¦   34B       &lt;missing&gt;      6 days ago   /bin/sh -c #(nop) COPY file:c112ec3a02a7b818â€¦   13.2kB    &lt;missing&gt;      6 days ago   /bin/sh -c #(nop) COPY dir:2e040acc386ebd23bâ€¦   1.12kB    &lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  VOLUME [/var/lib/mysql]      0B        &lt;missing&gt;      6 days ago   /bin/sh -c &#123;   echo mysql-community-server mâ€¦   384MB     &lt;missing&gt;      6 days ago   /bin/sh -c echo &#39;deb http://repo.mysql.com/aâ€¦   55B       &lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  ENV MYSQL_VERSION=8.0.28-â€¦   0B        &lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  ENV MYSQL_MAJOR=8.0          0B        &lt;missing&gt;      6 days ago   /bin/sh -c set -ex;  key=&#39;859BE8D7C586F53843â€¦   2.29kB    &lt;missing&gt;      6 days ago   /bin/sh -c apt-get update &amp;&amp; apt-get installâ€¦   52.2MB    &lt;missing&gt;      6 days ago   /bin/sh -c mkdir /docker-entrypoint-initdb.d    0B        &lt;missing&gt;      6 days ago   /bin/sh -c set -eux;  savedAptMark=&quot;$(apt-maâ€¦   4.06MB    &lt;missing&gt;      6 days ago   /bin/sh -c #(nop)  ENV GOSU_VERSION=1.14        0B        &lt;missing&gt;      6 days ago   /bin/sh -c apt-get update &amp;&amp; apt-get installâ€¦   9.34MB    &lt;missing&gt;      6 days ago   /bin/sh -c groupadd -r mysql &amp;&amp; useradd -r -â€¦   329kB     &lt;missing&gt;      7 days ago   /bin/sh -c #(nop)  CMD [&quot;bash&quot;]                 0B        &lt;missing&gt;      7 days ago   /bin/sh -c #(nop) ADD file:c51141702f568a28aâ€¦   69.3MB    </code></pre><p>â€‹        </p><p>ä½¿ç”¨æˆ‘ä»¬å¹³æ—¶æ‹¿åˆ°ä¸€ä¸ªé•œåƒï¼Œå¯ä»¥ç ”ç©¶ä¸€ä¸‹æ˜¯ä»€ä¹ˆåšçš„</p><h2 id="15-3-CMD-å’Œ-ENTRYPOINTåŒºåˆ«"><a href="#15-3-CMD-å’Œ-ENTRYPOINTåŒºåˆ«" class="headerlink" title="15.3 CMD å’Œ ENTRYPOINTåŒºåˆ«"></a>15.3 CMD å’Œ ENTRYPOINTåŒºåˆ«</h2><ul><li>CMD : æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£ã€‚(æ›¿ä»£çš„æ–¹å¼)</li><li>ENTRYPOINT : æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤ã€‚(è¿½åŠ çš„æ–¹å¼)</li></ul><blockquote><p>æµ‹è¯•cmd</p></blockquote><p>1ã€ç¼–å†™dockerfileæ–‡ä»¶</p><pre><code>[root@192 dockerfile]# cat dockerfile-test-cmdFROM centosCMD [&quot;ls&quot;,&quot;-a&quot;]</code></pre><p>â€‹        </p><p>2ã€ æ„å»ºé•œåƒ</p><pre><code>docker build  -f dockerfile-test-cmd -t cmd-test:0.1 .</code></pre><p>â€‹        </p><pre><code>[root@192 dockerfile]# docker build  -f dockerfile-test-cmd -t cmd-test:0.1 .Sending build context to Docker daemon  3.072kBStep 1/2 : FROM centos ---&gt; 5d0da3dc9764Step 2/2 : CMD [&quot;ls&quot;,&quot;-a&quot;] ---&gt; Running in 462edab225f4Removing intermediate container 462edab225f4 ---&gt; 3a12f3d5b2a5Successfully built 3a12f3d5b2a5Successfully tagged cmd-test:0.1</code></pre><p>â€‹<br>â€‹        </p><p>3ã€è¿è¡Œé•œåƒ</p><pre><code>[root@192 dockerfile]# docker run cmd-test:0.1....dockerenvbindevetc# .. # åˆ—å‡ºäº† å®¹å™¨å†… æ ¹ç›®å½•æ‰€æœ‰æ–‡ä»¶å¤¹</code></pre><p>â€‹        </p><p>4ã€æƒ³è¿½åŠ ä¸€ä¸ªå‘½ä»¤ -l æˆä¸ºls -al</p><pre><code>docker run cmd-test:0.1 ls -al</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker run cmd-test:0.1 ls -altotal 0drwxr-xr-x.   1 root root   6 Feb  2 13:53 .drwxr-xr-x.   1 root root   6 Feb  2 13:53 ..-rwxr-xr-x.   1 root root   0 Feb  2 13:53 .dockerenvlrwxrwxrwx.   1 root root   7 Nov  3  2020 bin -&gt; usr/bindrwxr-xr-x.   5 root root 340 Feb  2 13:53 dev# ...</code></pre><p>â€‹        </p><blockquote><p>æµ‹è¯•ENTRYPOINT</p></blockquote><p>1ã€ç¼–å†™dockerfileæ–‡ä»¶</p><pre><code>vim dockerfile-test-entrypointFROM centosENTRYPOINT [&quot;ls&quot;,&quot;-a&quot;]</code></pre><p>â€‹        </p><p>2ã€æ„å»ºé•œåƒ</p><pre><code>docker build  -f dockerfile-test-entrypoint -t entrypoint-test:0.1 .</code></pre><p>â€‹        </p><pre><code>[root@192 dockerfile]# docker imagesREPOSITORY        TAG       IMAGE ID       CREATED         SIZEentrypoint-test   0.1       390f47c46bdd   9 seconds ago   231MB</code></pre><p>â€‹        </p><p>3ã€æƒ³è¿½åŠ ä¸€ä¸ªå‘½ä»¤ -l</p><pre><code>docker run entrypoint-test:0.1 -l</code></pre><p>â€‹        </p><ul><li><p>æˆåŠŸ</p><p>[root@192 dockerfile]# docker run entrypoint-test:0.1 -l<br>total 0<br>drwxr-xr-x.   1 root root   6 Feb  2 13:59 .<br>drwxr-xr-x.   1 root root   6 Feb  2 13:59 ..<br>-rwxr-xr-x.   1 root root   0 Feb  2 13:59 .dockerenv<br>lrwxrwxrwx.   1 root root   7 Nov  3  2020 bin -&gt; usr&#x2F;bin</p><h1 id="â€¦-1"><a href="#â€¦-1" class="headerlink" title="â€¦"></a>â€¦</h1><p>â€‹</p></li></ul><h2 id="15-4-Dockerfileåˆ¶ä½œtomcaté•œåƒ"><a href="#15-4-Dockerfileåˆ¶ä½œtomcaté•œåƒ" class="headerlink" title="15.4 Dockerfileåˆ¶ä½œtomcaté•œåƒ"></a>15.4 Dockerfileåˆ¶ä½œtomcaté•œåƒ</h2><p>1ã€å‡†å¤‡é•œåƒæ–‡ä»¶</p><p>å‡†å¤‡tomcat å’Œ jdkåˆ°å½“å‰ç›®å½•ï¼Œç¼–å†™å¥½README</p><p><a href="https://tomcat.apache.org/download-90.cgi">Apache TomcatÂ® - Apache Tomcat 9 Software Downloads</a></p><pre><code>[root@192 tomcat]# lsapache-tomcat-9.0.58.tar.gz  jdk-8u60-linux-x64.tar.gz[root@192 tomcat]# pwd/root/æ¡Œé¢/Kuang/tomcat</code></pre><p>â€‹        </p><ul><li><p>åˆ›å»ºreadme.txtæ–‡ä»¶</p><p>[root@192 tomcat]# ls<br>apache-tomcat-9.0.58.tar.gz  Dockerfile  jdk-8u60-linux-x64.tar.gz  readme.txt</p><p>â€‹</p></li></ul><p>2ã€ç¼–å†™dokerfileï¼Œå®˜æ–¹å‘½å<code>Dockerfile</code>,build ä¼šè‡ªåŠ¨å¯»æ‰¾,å°±ä¸ç”¨-f æŒ‡å®šäº†</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190440376.png" alt="image-20230406190440376"></div><div class="image-meta"><span class="image-caption center">image-20230406190440376</span></div></div><pre><code>FROM centos MAINTAINER root&lt;id_07221888@qq.com&gt;COPY readme.txt /usr/local/readme.txt #å¤åˆ¶æ–‡ä»¶ADD jdk-8u60-linux-x64.tar.gz /usr/local/ #å¤åˆ¶è§£å‹ADD apache-tomcat-9.0.58.tar.gz /usr/local/ ENV MYPATH /usr/local #è®¾ç½®ç¯å¢ƒå˜é‡WORKDIR $MYPATH #è®¾ç½®å·¥ä½œç›®å½•ENV JAVA_HOME /usr/local/jdk1.8.0_60 #è®¾ç½®ç¯å¢ƒå˜é‡ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools/jarENV CATALINA_HOME /usr/local/apache-tomcat-9.0.58 #è®¾ç½®ç¯å¢ƒå˜é‡ENV CATALINA_BASH /usr/local/apache-tomcat-9.0.58ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/bin #è®¾ç½®ç¯å¢ƒå˜é‡ åˆ†éš”ç¬¦æ˜¯ï¼šEXPOSE 8080 #è®¾ç½®æš´éœ²çš„ç«¯å£CMD /usr/local/apache-tomcat-9.0.58/bin/startup.sh &amp;&amp; tail -F /usr/local/apache-tomcat-9.0.58/bin/logs/catalina.out # è®¾ç½®é»˜è®¤å‘½ä»¤</code></pre><p>â€‹        </p><pre><code>FROM centos #MAINTAINER cheng&lt;1204598429@qq.com&gt;COPY README /usr/local/README #å¤åˆ¶æ–‡ä»¶ADD jdk-8u231-linux-x64.tar.gz /usr/local/ #å¤åˆ¶è§£å‹ADD apache-tomcat-9.0.35.tar.gz /usr/local/ #å¤åˆ¶è§£å‹RUN yum -y install vimENV MYPATH /usr/local #è®¾ç½®ç¯å¢ƒå˜é‡WORKDIR $MYPATH #è®¾ç½®å·¥ä½œç›®å½•ENV JAVA_HOME /usr/local/jdk1.8.0_231 #è®¾ç½®ç¯å¢ƒå˜é‡ENV CATALINA_HOME /usr/local/apache-tomcat-9.0.35 #è®¾ç½®ç¯å¢ƒå˜é‡ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib #è®¾ç½®ç¯å¢ƒå˜é‡ åˆ†éš”ç¬¦æ˜¯ï¼šEXPOSE 8080 #è®¾ç½®æš´éœ²çš„ç«¯å£CMD /usr/local/apache-tomcat-9.0.35/bin/startup.sh &amp;&amp; tail -F /usr/local/apache-tomcat-9.0.35/logs/catalina.out # è®¾ç½®é»˜è®¤å‘½ä»¤</code></pre><p>â€‹<br>â€‹        </p><p>3ã€æ„é€ é•œåƒ</p><pre><code>docker build  -t diytomcat .</code></pre><p>â€‹        </p><p><strong>æ„å»ºå¤±è´¥</strong></p><p>4ã€è¿è¡Œé•œåƒ</p><pre><code>docker run -d -p 8080:8080 --name tomcat01 -v /home/kuangshen/build/tomcat/test:/usr/local/apache-tomcat-9.0.35/webapps/test -v /home/kuangshen/build/tomcat/tomcatlogs/:/usr/local/apache-tomcat-9.0.35/logs mytomcat:0.1</code></pre><p>â€‹        </p><p>5ã€è®¿é—®æµ‹è¯•</p><p>6ã€å‘å¸ƒé¡¹ç›®(ç”±äºåšäº†å·æŒ‚è½½ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨æœ¬åœ°ç¼–å†™é¡¹ç›®å°±å¯ä»¥å‘å¸ƒäº†ï¼)</p><p>å‘ç°ï¼šé¡¹ç›®éƒ¨ç½²æˆåŠŸï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼</p><p>æˆ‘ä»¬ä»¥åå¼€å‘çš„æ­¥éª¤ï¼šéœ€è¦æŒæ¡Dockerfileçš„ç¼–å†™ï¼æˆ‘ä»¬ä¹‹åçš„ä¸€åˆ‡éƒ½æ˜¯ä½¿ç”¨dockeré•œåƒæ¥å‘å¸ƒè¿è¡Œï¼</p><h2 id="15-5-å‘å¸ƒé•œåƒåˆ°DockerHub-å¸¸ç”¨"><a href="#15-5-å‘å¸ƒé•œåƒåˆ°DockerHub-å¸¸ç”¨" class="headerlink" title="15.5 å‘å¸ƒé•œåƒåˆ°DockerHub(å¸¸ç”¨)"></a>15.5 å‘å¸ƒé•œåƒåˆ°DockerHub(å¸¸ç”¨)</h2><p>1ã€ç™»å½•è¿œç¨‹ä»“åº“ï¼ˆ <a href="https://hub.docker.com/%EF%BC%89">https://hub.docker.com/ï¼‰</a></p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190151990.png" alt="image-20230406190151990"></div><div class="image-meta"><span class="image-caption center">image-20230406190151990</span></div></div><p>2ã€ç»ˆç«¯ç™»å½•</p><pre><code>[root@192 ~]# docker login --helpUsage:  docker login [OPTIONS] [SERVER]ç™»å½•åˆ°Dockeræ³¨å†Œè¡¨ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šæœåŠ¡å™¨ï¼Œåˆ™ç”±å®ˆæŠ¤è¿›ç¨‹å®šä¹‰é»˜è®¤å€¼ã€‚Options:  -p, --password string   Password      --password-stdin    ä»stdinè·å–å¯†ç   -u, --username string   Username</code></pre><p>â€‹        </p><p>3ã€ç™»å½•æˆåŠŸ</p><pre><code>docker login -u ã€ä½ çš„ç”¨æˆ·åã€‘ -p ã€ä½ çš„å¯†ç ã€‘</code></pre><p>â€‹        </p><pre><code>[root@192 ~]#  docker login -u ã€ä½ çš„ç”¨æˆ·åã€‘ -p ã€ä½ çš„å¯†ç ã€‘WARNING! Using --password via the CLI is insecure. Use --password-stdin.WARNING! Your password will be stored unencrypted in /root/.docker/config.json.Configure a credential helper to remove this warning. Seehttps://docs.docker.com/engine/reference/commandline/login/#credentials-storeLogin Succeeded</code></pre><p>â€‹        </p><p>4ã€æäº¤ pushé•œåƒ</p><pre><code>[root@192 ~]# docker imagesREPOSITORY        TAG       IMAGE ID       CREATED        SIZEcmd-test          0.1       3a12f3d5b2a5   18 hours ago   231MB# ...</code></pre><p>â€‹        </p><p>(1) å…ˆæ‰“æ ‡ç­¾</p><pre><code># docker tag é•œåƒid ä½ çš„è´¦æˆ·å/é•œåƒä»“åº“å:tagådocker tag 3a12f3d5b2a5 dockerywl/cmd-test:0.1</code></pre><p>â€‹        </p><p>(2) å†æäº¤ pushé•œåƒ</p><pre><code># docker push ä½œè€…/é•œåƒ:TAG(ç‰ˆæœ¬)docker push dockerywl/cmd-test:0.1</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker push dockerywl/cmd-test:0.1The push refers to repository [docker.io/dockerywl/cmd-test]74ddd0ec08fa: Pushing [================&gt;                                  ]  77.74MB/231.3MB</code></pre><p>â€‹        </p><p>(3) pushæˆåŠŸ</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190157116.png" alt="image-20230406190157116"></div><div class="image-meta"><span class="image-caption center">image-20230406190157116</span></div></div><blockquote><p>å‘å¸ƒåˆ°é˜¿é‡Œäº‘é•œåƒæœåŠ¡ä¸Š</p></blockquote><p>çœ‹å®˜ç½‘ å¾ˆè¯¦ç»†<a href="https://cr.console.aliyun.com/repository/">https://cr.console.aliyun.com/repository/</a></p><h2 id="15-6-ä¿å­˜ä¼ è¾“"><a href="#15-6-ä¿å­˜ä¼ è¾“" class="headerlink" title="15.6 ä¿å­˜ä¼ è¾“"></a>15.6 ä¿å­˜ä¼ è¾“</h2><p>ä¿å­˜åæ‹·è´çš„Uç›˜äº¤ç»™åˆ«äººä½¿ç”¨</p><p>1ã€ä¿å­˜(å‹ç¼©)æˆbackup.tar</p><pre><code>[root@192 ~]# docker save --helpUsage:  docker save [OPTIONS] IMAGE [IMAGE...]å°†ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒä¿å­˜åˆ°tarå­˜æ¡£æ–‡ä»¶(é»˜è®¤æƒ…å†µä¸‹æµåˆ°STDOUT)Options:  -o, --output string   å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œä¸æ˜¯STDOUT</code></pre><p>â€‹        </p><pre><code>docker save é•œåƒ -o æ–‡ä»¶å</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker save redis -o backup.tar [root@192 ~]# ls backup.tar  # æˆåŠŸ</code></pre><p>â€‹        </p><p>2ã€åŠ è½½ï¼ˆè§£å‹ï¼‰é•œåƒå‹ç¼©æ–‡ä»¶backup.tar</p><pre><code>[root@192 ~]# docker load --helpUsage:  docker load [OPTIONS]ä»tarå­˜æ¡£æ–‡ä»¶æˆ–STDINåŠ è½½é•œåƒOptions:  -i, --input string   ä»tarå­˜æ¡£æ–‡ä»¶è¯»å–ï¼Œè€Œä¸æ˜¯STDIN  -q, --quiet          æŠ‘åˆ¶è´Ÿè½½è¾“å‡º</code></pre><p>â€‹        </p><pre><code>docker load -i backup.tar</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker load -i backup.tar92b6c42121d8: Loading layer [==================================================&gt;]  338.4kB/338.4kB65845b69eb5c: Loading layer [==================================================&gt;]  4.274MB/4.274MB7048818d1657: Loading layer [==================================================&gt;]   27.8MB/27.8MBc61d5cbf8621: Loading layer [==================================================&gt;]  2.048kB/2.048kBff503dae4eb6: Loading layer [==================================================&gt;]  3.584kB/3.584kBLoaded image: redis:latest # æˆåŠŸ</code></pre><p>â€‹        </p><h2 id="15-7-Dockeræ‰€æœ‰æµç¨‹å°ç»“ï¼ˆé‡ç‚¹ï¼‰"><a href="#15-7-Dockeræ‰€æœ‰æµç¨‹å°ç»“ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="15.7 Dockeræ‰€æœ‰æµç¨‹å°ç»“ï¼ˆé‡ç‚¹ï¼‰"></a>15.7 Dockeræ‰€æœ‰æµç¨‹å°ç»“ï¼ˆé‡ç‚¹ï¼‰</h2><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190204844.png" alt="image-20230406190204844"></div><div class="image-meta"><span class="image-caption center">image-20230406190204844</span></div></div><h2 id="å®¹å™¨å†…å®‰è£…å·¥å…·"><a href="#å®¹å™¨å†…å®‰è£…å·¥å…·" class="headerlink" title="= å®¹å™¨å†…å®‰è£…å·¥å…· &#x3D;"></a>= å®¹å™¨å†…å®‰è£…å·¥å…· &#x3D;</h2><p>tomcat å®¹å™¨</p><p><a href="https://www.runoob.com/linux/linux-comm-apt.html">Linux apt å‘½ä»¤ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p><pre><code># å…ˆæ‰§è¡Œapt update # å®‰è£… ip æŸ¥çœ‹å·¥å…·apt install -y iproute2# å®‰è£… ping å‘½ä»¤å·¥å…·apt-get install inetutils-ping# å®‰è£… vim å‘½ä»¤å·¥å…·apt install vimapt update &amp;&amp;  apt install -y iproute2 &amp;&amp; apt-get install inetutils-ping</code></pre><p>â€‹        </p><h2 id="16ã€Dockerç½‘ç»œè¯¦è§£"><a href="#16ã€Dockerç½‘ç»œè¯¦è§£" class="headerlink" title="16ã€Dockerç½‘ç»œè¯¦è§£"></a>16ã€Dockerç½‘ç»œè¯¦è§£</h2><p>å®¹å™¨ç¼–æ’ã€é›†ç¾¤éƒ¨ç½²</p><h2 id="16-1-ç†è§£Docker-0-ä¸æ¨èä½¿ç”¨"><a href="#16-1-ç†è§£Docker-0-ä¸æ¨èä½¿ç”¨" class="headerlink" title="16.1 ç†è§£Docker 0(ä¸æ¨èä½¿ç”¨)"></a>16.1 ç†è§£Docker 0(ä¸æ¨èä½¿ç”¨)</h2><p>ä¸æ¨èä½¿ç”¨ï¼šDocker 0 ä¸æ”¯æŒ ping å®¹å™¨å</p><blockquote><p>æ¸…ç©ºæ‰€æœ‰ç¯å¢ƒ</p></blockquote><pre><code># åˆ é™¤æ‰€æœ‰é•œåƒdocker rmi -f $(docker images)# åˆ é™¤æ‰€æœ‰çš„å®¹å™¨docker rm -f $(docker ps -aq)   </code></pre><p>â€‹        </p><pre><code>[root@192 ~]# ifconfig# docker0åœ°å€ æœ‰è·¯ç”±å™¨çš„åŠŸèƒ½ã€‚docker0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500        inet 172.17.0.1  netmask 255.255.0.0  broadcast 172.17.255.255        # ...# æœ¬æœºåœ°å€ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.64.130  netmask 255.255.255.0  broadcast 192.168.64.255        # ...# æœ¬æœºå›ç¯åœ°å€lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536        inet 127.0.0.1  netmask 255.0.0.0        # ...</code></pre><p>â€‹        </p><blockquote><p>Linuxä¸»æœº ä¸ å®¹å™¨ äº’ç›¸pingé€š</p></blockquote><p>1ã€æ–°å»ºå®¹å™¨</p><pre><code>docker pull tomcatdocker run -it -d -P --name tomcat01 tomcat /bin/bash</code></pre><p>â€‹        </p><p>2ã€è¿›å…¥ä¸ºå®¹å™¨å®‰è£… ip æŸ¥çœ‹å·¥å…·</p><pre><code>docker attath å®¹å™¨id# å¸¸ç”¨apt update &amp;&amp; apt install -y iproute2</code></pre><p>â€‹        </p><p>3ã€æŸ¥çœ‹å®¹å™¨å†…ç½‘ip</p><p> dockeråˆ†é…çš„å®¹å™¨å†…ç½‘ip ï¼š 172.17.0.2</p><pre><code>root@138f304dfa38:/usr/local/tomcat# ip addr1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00    inet 127.0.0.1/8 scope host lo       valid_lft forever preferred_lft forever       # veth-pairæŠ€æœ¯ 6 ä¸  7 æˆå¯¹6: eth0@if7: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default     link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0    inet 172.17.0.2/16 brd 172.17.255.255 scope global eth0       valid_lft forever preferred_lft forever</code></pre><p>â€‹        </p><p>4ã€å¯ä»¥pingé€š (æ¯•ç«Ÿtomcatæä¾›çš„æœåŠ¡å¤–ç½‘éƒ½å¯ä»¥è®¿é—®ï¼Œè‚¯å®špingçš„é€š)</p><pre><code>[root@192 ~]# ping 172.17.0.2PING 172.17.0.2 (172.17.0.2) 56(84) bytes of data.64 bytes from 172.17.0.2: icmp_seq=1 ttl=64 time=0.048 ms64 bytes from 172.17.0.2: icmp_seq=2 ttl=64 time=0.052 ms64 bytes from 172.17.0.2: icmp_seq=3 ttl=64 time=0.085 ms^C--- 172.17.0.2 ping statistics ---3 packets transmitted, 3 received, 0% packet loss, time 2001msrtt min/avg/max/mdev = 0.048/0.061/0.085/0.018 ms</code></pre><p>â€‹        </p><p>5ã€è¿›å…¥ä¸ºå®¹å™¨å®‰è£… ping å‘½ä»¤å·¥å…·</p><pre><code>apt-get install inetutils-ping</code></pre><p>â€‹        </p><p>6ã€ å®¹å™¨ pingé€š Linuxä¸»æœº</p><pre><code>root@138f304dfa38:/usr/local/tomcat# ping 192.168.64.130PING 192.168.64.130 (192.168.64.130): 56 data bytes64 bytes from 192.168.64.130: icmp_seq=0 ttl=64 time=0.294 ms64 bytes from 192.168.64.130: icmp_seq=1 ttl=64 time=0.125 ms^C--- 192.168.64.130 ping statistics ---7 packets transmitted, 7 packets received, 0% packet lossround-trip min/avg/max/stddev = 0.125/0.181/0.294/0.056 ms</code></pre><p>â€‹        </p><blockquote><p>åŸç†</p></blockquote><p>1ã€æˆ‘ä»¬æ¯å¯åŠ¨ä¸€ä¸ªdockerå®¹å™¨ï¼Œdockerå°±ä¼šç»™dockerå®¹å™¨åˆ†é…ä¸€ä¸ªipï¼Œæˆ‘ä»¬åªè¦æŒ‰ç…§äº†dockerï¼Œå°±ä¼šæœ‰ä¸€ä¸ªdocker0æ¡¥æ¥æ¨¡å¼ï¼Œä½¿ç”¨çš„æŠ€æœ¯æ˜¯veth-pairæŠ€æœ¯ï¼</p><p><a href="https://www.cnblogs.com/bakari/p/10613710.html">https://www.cnblogs.com/bakari/p/10613710.html</a></p><p>veth-pair å°±æ˜¯ä¸€å¯¹çš„è™šæ‹Ÿè®¾å¤‡æ¥å£ï¼Œå’Œ tap&#x2F;tun è®¾å¤‡ä¸åŒçš„æ˜¯ï¼Œå®ƒéƒ½æ˜¯<strong>æˆå¯¹</strong>å‡ºç°çš„ã€‚ä¸€ç«¯è¿ç€åè®®æ ˆï¼Œä¸€ç«¯å½¼æ­¤ç›¸è¿ç€ã€‚</p><p>ï¼ˆæˆå¯¹ï¼šLinux ä¸»æœºç½‘å¡ 6,7æˆå¯¹ï¼Œåˆ™å®¹å™¨ç½‘å¡7ï¼Œ6æˆå¯¹ï¼‰</p><p>Linux ä¸»æœº å†æ¬¡æ‰§è¡Œ <code>ip addr</code>ï¼Œå¤šäº†ä¸ªç½‘å¡</p><pre><code>[root@192 ~]# ip addr1: lo: # ...2: ens33: # ...3: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default     link/ether 02:42:a4:0b:89:6b brd ff:ff:ff:ff:ff:ff    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0     # ...# å¤šäº†ä¸ªç½‘å¡7: veth568cc5e@if6: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default     link/ether de:55:c0:b4:58:42 brd ff:ff:ff:ff:ff:ff link-netnsid 0    inet6 fe80::dc55:c0ff:feb4:5842/64 scope link        valid_lft forever preferred_lft forever</code></pre><p>â€‹        </p><p>2ã€å†å¯åŠ¨ä¸€ä¸ªtocmat02å®¹å™¨ï¼Œæ‰§è¡Œ <code>ip addr</code>ï¼Œåˆå¤šäº†ä¸ªç½‘å¡</p><pre><code>docker run -it -d -P --name tomcat02 tomcat</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# ip addr# ...# veth-pairæŠ€æœ¯ 7 ä¸  6 æˆå¯¹ï¼ŒLinuxä¸»æœºåˆ™ä¸º6 ä¸ 7æˆå¯¹7: veth568cc5e@if6: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default     link/ether de:55:c0:b4:58:42 brd ff:ff:ff:ff:ff:ff link-netnsid 0    inet6 fe80::dc55:c0ff:feb4:5842/64 scope link        valid_lft forever preferred_lft forever# veth-pairæŠ€æœ¯ 9 ä¸  8 æˆå¯¹9: veth7668013@if8: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default     link/ether 7a:c2:eb:86:ae:9f brd ff:ff:ff:ff:ff:ff link-netnsid 1    inet6 fe80::78c2:ebff:fe86:ae9f/64 scope link        valid_lft forever preferred_lft forever</code></pre><p>â€‹        </p><p>3ã€è¿›å…¥tocmat02å®¹å™¨ï¼Œä¸ºå®¹å™¨å®‰è£… ip æŸ¥çœ‹å·¥å…·,ip:172.17.0.2</p><pre><code>apt update &amp;&amp; apt install -y iproute2 </code></pre><p>â€‹        </p><pre><code>root@443a02110963:/usr/local/tomcat# ip addr1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00    inet 127.0.0.1/8 scope host lo       valid_lft forever preferred_lft forever10: eth0@if11: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default     link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0    inet 172.17.0.2/16 brd 172.17.255.255 scope global eth0       valid_lft forever preferred_lft foreverroot@443a02110963:/usr/local/tomcat# </code></pre><p>â€‹        </p><p>4ã€tomcat01ä¸tocmat02 å¯ä»¥ç›¸äº’ping é€š</p><pre><code>root@443a02110963:/usr/local/tomcat# ping 172.17.0.2PING 172.17.0.2 (172.17.0.2): 56 data bytes64 bytes from 172.17.0.2: icmp_seq=0 ttl=64 time=0.129 ms64 bytes from 172.17.0.2: icmp_seq=1 ttl=64 time=0.279 ms64 bytes from 172.17.0.2: icmp_seq=2 ttl=64 time=0.142 ms^C--- 172.17.0.2 ping statistics ---3 packets transmitted, 3 packets received, 0% packet lossround-trip min/avg/max/stddev = 0.129/0.183/0.279/0.068 ms</code></pre><p>â€‹        </p><blockquote><p>ç»“è®º</p></blockquote><p>tomcat01å’Œtomcat02å…¬ç”¨ä¸€ä¸ªè·¯ç”±å™¨ï¼Œdocker0ã€‚</p><p>æ‰€æœ‰çš„å®¹å™¨ä¸æŒ‡å®šç½‘ç»œçš„æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯docker0è·¯ç”±çš„ï¼Œdockerä¼šç»™æˆ‘ä»¬çš„å®¹å™¨åˆ†é…ä¸€ä¸ªé»˜è®¤çš„å¯ç”¨ipã€‚</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190216290.png" alt="image-20230406190216290"></div><div class="image-meta"><span class="image-caption center">image-20230406190216290</span></div></div><p>Dockerä½¿ç”¨çš„æ˜¯Linuxçš„æ¡¥æ¥ï¼Œå®¿ä¸»æœºæ˜¯ä¸€ä¸ªDockerå®¹å™¨çš„ç½‘æ¡¥ docker0</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190219194.png" alt="image-20230406190219194"></div><div class="image-meta"><span class="image-caption center">image-20230406190219194</span></div></div><p>Dockerä¸­æ‰€æœ‰ç½‘ç»œæ¥å£éƒ½æ˜¯è™šæ‹Ÿçš„ï¼Œè™šæ‹Ÿçš„è½¬å‘æ•ˆç‡é«˜ï¼ˆå†…ç½‘ä¼ é€’æ–‡ä»¶ï¼‰</p><p><strong>åªè¦å®¹å™¨åˆ é™¤ï¼Œå¯¹åº”çš„ç½‘æ¡¥ä¸€å¯¹å°±æ²¡äº†ï¼</strong></p><h2 id="16-2-â€“linkï¼ˆä¸æ¨èä½¿ç”¨ï¼‰"><a href="#16-2-â€“linkï¼ˆä¸æ¨èä½¿ç”¨ï¼‰" class="headerlink" title="16.2 â€“linkï¼ˆä¸æ¨èä½¿ç”¨ï¼‰"></a>16.2 â€“linkï¼ˆä¸æ¨èä½¿ç”¨ï¼‰</h2><blockquote><p>æ€è€ƒä¸€ä¸ªåœºæ™¯</p></blockquote><p> æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªå¾®æœåŠ¡ï¼Œdatabase url&#x3D;ip: é¡¹ç›®ä¸é‡å¯ï¼Œæ•°æ®åº“ipæ¢äº†ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡åå­—æ¥è¿›è¡Œè®¿é—®å®¹å™¨ï¼Ÿï¼ˆé«˜å¯ç”¨ï¼‰</p><p> <strong>å®ç°ping é€š å®¹å™¨å</strong></p><blockquote><p>â€“link ä½œç”¨</p></blockquote><p> docker run â€“linkå¯ä»¥ç”¨æ¥é“¾æ¥2ä¸ªå®¹å™¨ï¼Œä½¿å¾—æºå®¹å™¨ï¼ˆè¢«é“¾æ¥çš„å®¹å™¨ï¼‰å’Œæ¥æ”¶å®¹å™¨ï¼ˆä¸»åŠ¨å»é“¾æ¥çš„å®¹å™¨ï¼‰ä¹‹é—´å¯ä»¥äº’ç›¸é€šä¿¡ï¼Œå¹¶ä¸”æ¥æ”¶å®¹å™¨å¯ä»¥è·å–æºå®¹å™¨çš„ä¸€äº›æ•°æ®ï¼Œå¦‚æºå®¹å™¨çš„ç¯å¢ƒå˜é‡ã€‚</p><blockquote><p>æµ‹è¯•</p></blockquote><p>1ã€å‡†å¤‡centos01ã€centos02</p><pre><code>$ docker run -it -d --name centos01 centos $ docker run -it -d --name centos02 centos </code></pre><p>â€‹        </p><p>2ã€å®ç°pingä¸é€šå®¹å™¨å</p><pre><code>$ docker exec -it centos02 ping centos01 </code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker exec -it centos02 ping centos01 ping: centos01: Name or service not known</code></pre><p>â€‹        </p><p>3ã€è¿è¡Œä¸€ä¸ªtomcat03 ,åŠ ä¸Šå‚æ•°<code>--link centos02</code>ï¼Œè¿æ¥centos02</p><pre><code>$ docker run -it --name centos03 --link centos02 centos /bin/bash</code></pre><p>â€‹        </p><pre><code>[root@a04540580e1b /]# ping centos02PING centos02 (172.17.0.3) 56(84) bytes of data.64 bytes from centos02 (172.17.0.3): icmp_seq=1 ttl=64 time=0.118 ms64 bytes from centos02 (172.17.0.3): icmp_seq=2 ttl=64 time=0.110 ms^C--- centos02 ping statistics ---2 packets transmitted, 2 received, 0% packet loss, time 1003msrtt min/avg/max/mdev = 0.110/0.114/0.118/0.004 ms[root@a04540580e1b /]# </code></pre><p>â€‹        </p><p>4ã€ç”¨centos03 ping centos02 å¯ä»¥pingé€š</p><pre><code>docker exec -it centos03 ping centos02</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker exec -it centos03 ping centos02PING centos02 (172.17.0.3) 56(84) bytes of data.64 bytes from centos02 (172.17.0.3): icmp_seq=1 ttl=64 time=0.071 ms64 bytes from centos02 (172.17.0.3): icmp_seq=2 ttl=64 time=0.154 ms^C--- centos02 ping statistics ---2 packets transmitted, 2 received, 0% packet loss, time 1003msrtt min/avg/max/mdev = 0.071/0.112/0.154/0.042 ms</code></pre><p>â€‹        </p><p>ä½†æ˜¯ç”¨tomcat02 ping tomcat03 pingä¸é€š</p><h2 id="16-3-Dockerç½‘ç»œæ¢ç©¶"><a href="#16-3-Dockerç½‘ç»œæ¢ç©¶" class="headerlink" title="16.3 Dockerç½‘ç»œæ¢ç©¶"></a>16.3 Dockerç½‘ç»œæ¢ç©¶</h2><p><code>docker network</code></p><pre><code>[root@192 ~]# docker network lsNETWORK ID     NAME      DRIVER    SCOPE297f07c51979   bridge    bridge    local # bridge:æ¡¥æ¥ docker087a8f8309bfa   host      host      local51b67872ea20   none      null      local</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker network --helpUsage:  docker network COMMANDManage networks  # ç®¡ç†ç½‘ç»œCommands:  connect     # å°†å®¹å™¨è¿æ¥åˆ°ç½‘ç»œ  create      # åˆ›å»ºç½‘ç»œ  disconnect  # æ–­å¼€ä¸€ä¸ªå®¹å™¨ä¸ç½‘ç»œçš„è¿æ¥  inspect     # æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œçš„è¯¦ç»†ä¿¡æ¯  ls          # ç½‘ç»œåˆ—è¡¨  prune       # åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„ç½‘ç»œ  rm          # åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œ</code></pre><p>â€‹        </p><p>1ã€æŸ¥çœ‹docker0çš„ç½‘ç»œä¿¡æ¯</p><pre><code>docker network inspect 297f07c51979 </code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker network inspect 297f07c51979 [    &#123;        &quot;Name&quot;: &quot;bridge&quot;,        &quot;Id&quot;: &quot;297f07c5197942c2a4bc867abd31c61f6f804f1b7fc08b6e7b3da2839c77bc34&quot;,        &quot;Created&quot;: &quot;2022-02-03T17:50:16.517397962+08:00&quot;,        &quot;Scope&quot;: &quot;local&quot;,        &quot;Driver&quot;: &quot;bridge&quot;,        &quot;EnableIPv6&quot;: false,        &quot;IPAM&quot;: &#123;            &quot;Driver&quot;: &quot;default&quot;, # default            &quot;Options&quot;: null,            &quot;Config&quot;: [                &#123;                    &quot;Subnet&quot;: &quot;172.17.0.0/16&quot;, # ç½‘æ®µ                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;                &#125;            ]        &#125;,        &quot;Internal&quot;: false,        &quot;Attachable&quot;: false,        &quot;Ingress&quot;: false,        &quot;ConfigFrom&quot;: &#123;            &quot;Network&quot;: &quot;&quot;        &#125;,        &quot;ConfigOnly&quot;: false,        &quot;Containers&quot;: &#123;            &quot;78904cf546599b37473b34ff4a5bf5f1af3a632e5bd80ff8e72904d7ed339c45&quot;: &#123;                &quot;Name&quot;: &quot;tomcat02&quot;, # tomcat02                &quot;EndpointID&quot;: &quot;ea7126991ab6eab6d65f0bc8c0135d014446c919c9ceee1e94d1ddd8c07e5c80&quot;,                &quot;MacAddress&quot;: &quot;02:42:ac:11:00:03&quot;,                &quot;IPv4Address&quot;: &quot;172.17.0.3/16&quot;, # tomcat02 çš„ ip åœ°å€                &quot;IPv6Address&quot;: &quot;&quot;            &#125;,            &quot;95cac41f93906a08c79b49e84ed490b220032ee954c27b243835de6cb035bb56&quot;: &#123;                &quot;Name&quot;: &quot;tomcat01&quot;, # tomcat01                &quot;EndpointID&quot;: &quot;4c10c4fe891272787fc69121be3f929a830fef79eca92c507f5fdccad9d83145&quot;,                &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,                &quot;IPv4Address&quot;: &quot;172.17.0.2/16&quot;,                &quot;IPv6Address&quot;: &quot;&quot;            &#125;        &#125;,        &quot;Options&quot;: &#123;            # ...        &#125;,        &quot;Labels&quot;: &#123;&#125;    &#125;]</code></pre><p>â€‹<br>â€‹        </p><p>2ã€æŸ¥çœ‹å®¹å™¨tomcat02è¯¦ç»†ä¿¡æ¯</p><pre><code>docker inspect å®¹å™¨id</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker inspect 78904cf54659[    &#123;        &quot;Id&quot;: &quot;78904cf546599b37473b34ff4a5bf5f1af3a632e5bd80ff8e72904d7ed339c45&quot;,        &quot;Created&quot;: &quot;2022-02-03T12:13:25.377988982Z&quot;,        &quot;Path&quot;: &quot;/bin/bash&quot;,        &quot;Args&quot;: [],        &quot;State&quot;: &#123; # ä¸»é¢˜            &quot;Status&quot;: &quot;running&quot;,            &quot;Running&quot;: true, # è¿è¡Œ            &quot;Paused&quot;: false,            &quot;Restarting&quot;: false,            &quot;OOMKilled&quot;: false,            &quot;Dead&quot;: false,             &quot;Pid&quot;: 9965,            &quot;ExitCode&quot;: 0,            &quot;Error&quot;: &quot;&quot;,            &quot;StartedAt&quot;: &quot;2022-02-03T12:44:20.630270698Z&quot;,            &quot;FinishedAt&quot;: &quot;2022-02-03T12:34:37.648949082Z&quot;        &#125;,              &quot;Config&quot;: &#123;            &quot;Hostname&quot;: &quot;78904cf54659&quot;,            &quot;Domainname&quot;: &quot;&quot;,            &quot;User&quot;: &quot;&quot;,            # ...            &quot;Env&quot;: [# ç¯å¢ƒé…ç½®                &quot;PATH=/usr/local/tomcat/bin:/usr/local/openjdk-11/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;,                &quot;JAVA_HOME=/usr/local/openjdk-11&quot;,                &quot;LANG=C.UTF-8&quot;,                &quot;JAVA_VERSION=11.0.13&quot;,                # ...            ],            &quot;Cmd&quot;: [                &quot;/bin/bash&quot;            ],            &quot;Image&quot;: &quot;tomcat&quot;, # é•œåƒ            &quot;Volumes&quot;: null,            &quot;WorkingDir&quot;: &quot;/usr/local/tomcat&quot;, # å·¥ä½œç›®å½•            &quot;Entrypoint&quot;: null,             &quot;OnBuild&quot;: null,            &quot;Labels&quot;: &#123;&#125;        &#125;,        &quot;NetworkSettings&quot;: &#123;            &quot;Bridge&quot;: &quot;&quot;,            &quot;SandboxID&quot;: &quot;5ed43e901e7b9b49937e06d39a5f1fe73709437d70beaf8b07d3e56c48affcdf&quot;,            &quot;HairpinMode&quot;: false,            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,            &quot;LinkLocalIPv6PrefixLen&quot;: 0,            &quot;Ports&quot;: &#123;                &quot;8080/tcp&quot;: [                    &#123;                        &quot;HostIp&quot;: &quot;0.0.0.0&quot;,                        &quot;HostPort&quot;: &quot;49169&quot;                    &#125;,                    &#123;                        &quot;HostIp&quot;: &quot;::&quot;,                        &quot;HostPort&quot;: &quot;49169&quot;                    &#125;                ]            &#125;,            # ...            &quot;Networks&quot;: &#123;                &quot;bridge&quot;: &#123; # æ¡¥æ¥                    # ...                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;, # ç½‘å…³                    &quot;IPAddress&quot;: &quot;172.17.0.3&quot;, # ip                    # ...                &#125;            &#125;        &#125;    &#125;]</code></pre><p>â€‹        </p><p>3ã€æŸ¥çœ‹å®¹å™¨tomcat03è¯¦ç»†ä¿¡æ¯ï¼Œå¾—åˆ°è¿æ¥ä¿¡æ¯</p><pre><code>docker inspect 4e6aae2d99dd</code></pre><p>â€‹        </p><pre><code># ...&quot;HostConfig&quot;: &#123;    # ...    &quot;Links&quot;: [                &quot;/tomcat02:/tomcat03/tomcat02&quot;            ],    # ...&#125;# ...</code></pre><p>â€‹        </p><p>4ã€å®¹å™¨tomcat03é…ç½®äº†ç½‘ç»œæ˜ å°„ å°†ä¸»æœºå(tomcat02)ä¸ipåœ°å€hostæ˜ å°„(ä¸æ¨èä½¿ç”¨)ã€‚</p><pre><code>cat /etc/hosts</code></pre><p>â€‹        </p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190230154.png" alt="image-20230406190230154"></div><div class="image-meta"><span class="image-caption center">image-20230406190230154</span></div></div><h2 id="16-4-è‡ªå®šä¹‰ç½‘ç»œ"><a href="#16-4-è‡ªå®šä¹‰ç½‘ç»œ" class="headerlink" title="16.4 è‡ªå®šä¹‰ç½‘ç»œ"></a>16.4 è‡ªå®šä¹‰ç½‘ç»œ</h2><p>æŸ¥çœ‹æ‰€æœ‰çš„dockerç½‘ç»œ</p><pre><code>[root@192 ~]# docker network lsNETWORK ID     NAME      DRIVER    SCOPE297f07c51979   bridge    bridge    local # bridge:æ¡¥æ¥ docker087a8f8309bfa   host      host      local51b67872ea20   none      null      local</code></pre><p>â€‹        </p><blockquote><p>ç½‘ç»œæ¨¡å¼</p></blockquote><p>bridge ï¼šæ¡¥æ¥ dockerï¼ˆé»˜è®¤ï¼Œè‡ªå·±åˆ›å»ºä¹Ÿæ˜¯ç”¨bridgeæ¨¡å¼ï¼‰</p><p>none ï¼šä¸é…ç½®ç½‘ç»œï¼Œä¸€èˆ¬ä¸ç”¨</p><p>host ï¼šå’Œæ‰€ä¸»æœºå…±äº«ç½‘ç»œ</p><p>container ï¼šå®¹å™¨ç½‘ç»œè¿é€šï¼ˆç”¨å¾—å°‘ï¼å±€é™å¾ˆå¤§ï¼‰</p><blockquote><p>è‡ªå®šä¹‰ä¸€ä¸ªç½‘ç»œ</p></blockquote><p>1ã€é»˜è®¤å‚æ•° <code>-net bridge</code></p><pre><code># å¯åŠ¨æ—¶ --net bridge æ˜¯é»˜è®¤å¸¦ä¸Šçš„,bridgeå°±æ˜¯docker0$ docker run -d -P --name tomcat01 tomcat ç­‰ä»·äº =&gt; docker run -d -P --name tomcat01 --net bridge tomcat</code></pre><p>â€‹        </p><pre><code># docker0ï¼Œç‰¹ç‚¹ï¼šé»˜è®¤ï¼ŒåŸŸåä¸èƒ½è®¿é—®ã€‚ --linkå¯ä»¥æ‰“é€šè¿æ¥ï¼Œä½†æ˜¯å¾ˆéº»çƒ¦ï¼</code></pre><p>â€‹        </p><p>2ã€åˆ›å»ºç½‘ç»œçš„å‘½ä»¤</p><pre><code>[root@192 ~]# docker network create --helpUsage:  docker network create [OPTIONS] NETWORKCreate a networkOptions:      --attachable           # å¯ç”¨æ‰‹åŠ¨å®¹å™¨é™„ä»¶      --aux-address map      # mapç½‘ç»œé©±åŠ¨ä½¿ç”¨çš„è¾…åŠ©IPv4æˆ–IPv6åœ°å€(é»˜è®¤map[])      --config-from string   # è¦å¤åˆ¶é…ç½®çš„ç½‘ç»œ      --config-only          # åˆ›å»ºä»…é…ç½®ç½‘ç»œ  -d, --driver string        # ç®¡ç†ç½‘ç»œçš„é©±åŠ¨ç¨‹åº(é»˜è®¤ä¸ºâ€œbridgeâ€)      --gateway strings      # IPv4æˆ–IPv6ä¸»å­ç½‘ç½‘å…³      --ingress              # åˆ›å»ºç¾¤è·¯ç”±-meshç½‘ç»œ      --internal             # é™åˆ¶å¤–éƒ¨ç”¨æˆ·è®¿é—®ç½‘ç»œ      --ip-range strings     # ä»å­èŒƒå›´åˆ†é…å®¹å™¨ip      --ipam-driver string   # IPåœ°å€ç®¡ç†é©±åŠ¨ç¨‹åº(é»˜è®¤ä¸ºâ€œdefaultâ€)      --ipam-opt map         # mapè®¾ç½®IPAMé©±åŠ¨çš„ç‰¹å®šé€‰é¡¹(default map[])      --ipv6                 # å¯ç”¨ipv6ç»„ç½‘åŠŸèƒ½      --label list           # listè®¾ç½®ç½‘ç»œå…ƒæ•°æ®  -o, --opt map              # è®¾ç½®é©±åŠ¨ç¨‹åºçš„ç‰¹å®šé€‰é¡¹(é»˜è®¤map[])      --scope string         # æ§åˆ¶ç½‘ç»œèŒƒå›´      --subnet strings       # CIDRæ ¼å¼çš„å­ç½‘ï¼Œè¡¨ç¤ºä¸€ä¸ªç½‘æ®µ</code></pre><p>â€‹        </p><p>3ã€è‡ªå®šä¹‰ä¸€ä¸ªç½‘ç»œï¼ˆåˆ›å»ºç½‘ç»œï¼‰,åå­—ä¸ºmynet</p><pre><code>$ docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet</code></pre><p>â€‹        </p><pre><code>[root@192 ~]#  docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet6293fb8f0a642641dc0f6043b7a666690406db6423070b08f6af38a67e96e64f</code></pre><p>â€‹        </p><p>4ã€æŸ¥çœ‹è‡ªå®šä¹‰çš„ç½‘ç»œmynet</p><pre><code>$ docker network inspect mynet</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker network inspect mynet[    &#123;        &quot;Name&quot;: &quot;mynet&quot;,        &quot;Id&quot;: &quot;6293fb8f0a642641dc0f6043b7a666690406db6423070b08f6af38a67e96e64f&quot;,        &quot;Created&quot;: &quot;2022-02-04T10:06:47.753633784+08:00&quot;,        &quot;Scope&quot;: &quot;local&quot;,        &quot;Driver&quot;: &quot;bridge&quot;, #ç½‘ç»œæ¨¡å¼ bridge(æ¡¥æ¥)        &quot;EnableIPv6&quot;: false,        &quot;IPAM&quot;: &#123;            &quot;Driver&quot;: &quot;default&quot;,            &quot;Options&quot;: &#123;&#125;,            &quot;Config&quot;: [                &#123;                    &quot;Subnet&quot;: &quot;192.168.0.0/16&quot;, # å­ç½‘ 192.168.0.2 ~ 192.168.255.254                    &quot;Gateway&quot;: &quot;192.168.0.1&quot; # ç½‘å…³                &#125;            ]        &#125;,        # ...    &#125;]</code></pre><p>â€‹        </p><blockquote><p>åˆ›å»ºå®¹å™¨ï¼Œé…ç½®ç½‘ç»œ</p></blockquote><p>1ã€åˆ›å»ºå®¹å™¨01ã€02</p><pre><code>#  æ¥ /bin/bash ç›´æ¥è¿›å‘½ä»¤è¡Œdocker run -it --name centos-net01 --net mynet centos docker run -it --name centos-net02 --net mynet centos </code></pre><p>â€‹        </p><p>2ã€å†æ¬¡æŸ¥çœ‹è‡ªå®šä¹‰çš„ç½‘ç»œmynetï¼Œå¯è§å¤šäº†æ–°å¢å®¹å™¨01ã€02çš„ç½‘ç»œé…ç½®</p><pre><code>[root@192 ~]# docker network inspect mynet[    &#123;        &quot;Name&quot;: &quot;mynet&quot;,        # ...         &quot;Containers&quot;: &#123;            &quot;0c9e72313626017f9143fef9bfe9acb70f0ed46c352c8f6ed0612675c666379d&quot;: &#123;                &quot;Name&quot;: &quot;centos-net01&quot;, # centos-net01                &quot;EndpointID&quot;: &quot;a228cec33c9019f31999f9b8c9ced3e60d3e611ae395d147b0db2ea920fce4ed&quot;,                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:02&quot;,                &quot;IPv4Address&quot;: &quot;192.168.0.2/16&quot;, # ipåœ°å€ï¼š 192.168.0.2                &quot;IPv6Address&quot;: &quot;&quot;            &#125;,            &quot;c31a887225dfa9572bc47703d838932590d9a5188b1fe13e82cd5851e286b497&quot;: &#123;                &quot;Name&quot;: &quot;centos-net02&quot;, # centos-net02                &quot;EndpointID&quot;: &quot;7f4864f0e52fb36149cfffa78bde3ee88e38ea20202eca4c0b4ec5136e62ec94&quot;,                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:03&quot;,                &quot;IPv4Address&quot;: &quot;192.168.0.3/16&quot;, # ipåœ°å€ï¼š 192.168.0.3                &quot;IPv6Address&quot;: &quot;&quot;            &#125;        &#125;,        &quot;Options&quot;: &#123;&#125;,        &quot;Labels&quot;: &#123;&#125;    &#125;]</code></pre><p>â€‹        </p><p>3ã€åœ¨è‡ªå®šä¹‰çš„ç½‘ç»œä¸‹ï¼ŒæœåŠ¡å¯ä»¥äº’ç›¸pingé€šï¼Œä¸ç”¨ä½¿ç”¨<code>â€“link</code></p><ul><li><p>01 ping é€š 02</p><p>docker exec -it centos-net01 ping centos-net02 </p><p>â€‹    </p><p>[root@192 ~]# docker exec -it centos-net01 ping centos-net02<br>PING centos-net02 (192.168.0.3) 56(84) bytes of data.<br>64 bytes from centos-net02.mynet (192.168.0.3): icmp_seq&#x3D;1 ttl&#x3D;64 time&#x3D;0.072 ms<br>64 bytes from centos-net02.mynet (192.168.0.3): icmp_seq&#x3D;2 ttl&#x3D;64 time&#x3D;0.077 ms<br>64 bytes from centos-net02.mynet (192.168.0.3): icmp_seq&#x3D;3 ttl&#x3D;64 time&#x3D;0.081 ms<br>64 bytes from centos-net02.mynet (192.168.0.3): icmp_seq&#x3D;4 ttl&#x3D;64 time&#x3D;0.110 ms<br>^C<br>â€” centos-net02 ping statistics â€”<br>4 packets transmitted, 4 received, 0% packet loss, time 3004ms<br>rtt min&#x2F;avg&#x2F;max&#x2F;mdev &#x3D; 0.072&#x2F;0.085&#x2F;0.110&#x2F;0.014 ms</p><p>â€‹    </p></li><li><p>åä¹‹äº¦ç„¶ï¼Œ02 ping é€š 01</p><p>[root@192 ~]# docker exec -it centos-net02 ping centos-net01<br>PING centos-net01 (192.168.0.2) 56(84) bytes of data.<br>64 bytes from centos-net01.mynet (192.168.0.2): icmp_seq&#x3D;1 ttl&#x3D;64 time&#x3D;0.049 ms<br>64 bytes from centos-net01.mynet (192.168.0.2): icmp_seq&#x3D;2 ttl&#x3D;64 time&#x3D;0.095 ms<br>^C<br>â€” centos-net01 ping statistics â€”<br>2 packets transmitted, 2 received, 0% packet loss, time 1003ms<br>rtt min&#x2F;avg&#x2F;max&#x2F;mdev &#x3D; 0.049&#x2F;0.072&#x2F;0.095&#x2F;0.023 ms</p><p>â€‹</p></li></ul><p>4ã€æŸ¥çœ‹hostæ˜ å°„,æ˜ å°„ <code>ip å¯¹åº” å®¹å™¨id</code></p><pre><code>[root@192 ~]# docker exec -it centos-net02 cat /etc/hosts127.0.0.1localhost# ...192.168.0.3c31a887225df # ip å¯¹åº” å®¹å™¨idï¼ˆcentos-net01 çš„ipï¼‰</code></pre><p>â€‹        </p><pre><code>[root@192 ~]# docker exec -it centos-net01 cat /etc/hosts127.0.0.1localhost# ...192.168.0.20c9e72313626 # ip å¯¹åº” å®¹å™¨idï¼ˆcentos-net02 çš„ipï¼‰</code></pre><p>â€‹        </p><p>æˆ‘ä»¬è‡ªå®šä¹‰çš„ç½‘ç»œdockerå½“æˆ‘ä»¬ç»´æŠ¤å¥½äº†å¯¹åº”çš„å…³ç³»ï¼Œæ¨èæˆ‘ä»¬å¹³æ—¶è¿™æ ·ä½¿ç”¨ç½‘ç»œï¼</p><p>å¥½å¤„ï¼š</p><p>redis -ä¸åŒçš„é›†ç¾¤ä½¿ç”¨ä¸åŒçš„ç½‘ç»œï¼Œä¿è¯é›†ç¾¤æ˜¯å®‰å…¨å’Œå¥åº·çš„</p><p>mysql-ä¸åŒçš„é›†ç¾¤ä½¿ç”¨ä¸åŒçš„ç½‘ç»œï¼Œä¿è¯é›†ç¾¤æ˜¯å®‰å…¨å’Œå¥åº·çš„</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190240143.png" alt="image-20230406190240143"></div><div class="image-meta"><span class="image-caption center">image-20230406190240143</span></div></div><h2 id="16-5-ç½‘ç»œè¿é€š"><a href="#16-5-ç½‘ç»œè¿é€š" class="headerlink" title="16.5 ç½‘ç»œè¿é€š"></a>16.5 ç½‘ç»œè¿é€š</h2><p>è§£å†³é—®é¢˜ï¼Œç½‘æ®µä¸åŒå¦‚ä½•pingé€š</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190243645.png" alt="image-20230406190243645"></div><div class="image-meta"><span class="image-caption center">image-20230406190243645</span></div></div><p>1ã€åˆ›å»ºå®¹å™¨ centos01ï¼Œæµ‹è¯•ping å®¹å™¨åå¤±è´¥</p><pre><code>$ docker run -dit --name centos01 centos$ docker exec -it centos01 ping centos-net01</code></pre><p>â€‹        </p><pre><code>[root@192 ~]#  docker exec -it centos01 ping centos-net01ping: centos-net01: Name or service not known</code></pre><p>â€‹        </p><p>2ã€è§£å†³æ–¹æ³•ï¼š<code>docker network connect</code></p><pre><code>[root@192 ~]# clear[root@192 ~]# docker network connect --help# NETWORKï¼šå·¥ä½œç½‘ç»œï¼ˆmynetï¼‰Usage:  docker network connect [OPTIONS] NETWORK CONTAINERConnect a container to a network # å°†å®¹å™¨è¿æ¥åˆ°ç½‘ç»œä¸­Options:      --alias strings           # ä¸ºå®¹å™¨æ·»åŠ ç½‘ç»œèŒƒå›´çš„åˆ«å      --driver-opt strings      # ç½‘ç»œé©±åŠ¨é€‰é¡¹      --ip string               # IPv4åœ°å€(ä¾‹å¦‚172.30.100.104)      --ip6 string              # IPv6åœ°å€(ä¾‹å¦‚,2001:db8:: 33)      --link list               # æ·»åŠ é“¾æ¥åˆ°å¦ä¸€ä¸ªå®¹å™¨      --link-local-ip strings   # ä¸ºå®¹å™¨æ·»åŠ é“¾è·¯æœ¬åœ°åœ°å€</code></pre><p>â€‹        </p><p>3ã€å°†ç½‘ç»œmynetä¸ centos01å®¹å™¨è¿é€š</p><pre><code>$ docker network connect mynet centos01</code></pre><p>â€‹        </p><p>4ã€æŸ¥çœ‹mynet</p><pre><code>[root@192 ~]# docker inspect mynet [    &#123;        &quot;Name&quot;: &quot;mynet&quot;,        # ...        &quot;Containers&quot;: &#123;            &quot;0c9e72313626017f9143fef9bfe9acb70f0ed46c352c8f6ed0612675c666379d&quot;: &#123;                &quot;Name&quot;: &quot;centos-net01&quot;,                &quot;EndpointID&quot;: &quot;b09c89b344437d0a166567d03358cdb6f2c05a6833813501285ed516abe641df&quot;,                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:02&quot;,                &quot;IPv4Address&quot;: &quot;192.168.0.2/16&quot;,                &quot;IPv6Address&quot;: &quot;&quot;            &#125;,            &quot;c31a887225dfa9572bc47703d838932590d9a5188b1fe13e82cd5851e286b497&quot;: &#123;                &quot;Name&quot;: &quot;centos-net02&quot;,                &quot;EndpointID&quot;: &quot;eda6dd675c194a84e6d398ee8c16cc6b42d67fb91069264d00d05ada7dd5633b&quot;,                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:04&quot;,                &quot;IPv4Address&quot;: &quot;192.168.0.4/16&quot;,                &quot;IPv6Address&quot;: &quot;&quot;            &#125;,            &quot;dac6694051750f990fa6fac796795d60b8e4578d9b72f90fbc9519b54e6498ac&quot;: &#123;                &quot;Name&quot;: &quot;centos01&quot;, # æ–°å¢centos01                &quot;EndpointID&quot;: &quot;e79c29a2d531dd69b766ee6253f1562d7a8bcbc6accfab23cb6df5cdbaa6a7a0&quot;,                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:03&quot;,                &quot;IPv4Address&quot;: &quot;192.168.0.3/16&quot;, # å…¬ç½‘ip                 &quot;IPv6Address&quot;: &quot;&quot;            &#125;        &#125;,        # ...</code></pre><p>â€‹        </p><ul><li><p>centos01å®¹å™¨çš„hostsæ–‡ä»¶(<strong>ä¸€ä¸ªå®¹å™¨ä¸¤ä¸ªip</strong>)</p><p>[root@192 ~]# docker exec -it centos01 cat &#x2F;etc&#x2F;hosts<br>127.0.0.1localhost</p><h1 id="â€¦-2"><a href="#â€¦-2" class="headerlink" title="â€¦"></a>â€¦</h1><h1 id="dac669405175-æ˜¯-centos01å®¹å™¨è‡ªå·±çš„-å®¹å™¨id"><a href="#dac669405175-æ˜¯-centos01å®¹å™¨è‡ªå·±çš„-å®¹å™¨id" class="headerlink" title="dac669405175 æ˜¯ centos01å®¹å™¨è‡ªå·±çš„ å®¹å™¨id"></a>dac669405175 æ˜¯ centos01å®¹å™¨è‡ªå·±çš„ å®¹å™¨id</h1><p>172.17.0.2dac669405175 # ç§ç½‘ip &#x3D;&gt; å®¹å™¨id<br>192.168.0.3dac669405175 # å…¬ç½‘ip &#x3D;&gt; å®¹å™¨id</p><p>â€‹    </p></li><li><p>centos-net01å®¹å™¨çš„hostsæ–‡ä»¶</p><p>[root@192 ~]# docker exec -it centos-net01 cat &#x2F;etc&#x2F;hosts<br>127.0.0.1localhost</p><h1 id="â€¦-3"><a href="#â€¦-3" class="headerlink" title="â€¦"></a>â€¦</h1><p>192.168.0.20c9e72313626  # ç§ç½‘(å…¬ç½‘)ip &#x3D;&gt; å®¹å™¨id</p><p>â€‹</p></li></ul><p>5ã€å†æ¬¡æµ‹è¯•ï¼Œcentos01ä¸ centos-net01ã€centos-net02 å‡å¯pingé€š</p><pre><code>$ docker exec -it centos01 ping centos-net01$ docker exec -it centos01 ping centos-net02$ docker exec -it centos-net01 ping centos01 $ docker exec -it centos-net02 ping centos01 </code></pre><p>â€‹        </p><blockquote><p>ç»“è®º</p></blockquote><p>å‡è®¾è¦è·¨ç½‘ç»œæ“ä½œåˆ«äººï¼Œå°±éœ€è¦ä½¿ç”¨<code>docker network connect</code>è¿é€šï¼</p><h2 id="17ã€Redisé›†ç¾¤éƒ¨ç½²å®æˆ˜"><a href="#17ã€Redisé›†ç¾¤éƒ¨ç½²å®æˆ˜" class="headerlink" title="17ã€Redisé›†ç¾¤éƒ¨ç½²å®æˆ˜"></a>17ã€Redisé›†ç¾¤éƒ¨ç½²å®æˆ˜</h2><h2 id="17-1-éƒ¨ç½²"><a href="#17-1-éƒ¨ç½²" class="headerlink" title="17.1 éƒ¨ç½²"></a>17.1 éƒ¨ç½²</h2><blockquote><p>ç¯å¢ƒ</p></blockquote><p>ä¸‰ä¸»ä¸‰ä»</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190250509.png" alt="image-20230406190250509"></div><div class="image-meta"><span class="image-caption center">image-20230406190250509</span></div></div><p>1ã€åˆ›å»ºç½‘å¡</p><pre><code>$ docker network create redisnet --subnet 172.38.0.0/16</code></pre><p>â€‹        </p><p>2ã€é€šè¿‡è„šæœ¬åˆ›å»ºå…­ä¸ªredisé…ç½®æ–‡ä»¶</p><pre><code>for port in $(seq 1 6);\do \mkdir -p /mydata/redis/node-$&#123;port&#125;/conftouch /mydata/redis/node-$&#123;port&#125;/conf/redis.confcat &lt;&lt; EOF &gt;&gt; /mydata/redis/node-$&#123;port&#125;/conf/redis.confport 6379bind 0.0.0.0cluster-enabled yescluster-config-file nodes.confcluster-node-timeout 5000cluster-announce-ip 172.38.0.1$&#123;port&#125;cluster-announce-port 6379cluster-announce-bus-port 16379appendonly yesEOFdone</code></pre><p>â€‹        </p><ul><li><p>æŸ¥çœ‹redisé…ç½®æ–‡ä»¶</p><p>[root@192 ~]# cd &#x2F;mydata&#x2F;redis&#x2F;<br>[root@192 redis]# ls<br>node-1  node-2  node-3  node-4  node-5  node-6<br>[root@192 conf]# cd &#x2F;mydata&#x2F;redis&#x2F;node-1&#x2F;conf<br>[root@192 conf]# ls<br>redis.conf<br>[root@192 conf]# cat redis.conf<br>port 6379<br>bind 0.0.0.0<br>cluster-enabled yes<br>cluster-config-file nodes.conf<br>cluster-node-timeout 5000<br>cluster-announce-ip 172.38.0.11<br>cluster-announce-port 6379<br>cluster-announce-bus-port 16379<br>appendonly yes</p><p>â€‹</p></li></ul><p>3ã€é€šè¿‡è„šæœ¬åˆ›å»ºå’Œè¿è¡Œå…­ä¸ªrediså®¹å™¨ï¼Œ<code>--ip</code> æŒ‡å®šipï¼Œ<code>-v</code>æŒ‚è½½redisé…ç½®æ–‡ä»¶å’Œæ•°æ®</p><pre><code>for port in $(seq 1 6);\do \docker run -p 637$&#123;port&#125;:6379 -p 1667$&#123;port&#125;:16379 --name redis-$&#123;port&#125; \-v /mydata/redis/node-$&#123;port&#125;/data:/data \-v /mydata/redis/node-$&#123;port&#125;/conf/redis.conf:/etc/redis/redis.conf \-d --net redisnet --ip 172.38.0.1$&#123;port&#125; redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.confdone</code></pre><p>â€‹        </p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190449166.png" alt="image-20230406190449166"></div><div class="image-meta"><span class="image-caption center">image-20230406190449166</span></div></div><ul><li><p>æˆ–è€…ä¸€ä¸ªä¸€ä¸ªå®¹å™¨æ·»åŠ </p><p>docker run -p 6371:6379 -p 16671:16379 â€“name redis-1 <br>-v &#x2F;mydata&#x2F;redis&#x2F;node-1&#x2F;data:&#x2F;data <br>-v &#x2F;mydata&#x2F;redis&#x2F;node-1&#x2F;conf&#x2F;redis.conf:&#x2F;etc&#x2F;redis&#x2F;redis.conf <br>-d â€“net redisnet â€“ip 172.38.0.11 redis:5.0.9-alpine3.11 redis-server &#x2F;etc&#x2F;redis&#x2F;redis.conf</p><p>docker run -p 6372:6379 -p 16672:16379 â€“name redis-2 <br>-v &#x2F;mydata&#x2F;redis&#x2F;node-2&#x2F;data:&#x2F;data <br>-v &#x2F;mydata&#x2F;redis&#x2F;node-2&#x2F;conf&#x2F;redis.conf:&#x2F;etc&#x2F;redis&#x2F;redis.conf <br>-d â€“net redisnet â€“ip 172.38.0.12 redis:5.0.9-alpine3.11 redis-server &#x2F;etc&#x2F;redis&#x2F;redis.conf</p><p>docker run -p 6373:6379 -p 16673:16379 â€“name redis-3 <br>-v &#x2F;mydata&#x2F;redis&#x2F;node-3&#x2F;data:&#x2F;data <br>-v &#x2F;mydata&#x2F;redis&#x2F;node-3&#x2F;conf&#x2F;redis.conf:&#x2F;etc&#x2F;redis&#x2F;redis.conf <br>-d â€“net redisnet â€“ip 172.38.0.13 redis:5.0.9-alpine3.11 redis-server &#x2F;etc&#x2F;redis&#x2F;redis.conf</p><p>docker run -p 6374:6379 -p 16674:16379 â€“name redis-4 <br>-v &#x2F;mydata&#x2F;redis&#x2F;node-4&#x2F;data:&#x2F;data <br>-v &#x2F;mydata&#x2F;redis&#x2F;node-4&#x2F;conf&#x2F;redis.conf:&#x2F;etc&#x2F;redis&#x2F;redis.conf <br>-d â€“net redisnet â€“ip 172.38.0.14 redis:5.0.9-alpine3.11 redis-server &#x2F;etc&#x2F;redis&#x2F;redis.conf</p><p>docker run -p 6375:6379 -p 16675:16379 â€“name redis-5 <br>-v &#x2F;mydata&#x2F;redis&#x2F;node-5&#x2F;data:&#x2F;data <br>-v &#x2F;mydata&#x2F;redis&#x2F;node-5&#x2F;conf&#x2F;redis.conf:&#x2F;etc&#x2F;redis&#x2F;redis.conf <br>-d â€“net redisnet â€“ip 172.38.0.15 redis:5.0.9-alpine3.11 redis-server &#x2F;etc&#x2F;redis&#x2F;redis.conf</p><p>docker run -p 6376:6379 -p 16676:16379 â€“name redis-6 <br>-v &#x2F;mydata&#x2F;redis&#x2F;node-6&#x2F;data:&#x2F;data <br>-v &#x2F;mydata&#x2F;redis&#x2F;node-6&#x2F;conf&#x2F;redis.conf:&#x2F;etc&#x2F;redis&#x2F;redis.conf <br>-d â€“net redisnet â€“ip 172.38.0.16 redis:5.0.9-alpine3.11 redis-server &#x2F;etc&#x2F;redis&#x2F;redis.conf</p><p>â€‹</p></li></ul><p>4ã€æŸ¥çœ‹åˆ›å»ºçš„rediså®¹å™¨</p><p>ï¼ˆç§’é€€çš„ï¼Œå¯ä»¥ç”¨docker logs redis-1 æŸ¥çœ‹æ—¥å¿—ï¼‰</p><pre><code>[root@192 conf]#  docker ps CONTAINER ID   IMAGE                    COMMAND                  CREATED          STATUS          PORTS                                                                                      NAMES49e9e62c7fff   redis:5.0.9-alpine3.11   &quot;docker-entrypoint.sâ€¦&quot;   20 seconds ago   Up 19 seconds   0.0.0.0:6376-&gt;6379/tcp, :::6376-&gt;6379/tcp, 0.0.0.0:16676-&gt;16379/tcp, :::16676-&gt;16379/tcp   redis-6691b11db10c8   redis:5.0.9-alpine3.11   &quot;docker-entrypoint.sâ€¦&quot;   21 seconds ago   Up 20 seconds   0.0.0.0:6375-&gt;6379/tcp, :::6375-&gt;6379/tcp, 0.0.0.0:16675-&gt;16379/tcp, :::16675-&gt;16379/tcp   redis-5fc37037e7ae9   redis:5.0.9-alpine3.11   &quot;docker-entrypoint.sâ€¦&quot;   22 seconds ago   Up 20 seconds   0.0.0.0:6374-&gt;6379/tcp, :::6374-&gt;6379/tcp, 0.0.0.0:16674-&gt;16379/tcp, :::16674-&gt;16379/tcp   redis-485ef9071ac9b   redis:5.0.9-alpine3.11   &quot;docker-entrypoint.sâ€¦&quot;   22 seconds ago   Up 21 seconds   0.0.0.0:6373-&gt;6379/tcp, :::6373-&gt;6379/tcp, 0.0.0.0:16673-&gt;16379/tcp, :::16673-&gt;16379/tcp   redis-344b92119b2b3   redis:5.0.9-alpine3.11   &quot;docker-entrypoint.sâ€¦&quot;   23 seconds ago   Up 21 seconds   0.0.0.0:6372-&gt;6379/tcp, :::6372-&gt;6379/tcp, 0.0.0.0:16672-&gt;16379/tcp, :::16672-&gt;16379/tcp   redis-2269b8eb57942   redis:5.0.9-alpine3.11   &quot;docker-entrypoint.sâ€¦&quot;   23 seconds ago   Up 22 seconds   0.0.0.0:6371-&gt;6379/tcp, :::6371-&gt;6379/tcp, 0.0.0.0:16671-&gt;16379/tcp, :::16671-&gt;16379/tcp   redis-1</code></pre><p>â€‹<br>â€‹        </p><p>5ã€æŸ¥çœ‹ç½‘ç»œredisnetçš„ä¿¡æ¯ï¼ˆContainerså­—æ®µå†…çœç•¥äº†æ•°æ®ï¼‰</p><pre><code>[root@192 conf]# docker inspect redisnet [    &#123;        &quot;Name&quot;: &quot;redisnet&quot;,        # ...        &quot;Containers&quot;: &#123;            &quot;269b8eb57942dd3c816247251c1d4a0299c86d8dbfa45c1e60fd68b1e0b5e470&quot;: &#123;                &quot;Name&quot;: &quot;redis-1&quot;,                &quot;IPv4Address&quot;: &quot;172.38.0.11/16&quot;,            &#125;,            &quot;44b92119b2b3573e1a8e15a1e435cd3c1cde30a6fc3f960189a88f715e962fec&quot;: &#123;                &quot;Name&quot;: &quot;redis-2&quot;,                &quot;IPv4Address&quot;: &quot;172.38.0.12/16&quot;,            &#125;,            &quot;49e9e62c7ffff2955194095818f4b806e609329350456e65c2bec9f5932bd8f6&quot;: &#123;                &quot;Name&quot;: &quot;redis-6&quot;,                &quot;IPv4Address&quot;: &quot;172.38.0.16/16&quot;,            &#125;,            &quot;691b11db10c8403b999386caec7ad20dad535aa0d0e3f9d98214423b328f23de&quot;: &#123;                &quot;IPv4Address&quot;: &quot;172.38.0.15/16&quot;,            &#125;,            &quot;85ef9071ac9bbacc25cda715a695819e32fa17945956ae2c744e43b841e27af6&quot;: &#123;                &quot;Name&quot;: &quot;redis-3&quot;,                &quot;IPv4Address&quot;: &quot;172.38.0.13/16&quot;,            &#125;,            &quot;fc37037e7ae9ed007bef0290f3610f3a3cbbde744189a7b3e3a112b9497e7e5a&quot;: &#123;                &quot;Name&quot;: &quot;redis-4&quot;,                &quot;IPv4Address&quot;: &quot;172.38.0.14/16&quot;,            &#125;        &#125;,        # ...</code></pre><p>â€‹        </p><p>5ã€<strong>åˆ›å»ºé›†ç¾¤</strong>,(redisé»˜è®¤æ²¡æœ‰bash,æ‰€ä»¥ç”¨ &#x2F;bin&#x2F;sh)</p><p>ï¼ˆ1ï¼‰è¿›å…¥redis-1å®¹å™¨</p><pre><code>[root@192 ~]# docker exec -it redis-1 /bin/sh /data # lsappendonly.aof  nodes.conf/data # </code></pre><p>â€‹        </p><p>ï¼ˆ2ï¼‰ åˆ›å»ºé›†ç¾¤</p><pre><code>redis-cli --cluster create 172.38.0.11:6379 172.38.0.12:6379 172.38.0.13:6379 172.38.0.14:6379 172.38.0.15:6379 172.38.0.16:6379  --cluster-replicas 1</code></pre><p>â€‹        </p><pre><code>/data # redis-cli --cluster create 172.38.0.11:6379 172.38.0.12:6379 172.38.0.13:6379 172.38.0.14:6379 172.38.0.15:6379 172.38.0.16:6379  --cluster-replicas 1&gt;&gt;&gt; Performing hash slots allocation on 6 nodes...Master[0] -&gt; Slots 0 - 5460 # ä¸‰ä¸»ä¸‰ä»Master[1] -&gt; Slots 5461 - 10922Master[2] -&gt; Slots 10923 - 16383Adding replica 172.38.0.15:6379 to 172.38.0.11:6379Adding replica 172.38.0.16:6379 to 172.38.0.12:6379Adding replica 172.38.0.14:6379 to 172.38.0.13:6379M: 7866a044a62217acc264e0780724baebfcbdf9ec 172.38.0.11:6379   slots:[0-5460] (5461 slots) masterM: e2210b65a712c43fce9cb11a40605d4ae6afc61c 172.38.0.12:6379   slots:[5461-10922] (5462 slots) masterM: a2d9d996b447f724860502d4230434d8fbef45bb 172.38.0.13:6379   slots:[10923-16383] (5461 slots) masterS: eaa1f8ba8de966a6fffaed6b43e0226d95caffb9 172.38.0.14:6379   replicates a2d9d996b447f724860502d4230434d8fbef45bbS: 35fcc7906fda3c977cf6fe09ebfd4632c8288449 172.38.0.15:6379   replicates 7866a044a62217acc264e0780724baebfcbdf9ecS: 59c81a95ed20b8964246dee3bfc333e25960275a 172.38.0.16:6379   replicates e2210b65a712c43fce9cb11a40605d4ae6afc61cCan I set the above configuration? (type &#39;yes&#39; to accept): yes&gt;&gt;&gt; Nodes configuration updated&gt;&gt;&gt; Assign a different config epoch to each node&gt;&gt;&gt; Sending CLUSTER MEET messages to join the clusterWaiting for the cluster to join...&gt;&gt;&gt; Performing Cluster Check (using node 172.38.0.11:6379)M: 7866a044a62217acc264e0780724baebfcbdf9ec 172.38.0.11:6379   slots:[0-5460] (5461 slots) master   1 additional replica(s)S: 35fcc7906fda3c977cf6fe09ebfd4632c8288449 172.38.0.15:6379   slots: (0 slots) slave   replicates 7866a044a62217acc264e0780724baebfcbdf9ecM: a2d9d996b447f724860502d4230434d8fbef45bb 172.38.0.13:6379   slots:[10923-16383] (5461 slots) master   1 additional replica(s)S: 59c81a95ed20b8964246dee3bfc333e25960275a 172.38.0.16:6379   slots: (0 slots) slave   replicates e2210b65a712c43fce9cb11a40605d4ae6afc61cM: e2210b65a712c43fce9cb11a40605d4ae6afc61c 172.38.0.12:6379   slots:[5461-10922] (5462 slots) master   1 additional replica(s)S: eaa1f8ba8de966a6fffaed6b43e0226d95caffb9 172.38.0.14:6379   slots: (0 slots) slave   replicates a2d9d996b447f724860502d4230434d8fbef45bb[OK] All nodes agree about slots configuration.&gt;&gt;&gt; Check for open slots...&gt;&gt;&gt; Check slots coverage...[OK] All 16384 slots covered.</code></pre><p>â€‹        </p><h2 id="17-2-æµ‹è¯•Redisé›†ç¾¤"><a href="#17-2-æµ‹è¯•Redisé›†ç¾¤" class="headerlink" title="17.2 æµ‹è¯•Redisé›†ç¾¤"></a>17.2 æµ‹è¯•Redisé›†ç¾¤</h2><p>Redisä¸‰ç§æ¨¡å¼:ä¸»ä»æ¨¡å¼, å“¨å…µæ¨¡å¼, <strong>é›†ç¾¤æ¨¡å¼ï¼ˆæ¨èï¼‰</strong></p><p>1ã€redis-cli -c ä»£è¡¨è¿›å…¥é›†ç¾¤</p><pre><code>/data # redis-cli -c127.0.0.1:6379&gt; </code></pre><p>â€‹        </p><pre><code>127.0.0.1:6379&gt; cluster infocluster_state:ok# ..cluster_known_nodes:6 # èŠ‚ç‚¹ï¼š6cluster_size:3 # é›†ç¾¤æ•°é‡ï¼š3# ...</code></pre><p>â€‹        </p><p>2ã€æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯</p><pre><code># master(ä¸»)  slave(ä»)127.0.0.1:6379&gt; cluster nodes35fcc7906fda3c977cf6fe09ebfd4632c8288449 172.38.0.15:6379@16379 slave 7866a044a62217acc264e0780724baebfcbdf9ec 0 1643970509988 5 connecteda2d9d996b447f724860502d4230434d8fbef45bb 172.38.0.13:6379@16379 master - 0 1643970508952 3 connected 10923-1638359c81a95ed20b8964246dee3bfc333e25960275a 172.38.0.16:6379@16379 slave e2210b65a712c43fce9cb11a40605d4ae6afc61c 0 1643970509257 6 connectede2210b65a712c43fce9cb11a40605d4ae6afc61c 172.38.0.12:6379@16379 master - 0 1643970508000 2 connected 5461-10922eaa1f8ba8de966a6fffaed6b43e0226d95caffb9 172.38.0.14:6379@16379 slave a2d9d996b447f724860502d4230434d8fbef45bb 0 1643970509000 4 connected7866a044a62217acc264e0780724baebfcbdf9ec 172.38.0.11:6379@16379 myself,master - 0 1643970507000 1 connected 0-5460</code></pre><p>â€‹        </p><p>3ã€é«˜å¯ç”¨æµ‹è¯•</p><p>ï¼ˆ1ï¼‰å­˜å€¼ï¼ˆç”±redis-2å¤„ç†ï¼‰</p><pre><code>127.0.0.1:6379&gt; set name zs-&gt; Redirected to slot [5798] located at 172.38.0.12:6379 # 12 =&gt; redis-2OK172.38.0.12:6379&gt; get name&quot;zs&quot;</code></pre><p>â€‹        </p><p>ï¼ˆ2ï¼‰åœæ­¢redis-2</p><pre><code>[root@192 ~]# docker stop redis-2redis-2</code></pre><p>â€‹        </p><p>ï¼ˆ3ï¼‰ä¾æ—§å¯å–ï¼ˆæ­¤æ—¶ç”±redis-6å¤„ç†ï¼Œredis-6é¡¶ä¸Šäº†ï¼‰ã€‚é«˜å¯ç”¨</p><pre><code>127.0.0.1:6379&gt; get name-&gt; Redirected to slot [5798] located at 172.38.0.16:6379 # 16 =&gt; redis-6&quot;zs&quot;</code></pre><p>â€‹        </p><p>ï¼ˆ4ï¼‰æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯<code>cluster nodes</code></p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190301633.png" alt="image-20230406190301633"></div><div class="image-meta"><span class="image-caption center">image-20230406190301633</span></div></div><p>æˆ‘ä»¬ä½¿ç”¨dockerä¹‹åï¼Œæ‰€æœ‰çš„æŠ€æœ¯éƒ½ä¼šæ…¢æ…¢å˜å¾—ç®€å•èµ·æ¥ï¼</p><h2 id="18ã€SpringBootå¾®æœåŠ¡æ‰“åŒ…Dockeré•œåƒ"><a href="#18ã€SpringBootå¾®æœåŠ¡æ‰“åŒ…Dockeré•œåƒ" class="headerlink" title="18ã€SpringBootå¾®æœåŠ¡æ‰“åŒ…Dockeré•œåƒ"></a>18ã€SpringBootå¾®æœåŠ¡æ‰“åŒ…Dockeré•œåƒ</h2><h2 id="18-1-æ„å»ºSpringBooté¡¹ç›®"><a href="#18-1-æ„å»ºSpringBooté¡¹ç›®" class="headerlink" title="18.1 æ„å»ºSpringBooté¡¹ç›®"></a>18.1 æ„å»ºSpringBooté¡¹ç›®</h2><pre><code>package com.example.demo.colltroller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@RestControllerpublic class HelloColltroer &#123;    @RequestMapping(&quot;/hello&quot;)    public String hello()&#123;        return &quot;hello,ä¸€ä¸ªå¹³å‡¡deäºº&quot;;    &#125;&#125;</code></pre><p>â€‹        </p><ul><li>è¿è¡Œ</li></ul><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190458557.png" alt="image-20230406190458557"></div><div class="image-meta"><span class="image-caption center">image-20230406190458557</span></div></div><h2 id="18-2-æ‰“jaråŒ…"><a href="#18-2-æ‰“jaråŒ…" class="headerlink" title="18.2 æ‰“jaråŒ…"></a>18.2 æ‰“jaråŒ…</h2><p>1ã€ åŒå‡»Maven packageæ‰“åŒ…</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190305211.png" alt="image-20230406190305211"></div><div class="image-meta"><span class="image-caption center">image-20230406190305211</span></div></div><p>2ã€æ‰“åŒ…æˆåŠŸ</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190309863.png" alt="image-20230406190309863"></div><div class="image-meta"><span class="image-caption center">image-20230406190309863</span></div></div><p>3ã€æµ‹è¯•jaræ˜¯å¦å¯ä»¥è¿è¡Œ,è®¿é—®<a href="http://127.0.0.1:8080/hello">127.0.0.1:8080&#x2F;hello</a>è¿è¡ŒæˆåŠŸ</p><pre><code>$ java -jar demo1-0.0.1-SNAPSHOT.jar</code></pre><p>â€‹        </p><p>4ã€ideaå®‰è£…dockeræ’ä»¶</p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190312733.png" alt="image-20230406190312733"></div><div class="image-meta"><span class="image-caption center">image-20230406190312733</span></div></div><h2 id="18-3-ä¸Šä¼ jaråŒ…"><a href="#18-3-ä¸Šä¼ jaråŒ…" class="headerlink" title="18.3 ä¸Šä¼ jaråŒ…"></a>18.3 ä¸Šä¼ jaråŒ…</h2><p>åœ¨ideaé¡¹ç›®æ ¹ç›®å½•åˆ›å»ºå¹¶ç¼–å†™Dockerfileæ–‡ä»¶</p><pre><code>FROM java:11COPY *.jar /app.jarCMD [&quot;--server.port=8080&quot;]EXPOSE 8080ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]</code></pre><p>â€‹        </p><p>å°†jaråŒ…å’ŒDockerfileä¸Šä¼ åˆ°æœåŠ¡å™¨</p><pre><code>[root@192 idea]# pwd/home/idea[root@192 idea]# lsdemo1-0.0.1-SNAPSHOT.jar  Dockerfile</code></pre><p>â€‹        </p><h2 id="18-4-æ„å»ºé•œåƒ"><a href="#18-4-æ„å»ºé•œåƒ" class="headerlink" title="18.4 æ„å»ºé•œåƒ"></a>18.4 æ„å»ºé•œåƒ</h2><p>1ã€æ„å»ºé•œåƒ</p><pre><code>$ docker build -t springboot .</code></pre><p>â€‹        </p><pre><code>[root@192 idea]# docker build -t springboot .Sending build context to Docker daemon  16.57MBStep 1/5 : FROM java:8# ...Successfully built f107ab2a9246Successfully tagged springboot:latest</code></pre><p>â€‹        </p><p>2ã€æŸ¥çœ‹é•œåƒ</p><pre><code>[root@192 idea]# docker imagesREPOSITORY   TAG                IMAGE ID       CREATED         SIZEspringboot   latest             f107ab2a9246   2 minutes ago   660MB# ...</code></pre><p>â€‹        </p><p>3ã€è¿è¡Œspringbootå®¹å™¨,è®¿é—®<code>127.0.0.1:8080/hello</code></p><pre><code>docker run -dit -p 8080:8080 --name hello springboot </code></pre><p>â€‹        </p><pre><code>[root@192 idea]# docker run -dit -p 8080:8080 --name hello springboot b8d1f65da8a8b71975b336952af497ba946d801294b1ac42d266da41ba1b6a0c[root@192 idea]# curl 127.0.0.1:8080/hellohello,ä¸€ä¸ªå¹³å‡¡deäºº</code></pre><p>â€‹        </p><p>4ã€å¤–ç½‘è®¿é—®<a href="http://192.168.64.131:8080/hello">192.168.64.131:8080&#x2F;hello</a></p><div class="tag-plugin image"><div class="image-bg"><img src="/posts/85fe2496/image-20230406190319237.png" alt="image-20230406190319237"></div><div class="image-meta"><span class="image-caption center">image-20230406190319237</span></div></div><h2 id="18-5-å‘å¸ƒ"><a href="#18-5-å‘å¸ƒ" class="headerlink" title="18.5 å‘å¸ƒ"></a>18.5 å‘å¸ƒ</h2><p>1ã€ ç™»å½•</p><pre><code>$ docker login -u ã€ä½ çš„ç”¨æˆ·åã€‘ -p ã€ä½ çš„å¯†ç ã€‘</code></pre><p>â€‹        </p><p>2ã€æ‰“æ ‡ç­¾</p><pre><code># docker tag é•œåƒid ä½ çš„è´¦æˆ·å/é•œåƒä»“åº“å:tagå$ docker tag f107ab2a9246 dockerywl/springboot</code></pre><p>â€‹        </p><p>3ã€å†æäº¤ pushé•œåƒ</p><pre><code># docker push ä½œè€…/é•œåƒ:TAG(ç‰ˆæœ¬)$ docker push dockerywl/springboot</code></pre><p>â€‹        </p><blockquote><p>æ€»ç»“</p></blockquote><p>ä»¥åæˆ‘ä»¬ä½¿ç”¨äº†Dockerä¹‹åï¼Œç»™åˆ«äººäº¤ä»˜å°±æ˜¯ä¸€ä¸ªé•œåƒå³å¯ï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å­¦ä¹ èµ„æ–™ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1og4y1q7M4&quot;&gt;ã€ç‹‚ç¥è¯´Javaã€‘Dockeræœ€æ–°è¶…è¯¦ç»†ç‰ˆæ•™ç¨‹é€šä¿—æ˜“æ‡‚_å“”å“©å“”å“©_bilibili&lt;/</summary>
      
    
    
    
    <category term="Docker" scheme="http://cvki.cn/categories/Docker/"/>
    
    
    <category term="Docker" scheme="http://cvki.cn/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Linuxç³»ç»Ÿå®Œæ•´å¤‡ä»½åŠæ¢å¤</title>
    <link href="http://cvki.cn/posts/28410c70.html"/>
    <id>http://cvki.cn/posts/28410c70.html</id>
    <published>2023-03-13T08:05:28.000Z</published>
    <updated>2023-08-18T08:21:25.634Z</updated>
    
    <content type="html"><![CDATA[<p>å…ˆè¿›å…¥ç³»ç»Ÿæ ¹ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /</span><br></pre></td></tr></table></figure><p>ä¸´æ—¶åˆ‡æ¢rootç”¨æˆ·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br></pre></td></tr></table></figure><p>å¤‡ä»½å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar cvpzf /SystemBackup.tgz --exclude=/proc --exclude=/mnt --exclude=/lost+found --exclude=/sys --exclude=/media --exclude=/run --exclude=/SystemBackup.tgz /</span><br></pre></td></tr></table></figure><p>æ¢å¤å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xvpfz SystemBackup.tgz -C /</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å…ˆè¿›å…¥ç³»ç»Ÿæ ¹ç›®å½•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code</summary>
      
    
    
    
    <category term="Linux" scheme="http://cvki.cn/categories/Linux/"/>
    
    
    <category term="Tips" scheme="http://cvki.cn/tags/Tips/"/>
    
  </entry>
  
  <entry>
    <title>12å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°</title>
    <link href="http://cvki.cn/posts/1ec33254.html"/>
    <id>http://cvki.cn/posts/1ec33254.html</id>
    <published>2023-02-24T17:02:12.000Z</published>
    <updated>2023-08-18T08:21:25.578Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å­˜å‚¨è¿‡ç¨‹åŸºæœ¬æ ¼å¼"><a href="#å­˜å‚¨è¿‡ç¨‹åŸºæœ¬æ ¼å¼" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹åŸºæœ¬æ ¼å¼"></a>å­˜å‚¨è¿‡ç¨‹åŸºæœ¬æ ¼å¼</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> åå­—</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">....</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><h2 id="ç±»å‹1-æ— å‚æ•°æ— è¿”å›å€¼"><a href="#ç±»å‹1-æ— å‚æ•°æ— è¿”å›å€¼" class="headerlink" title="ç±»å‹1 æ— å‚æ•°æ— è¿”å›å€¼"></a>ç±»å‹1 æ— å‚æ•°æ— è¿”å›å€¼</h2><p><strong>åˆ›å»ºä¸€ä¸ª æŸ¥è¯¢employeesæ‰€æœ‰æ•°æ®çš„å­˜å‚¨å‡½æ•° selc_all_data();</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># å®šä¹‰<span class="keyword">SQL</span>è¯­å¥ç»“æŸç¬¦å·(éƒ¨åˆ†<span class="keyword">SQL</span>ç®¡ç†å·¥å…·ä¼šä»¥åˆ†å·ç»“æŸä¼šå¯¼è‡´å­˜å‚¨è¿‡ç¨‹åœ¨è¿è¡Œè‡³<span class="keyword">END</span>å‰å°±ç»“æŸ)</span><br><span class="line">DELIMITER $ # é‡æ–°å®šä¹‰<span class="keyword">SQL</span>ç»“æŸç¬¦å· Navicatä¸æ”¯æŒ æ•…æ³¨é‡Š</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> selc_all_data()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="keyword">END</span> $ # å­˜å‚¨è¿‡ç¨‹ç»“æŸ</span><br><span class="line"></span><br><span class="line">DELIMITER ; # å­˜å‚¨è¿‡ç¨‹è¿è¡Œå®Œæˆå å†æ”¹å›æ¥ Navicatä¸æ”¯æŒ æ•…æ³¨é‡Š</span><br></pre></td></tr></table></figure><p><strong>å­˜å‚¨è¿‡ç¨‹è°ƒç”¨ CALL</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CALL</span> selc_all_data();</span><br></pre></td></tr></table></figure><h2 id="ç±»å‹2-æœ‰è¿”å›å€¼"><a href="#ç±»å‹2-æœ‰è¿”å›å€¼" class="headerlink" title="ç±»å‹2 æœ‰è¿”å›å€¼"></a>ç±»å‹2 æœ‰è¿”å›å€¼</h2><p><strong>åˆ›å»ºå­˜å‚¨è¿‡ç¨‹show_min_salaryï¼ŒæŸ¥çœ‹â€œemployeesâ€è¡¨çš„æœ€ä½è–ªèµ„å€¼ã€‚å¹¶å°†æœ€ä½è–ªèµ„é€šè¿‡OUTå‚æ•°â€œmsâ€è¾“å‡º</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> show_min_salary ( <span class="keyword">OUT</span> ms <span class="keyword">DOUBLE</span> ) # ç”¨msè¾“å‡º</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"><span class="built_in">MIN</span>( salary ) <span class="keyword">INTO</span> ms # ç”¨<span class="keyword">INTO</span> å°†ç»“æœèµ‹ç»™ms</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><p><strong>è°ƒç”¨</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CALL</span> show_min_salary(<span class="variable">@ms</span>);</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹å˜é‡å€¼</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="variable">@ms</span>;</span><br></pre></td></tr></table></figure><h2 id="ç±»å‹3-å¸¦å‚æ•°"><a href="#ç±»å‹3-å¸¦å‚æ•°" class="headerlink" title="ç±»å‹3 å¸¦å‚æ•°"></a>ç±»å‹3 å¸¦å‚æ•°</h2><p><strong>ä¾‹ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹show_someone_salary()ï¼ŒæŸ¥çœ‹â€empsâ€è¡¨çš„æŸä¸ªå‘˜å·¥çš„è–ªèµ„ï¼Œå¹¶ç”¨INå‚æ•°lnameè¾“å…¥å‘˜å·¥å§“åã€‚</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> show_someone_salary(<span class="keyword">IN</span> lname <span class="type">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SELECT</span> salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> last_name <span class="operator">=</span> lname;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><p><strong>è°ƒç”¨æ–¹å¼1</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CALL</span> show_someone_salary(<span class="string">&#x27;Abel&#x27;</span>); # æŸ¥è¯¢Abelçš„å·¥èµ„</span><br></pre></td></tr></table></figure><p><strong>è°ƒç”¨æ–¹å¼2 ç­‰å·&#x3D; æˆ– èµ‹å€¼ç­‰å·:&#x3D;</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="variable">@lname</span> <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span>; # ç­‰å·èµ‹å€¼</span><br><span class="line">æˆ–</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@lname</span> :<span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span>; # èµ‹å€¼ç­‰å·</span><br><span class="line"><span class="keyword">CALL</span> show_someone_salary(<span class="variable">@lname</span>); # è°ƒç”¨å˜é‡</span><br></pre></td></tr></table></figure><h2 id="ç±»å‹4-å¸¦IN-å’Œ-OUT"><a href="#ç±»å‹4-å¸¦IN-å’Œ-OUT" class="headerlink" title="ç±»å‹4 å¸¦IN å’Œ OUT"></a>ç±»å‹4 å¸¦IN å’Œ OUT</h2><p><strong>ä¾‹ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹show_someone_sly()ï¼ŒæŸ¥çœ‹employeesè¡¨çš„æŸä¸ªå‘˜å·¥çš„è–ªèµ„ï¼Œå¹¶ç”¨INå‚æ•°lnameè¾“å…¥å‘˜å·¥å§“åï¼Œç”¨0UTå‚æ•°slyè¾“å‡ºå‘˜å·¥è–ªèµ„ã€‚</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> show_someone_sly(<span class="keyword">IN</span> lname <span class="type">VARCHAR</span>(<span class="number">20</span>),<span class="keyword">OUT</span> sly <span class="keyword">DOUBLE</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SELECT</span> salary <span class="keyword">INTO</span> sly <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> last_name <span class="operator">=</span> lname;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@lname</span> <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span>; # èµ‹å€¼</span><br><span class="line"><span class="keyword">CALL</span> show_someone_sly(<span class="variable">@lname</span>,<span class="variable">@sly</span>); # è°ƒç”¨</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@sly</span>; # æŸ¥è¯¢</span><br></pre></td></tr></table></figure><h2 id="ç±»å‹5-å¸¦-INOUT"><a href="#ç±»å‹5-å¸¦-INOUT" class="headerlink" title="ç±»å‹5 å¸¦ INOUT"></a>ç±»å‹5 å¸¦ INOUT</h2><p><strong>ä¾‹ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹show_mgr_name()ï¼ŒæŸ¥è¯¢æŸä¸ªå‘˜å·¥é¢†å¯¼çš„å§“åï¼Œå¹¶ç”¨INOUTå‚æ•°â€œlnameâ€è¾“å…¥å‘˜å·¥å§“åï¼Œè¾“å‡ºé¢†å¯¼çš„å§“åã€‚</strong></p><p><strong>æ–¹å¼ä¸€ è‡ªè¿æ¥ + IN + OUT</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> show_mgr_name(<span class="keyword">IN</span> lname <span class="type">VARCHAR</span>(<span class="number">25</span>),<span class="keyword">OUT</span> mgr <span class="type">VARCHAR</span>(<span class="number">25</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SELECT</span> mgr.last_name <span class="keyword">INTO</span> mgr <span class="keyword">FROM</span> employees emp <span class="keyword">JOIN</span> employees mgr <span class="keyword">ON</span> mgr.employee_id <span class="operator">=</span> emp.manager_id <span class="keyword">AND</span> emp.last_name <span class="operator">=</span> lname;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><ul><li><p>èµ‹å€¼</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="variable">@lname</span> <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span>;</span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CALL</span> show_mgr_name(<span class="variable">@lname</span>,<span class="variable">@mgr</span>);</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="variable">@mgr</span>;</span><br></pre></td></tr></table></figure></li></ul><p><strong>æ–¹å¼äºŒ INOUT</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span>  show_mgr(<span class="keyword">INOUT</span> lname <span class="type">VARCHAR</span>(<span class="number">25</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SELECT</span> mgr.last_name <span class="keyword">INTO</span> lname <span class="keyword">FROM</span> employees emp <span class="keyword">JOIN</span> employees mgr <span class="keyword">ON</span> mgr.employee_id <span class="operator">=</span> emp.manager_id <span class="keyword">AND</span> emp.last_name <span class="operator">=</span> lname;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><ul><li>èµ‹å€¼</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="variable">@lname</span> <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>è°ƒç”¨</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CALL</span> show_mgr(<span class="variable">@lname</span>);</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç»“æœ</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="variable">@lname</span>;</span><br></pre></td></tr></table></figure><h1 id="å­˜å‚¨å‡½æ•°"><a href="#å­˜å‚¨å‡½æ•°" class="headerlink" title="å­˜å‚¨å‡½æ•°"></a>å­˜å‚¨å‡½æ•°</h1><p><strong>ä¾‹ï¼šåˆ›å»ºå­˜å‚¨å‡½æ•°ï¼Œåç§°ä¸ºemail_by_name()ï¼Œå‚æ•°å®šä¹‰ä¸ºç©ºï¼Œè¯¥å‡½æ•°æŸ¥è¯¢Abelçš„emailï¼Œå¹¶è¿”å›ï¼Œæ•°æ®ç±»å‹ä¸ºå­—ç¬¦ä¸²å‹ã€‚</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> eml_by_name()</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="type">VARCHAR</span>(<span class="number">25</span>)</span><br><span class="line"><span class="keyword">DETERMINISTIC</span> # çº¦æŸ</span><br><span class="line"><span class="keyword">CONTAINS</span> <span class="keyword">SQL</span> # çº¦æŸ</span><br><span class="line"><span class="keyword">READS</span> <span class="keyword">SQL</span> DATA # çº¦æŸ</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">RETURN</span> (<span class="keyword">SELECT</span> email <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span>);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><ul><li>è°ƒç”¨</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> eml_by_name();</span><br></pre></td></tr></table></figure><p><strong>ä¸¾ä¾‹2ï¼šåˆ›å»ºå­˜å‚¨å‡½æ•°ï¼Œåç§°ä¸ºemail_by_id(), å‚æ•°ä¼ å…¥em_idï¼Œè¯¥å‡½æ•°æŸ¥è¯¢emp idçš„emailï¼Œå¹¶è¿”å›ï¼Œæ•°æ®ç±»å‹ä¸ºå­—ç¬¦ä¸²å‹ã€‚</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#åˆ›å»ºå‡½æ•°å‰æ‰§è¡Œæ­¤è¯­å¥ï¼Œä¿è¯å‡½æ•°çš„åˆ›å»ºä¼šæˆåŠŸ ä¸ç”¨å†™çº¦æŸ</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> log_bin_trust_function_creators <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> email_by_id(em_id <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="type">VARCHAR</span>(<span class="number">25</span>) # è®¾ç½®è¿”å›ç±»å‹</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">RETURN</span> (<span class="keyword">SELECT</span> email <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> employee_id <span class="operator">=</span> em_id);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><ul><li>è°ƒç”¨</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> email_by_id(<span class="number">101</span>);</span><br></pre></td></tr></table></figure><ul><li>è°ƒç”¨2</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="variable">@emid</span> :<span class="operator">=</span> <span class="number">102</span>; # èµ‹å€¼</span><br><span class="line"><span class="keyword">SELECT</span> email_by_id(<span class="variable">@emid</span>);</span><br></pre></td></tr></table></figure><p><strong>ä¸¾ä¾‹3ï¼šåˆ›å»ºå­˜å‚¨å‡½æ•°count_by_id()ï¼Œå‚æ•°ä¼ å…¥dept_idï¼Œè¯¥å‡½æ•°æŸ¥è¯¢dept_idéƒ¨é—¨çš„å‘˜å·¥äººæ•°ï¼Œå¹¶è¿”å›ï¼Œæ•°æ®ç±»å‹ä¸ºæ•´å‹ã€‚</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> count_by_id(dept_id <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="type">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">RETURN</span> (<span class="keyword">SELECT</span> <span class="built_in">count</span>(department_id) <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department_id <span class="operator">=</span> dept_id);</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> count_by_id(<span class="number">30</span>);</span><br></pre></td></tr></table></figure><h1 id="å¯¹æ¯”å­˜å‚¨å‡½æ•°å’Œå­˜å‚¨è¿‡ç¨‹"><a href="#å¯¹æ¯”å­˜å‚¨å‡½æ•°å’Œå­˜å‚¨è¿‡ç¨‹" class="headerlink" title="å¯¹æ¯”å­˜å‚¨å‡½æ•°å’Œå­˜å‚¨è¿‡ç¨‹"></a>å¯¹æ¯”å­˜å‚¨å‡½æ•°å’Œå­˜å‚¨è¿‡ç¨‹</h1><table><thead><tr><th align="center">å¯¹æ¯”</th><th align="center">å…³é”®å­—</th><th align="center">è°ƒç”¨è¯­æ³•</th><th align="center">è¿”å›å€¼</th><th align="center">åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="center">å­˜å‚¨è¿‡ç¨‹</td><td align="center">PROCEDURE</td><td align="center">CALL å­˜å‚¨è¿‡ç¨‹</td><td align="center">0ç†è§£ä¸ºæœ‰0ä¸ªæˆ–å¤šä¸ª</td><td align="center">ä¸€èˆ¬ç”¨äºæ›´æ–°</td></tr><tr><td align="center">å­˜å‚¨å‡½æ•°</td><td align="center">FUNCTION</td><td align="center">SELECT å‡½æ•°()</td><td align="center">åªèƒ½æ˜¯ä¸€ä¸ª</td><td align="center">æŸ¥è¯¢ç»“æœä¸ºä¸€ä¸ªå€¼å¹¶è¿”å›æ—¶</td></tr></tbody></table><p>æ­¤å¤–ï¼Œ<code>å­˜å‚¨å‡½æ•°å¯ä»¥æ”¾åœ¨æŸ¥è¯¢è¯­å¥ä¸­ä½¿ç”¨ï¼Œå­˜å‚¨è¿‡ç¨‹ä¸è¡Œ</code>ã€‚</p><p>åä¹‹ï¼Œå­˜å‚¨è¿‡ç¨‹çš„åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼ŒåŒ…æ‹¬èƒ½å¤Ÿæ‰§è¡Œå¯¹è¡¨çš„æ“ä½œï¼ˆæ¯”å¦‚åˆ›å»ºè¡¨ï¼Œåˆ é™¤è¡¨ç­‰ï¼‰å’Œäº‹åŠ¡æ“ä½œï¼Œè¿™äº›åŠŸèƒ½æ˜¯å­˜å‚¨å‡½æ•°ä¸å…·å¤‡çš„ã€‚</p><p><strong>å­˜å‚¨è¿‡ç¨‹ã€å­˜å‚¨å‡½æ•°çš„æŸ¥çœ‹</strong></p><ul><li>ä½¿ç”¨SHOW CREATEè¯­å¥æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„åˆ›å»ºä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> show_mgr;</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> count_by_id;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨SHOW STATUSè¯­å¥æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„çŠ¶æ€ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">PROCEDURE</span> STATUS <span class="keyword">LIKE</span> <span class="string">&#x27;show_min_salary&#x27;</span>;</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">FUNCTION</span> STATUS <span class="keyword">LIKE</span> <span class="string">&#x27;email_by_id&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>å­˜å‚¨è¿‡ç¨‹ &#x2F; å­˜å‚¨å‡½æ•° åˆ é™¤</strong></p><p><code>DROP FUNCTION / PROCEDURE [IF EXISTS] å­˜å‚¨è¿‡ç¨‹å / å‡½æ•°å</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> IF <span class="keyword">EXISTS</span> count_by_id;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> IF <span class="keyword">EXISTS</span> show_mgr;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å­˜å‚¨è¿‡ç¨‹åŸºæœ¬æ ¼å¼&quot;&gt;&lt;a href=&quot;#å­˜å‚¨è¿‡ç¨‹åŸºæœ¬æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;å­˜å‚¨è¿‡ç¨‹åŸºæœ¬æ ¼å¼&quot;&gt;&lt;/a&gt;å­˜å‚¨è¿‡ç¨‹åŸºæœ¬æ ¼å¼&lt;/h1&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td clas</summary>
      
    
    
    
    <category term="Language" scheme="http://cvki.cn/categories/Language/"/>
    
    
    <category term="Database" scheme="http://cvki.cn/tags/Database/"/>
    
    <category term="MariaDB" scheme="http://cvki.cn/tags/MariaDB/"/>
    
  </entry>
  
  <entry>
    <title>11è§†å›¾</title>
    <link href="http://cvki.cn/posts/c336cef3.html"/>
    <id>http://cvki.cn/posts/c336cef3.html</id>
    <published>2023-02-24T06:50:39.000Z</published>
    <updated>2023-08-18T08:21:25.578Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è§†å›¾çš„ç†è§£"><a href="#è§†å›¾çš„ç†è§£" class="headerlink" title="è§†å›¾çš„ç†è§£"></a>è§†å›¾çš„ç†è§£</h1><ul><li>1 è§†å›¾ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œæœ¬èº«æ˜¯ä¸å­˜å‚¨æ•°æ®çš„ã€‚</li><li>2 è§†å›¾çš„æœ¬è´¨ï¼Œå°±å¯ä»¥çœ‹åšæ˜¯å­˜å‚¨èµ·æ¥çš„SELECTè¯­å¥</li><li>3 è§†å›¾ä¸­SELECTè¯­å¥ä¸­æ¶‰åŠåˆ°çš„è¡¨ï¼Œç§°ä¸ºåŸºè¡¨</li><li>4  é’ˆå¯¹è§†å›¾åšDMLæ“ä½œï¼Œä¼šå½±å“åˆ°å¯¹åº”çš„åŸºè¡¨ä¸­çš„æ•°æ®ã€‚åä¹‹äº¦ç„¶ã€‚</li><li>5 è§†å›¾æœ¬èº«çš„åˆ é™¤ï¼Œä¸ä¼šå¯¼è‡´åŸºè¡¨ä¸­æ•°æ®çš„åˆ é™¤ã€‚</li><li>6 è§†å›¾çš„åº”ç”¨åœºæ™¯ï¼š<br>é’ˆå¯¹äºå°å‹é¡¹ç›®ï¼Œä¸æ¨èä½¿ç”¨è§†å›¾ã€‚é’ˆå¯¹äºå¤§å‹é¡¹ç›®ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è§†å›¾ã€‚è§†å›¾çš„ä¼˜ç‚¹ï¼šç®€åŒ–æŸ¥è¯¢ï¼šæ§åˆ¶æ•°æ®çš„è®¿é—®</li></ul><h1 id="åˆ›å»ºè§†å›¾"><a href="#åˆ›å»ºè§†å›¾" class="headerlink" title="åˆ›å»ºè§†å›¾"></a>åˆ›å»ºè§†å›¾</h1><p><code>CREATE VIEW è§†å›¾å AS æŸ¥è¯¢è¯­å¥</code></p><p><strong>åˆ«åä½œä¸ºè§†å›¾ä¸­çš„å­—æ®µå</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> vu1 <span class="keyword">AS</span> <span class="keyword">SELECT</span> employee_id <span class="keyword">AS</span> eid,last_name <span class="keyword">AS</span> lname,salary <span class="keyword">AS</span> sly <span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> vu1;</span><br></pre></td></tr></table></figure><p><strong>åˆ›å»ºè§†å›¾æ—¶è®¾ç½®å­—æ®µå</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> vu2(eid,lname,sly) <span class="keyword">AS</span> <span class="keyword">SELECT</span> employee_id,last_name,salary <span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> vu2;</span><br></pre></td></tr></table></figure><p><strong>æŸ¥è¯¢å„éƒ¨é—¨å¹³å‡å·¥èµ„ è§†å›¾</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> vu_avsly(dpid,avsly) <span class="keyword">AS</span> </span><br><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary) </span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> vu_avsly;</span><br></pre></td></tr></table></figure><p><strong>åˆ©ç”¨è§†å›¾æ ¼å¼åŒ–æ•°æ® éœ€æ±‚ï¼šå‘˜å·¥å§“å(å‘˜å·¥éƒ¨é—¨)</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> vu_eminfo(eminfo) <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(last_name,<span class="string">&#x27; ( &#x27;</span>,department_name,<span class="string">&#x27; ) &#x27;</span>)  # æ‹¼æ¥</span><br><span class="line"><span class="keyword">FROM</span> employees <span class="keyword">AS</span> el <span class="keyword">JOIN</span> departments <span class="keyword">AS</span> dp </span><br><span class="line"><span class="keyword">ON</span> el.department_id <span class="operator">=</span> dp.department_id;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> vu_eminfo;</span><br></pre></td></tr></table></figure><p><strong>ä¹Ÿå¯ä»¥åŸºäºè§†å›¾å†åˆ›å»ºè§†å›¾ ä¸å†åˆ—ä¸¾</strong></p><h1 id="æŸ¥çœ‹è§†å›¾"><a href="#æŸ¥çœ‹è§†å›¾" class="headerlink" title="æŸ¥çœ‹è§†å›¾"></a>æŸ¥çœ‹è§†å›¾</h1><p><strong>è¯­æ³•1ï¼šæŸ¥çœ‹æ•°æ®åº“çš„è¡¨å¯¹è±¡ã€è§†å›¾å¯¹è±¡ SHOW TABLES;</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br></pre></td></tr></table></figure><p><strong>è¯­æ³•2ï¼šæŸ¥çœ‹è§†å›¾çš„ç»“æ„ DESC&#x2F;DESCRIBE è§†å›¾åç§°;</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESC</span> vu2;</span><br><span class="line"><span class="keyword">DESCRIBE</span> vu2;</span><br></pre></td></tr></table></figure><p><strong>è¯­æ³•3ï¼šæŸ¥çœ‹è§†å›¾çš„å±æ€§ä¿¡æ¯</strong></p><p>æŸ¥çœ‹è§†å›¾ä¿¡æ¯ï¼ˆæ˜¾ç¤ºæ•°æ®è¡¨çš„å­˜å‚¨å¼•æ“ã€ç‰ˆæœ¬ã€æ•°æ®è¡Œæ•°å’Œæ•°æ®å¤§å°ç­‰ï¼‰</p><p><code>SHOW TABLE STATUS LIKE&#39;è§†å›¾åç§°&#39;\G; </code> æ‰§è¡Œç»“æœæ˜¾ç¤ºï¼Œ</p><p>æ³¨é‡ŠCommentä¸ºVIEWï¼Œè¯´æ˜è¯¥è¡¨ä¸ºè§†å›¾ï¼Œå…¶ä»–çš„ä¿¡æ¯ä¸ºNULLï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªè™šè¡¨ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLE</span> STATUS <span class="keyword">LIKE</span> <span class="string">&#x27;vu_%&#x27;</span>;</span><br></pre></td></tr></table></figure><p>è¯­æ³•4ï¼šæŸ¥çœ‹è§†å›¾çš„è¯¦ç»†å®šä¹‰ä¿¡æ¯SHOW CREATE VIEW è§†å›¾åç§°ï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> vu2;</span><br></pre></td></tr></table></figure><h1 id="æ›´æ–°è§†å›¾"><a href="#æ›´æ–°è§†å›¾" class="headerlink" title="æ›´æ–°è§†å›¾"></a>æ›´æ–°è§†å›¾</h1><ul><li>æ›´æ–°è§†å›¾ä¸­çš„æ•°æ®æ—¶, è¡¨ä¸­çš„æ•°æ®ä¹Ÿä¼šæ›´æ–° åŒ…æ‹¬å¢åˆ æ”¹</li><li>æ›´æ–°è¡¨ä¸­çš„æ•°æ®æ—¶, è§†å›¾ä¸­çš„æ•°æ®ä¹Ÿä¼šæ›´æ–°</li><li>è§†å›¾ä¸­çš„æ•°æ®ä¸ä¸€å®šèƒ½â€æ›´æ–°â€æˆåŠŸ<br> æ¯”å¦‚ æ ¹æ®éƒ¨é—¨å·¥èµ„ç®—å‡ºæ¥çš„å¹³å‡å·¥èµ„æ‰€åˆ›å»ºçš„è§†å›¾, æ˜¯ä¸èƒ½ç›´æ¥æ›´æ–°è§†å›¾çš„å¹³å‡å·¥èµ„çš„<br> å› ä¸ºå¹³å‡å·¥èµ„æ˜¯ç®—å‡ºæ¥çš„, æ˜¯åœ¨åŸè¡¨é‡Œä¸å­˜åœ¨çš„ åªæœ‰ä¸€ä¸€å¯¹åº”çš„å­—æ®µæ‰èƒ½æ›´æ–°</li></ul><h1 id="ä¿®æ”¹è§†å›¾"><a href="#ä¿®æ”¹è§†å›¾" class="headerlink" title="ä¿®æ”¹è§†å›¾"></a>ä¿®æ”¹è§†å›¾</h1><p><strong>æ–¹å¼ä¸€ CREATE OR REPLACE VIEW</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> vu_1; # æŸ¥è¯¢vu_1è§†å›¾, æ•°æ®<span class="number">107</span>æ¡</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> vu_1(eid,lname,sly) <span class="keyword">AS</span> </span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary </span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">WHERE</span> employee_id <span class="operator">&lt;</span> <span class="number">110</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> vu_1; # å†æ¬¡æŸ¥è¯¢vu_1è§†å›¾, æ•°æ®<span class="number">10</span>æ¡</span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼äºŒ ALTER VIEW</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">VIEW</span> vu_1(eid,lname,sly) <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary </span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">WHERE</span> employee_id <span class="operator">&lt;</span> <span class="number">105</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> vu_1; # å†æŸ¥è¯¢ æ•°æ®<span class="number">5</span>æ¡</span><br></pre></td></tr></table></figure><h1 id="åˆ é™¤è§†å›¾"><a href="#åˆ é™¤è§†å›¾" class="headerlink" title="åˆ é™¤è§†å›¾"></a>åˆ é™¤è§†å›¾</h1><p><code>DROP VIEW [IF EXISTS] è§†å›¾å</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> IF <span class="keyword">EXISTS</span> vu2;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è§†å›¾çš„ç†è§£&quot;&gt;&lt;a href=&quot;#è§†å›¾çš„ç†è§£&quot; class=&quot;headerlink&quot; title=&quot;è§†å›¾çš„ç†è§£&quot;&gt;&lt;/a&gt;è§†å›¾çš„ç†è§£&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;1 è§†å›¾ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œæœ¬èº«æ˜¯ä¸å­˜å‚¨æ•°æ®çš„ã€‚&lt;/li&gt;
&lt;li&gt;2 è§†å›¾çš„æœ¬è´¨ï¼Œå°±å¯ä»¥çœ‹åšæ˜¯å­˜å‚¨</summary>
      
    
    
    
    <category term="Language" scheme="http://cvki.cn/categories/Language/"/>
    
    
    <category term="Database" scheme="http://cvki.cn/tags/Database/"/>
    
    <category term="MariaDB" scheme="http://cvki.cn/tags/MariaDB/"/>
    
  </entry>
  
  <entry>
    <title>10çº¦æŸ</title>
    <link href="http://cvki.cn/posts/b420821e.html"/>
    <id>http://cvki.cn/posts/b420821e.html</id>
    <published>2023-02-23T08:38:55.000Z</published>
    <updated>2023-08-18T08:21:25.578Z</updated>
    
    <content type="html"><![CDATA[<h1 id="éç©ºçº¦æŸ-NOT-NULL-åªæœ‰åˆ—çº§çº¦æŸ"><a href="#éç©ºçº¦æŸ-NOT-NULL-åªæœ‰åˆ—çº§çº¦æŸ" class="headerlink" title="éç©ºçº¦æŸ NOT NULL åªæœ‰åˆ—çº§çº¦æŸ"></a>éç©ºçº¦æŸ NOT NULL åªæœ‰åˆ—çº§çº¦æŸ</h1><p><strong>å»ºè¡¨æ—¶ CREATE TABLE</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">salary <span class="type">INT</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx(last_name,salary) <span class="keyword">VALUES</span>(<span class="string">&#x27;Tom&#x27;</span>,<span class="number">3000</span>); # æŠ¥é”™,å› ä¸ºidæœ‰éç©ºçº¦æŸ</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹è¡¨ç»“æ„æ—¶-æ·»åŠ éç©ºçº¦æŸ-ALTER-TABLE"><a href="#ä¿®æ”¹è¡¨ç»“æ„æ—¶-æ·»åŠ éç©ºçº¦æŸ-ALTER-TABLE" class="headerlink" title="ä¿®æ”¹è¡¨ç»“æ„æ—¶ æ·»åŠ éç©ºçº¦æŸ ALTER TABLE"></a>ä¿®æ”¹è¡¨ç»“æ„æ—¶ æ·»åŠ éç©ºçº¦æŸ ALTER TABLE</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx MODIFY last_name <span class="type">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx(id,salary) <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="number">3000</span>); # æŠ¥é”™,å› ä¸ºlast_nameåŠ äº†éç©ºçº¦æŸ</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹è¡¨ç»“æ„æ—¶-åˆ é™¤éç©ºçº¦æŸ"><a href="#ä¿®æ”¹è¡¨ç»“æ„æ—¶-åˆ é™¤éç©ºçº¦æŸ" class="headerlink" title="ä¿®æ”¹è¡¨ç»“æ„æ—¶ åˆ é™¤éç©ºçº¦æŸ"></a>ä¿®æ”¹è¡¨ç»“æ„æ—¶ åˆ é™¤éç©ºçº¦æŸ</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx MODIFY last_name <span class="type">VARCHAR</span>(<span class="number">15</span>);</span><br></pre></td></tr></table></figure><h1 id="å”¯ä¸€æ€§çº¦æŸ-UNIQUE"><a href="#å”¯ä¸€æ€§çº¦æŸ-UNIQUE" class="headerlink" title="å”¯ä¸€æ€§çº¦æŸ UNIQUE"></a>å”¯ä¸€æ€§çº¦æŸ UNIQUE</h1><p><strong>æœ‰åˆ—çº§çº¦æŸå’Œè¡¨çº§çº¦æŸ å¯ä»¥ä¸ºNULL å¤šä¸ªNULLå¯ä»¥é‡å¤</strong><br><strong>åœ¨åˆ›å»ºå”¯ä¸€çº¦æŸçš„æ—¶å€™ï¼Œå¦‚æœä¸ç»™å”¯ä¸€çº¦æŸå‘½åï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒã€‚</strong></p><h2 id="å»ºè¡¨æ—¶"><a href="#å»ºè¡¨æ—¶" class="headerlink" title="å»ºè¡¨æ—¶"></a>å»ºè¡¨æ—¶</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx1(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">salary <span class="keyword">DOUBLE</span>(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx1(id,last_name,salary) <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;å†°ç³–&#x27;</span>,<span class="number">10000</span>),(<span class="number">1</span>,<span class="string">&#x27;å†°ç³–&#x27;</span>,<span class="number">10000</span>); # æŠ¥é”™,idé‡å¤</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx2(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">UNIQUE</span>, # åˆ—çº§çº¦æŸ</span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">tel <span class="type">INT</span>,</span><br><span class="line">salary <span class="keyword">DOUBLE</span>(<span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line"><span class="keyword">CONSTRAINT</span> uni_e <span class="keyword">UNIQUE</span>(email) # è¡¨çº§çº¦æŸ</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="ALTER-TABLEæ—¶æ·»åŠ "><a href="#ALTER-TABLEæ—¶æ·»åŠ " class="headerlink" title="ALTER TABLEæ—¶æ·»åŠ "></a>ALTER TABLEæ—¶æ·»åŠ </h2><p><strong>æ–¹å¼1 ADD</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx2 <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span>(tel); # æ— åˆ«å</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx2 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> uni_t <span class="keyword">UNIQUE</span>(tel); # æœ‰åˆ«å</span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼äºŒ MODIFY</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx2 MODIFY tel <span class="type">INT</span> <span class="keyword">UNIQUE</span>;</span><br></pre></td></tr></table></figure><h1 id="ç»„åˆ-å¤åˆåˆ—å”¯ä¸€çº¦æŸ"><a href="#ç»„åˆ-å¤åˆåˆ—å”¯ä¸€çº¦æŸ" class="headerlink" title="ç»„åˆ&#x2F;å¤åˆåˆ—å”¯ä¸€çº¦æŸ"></a>ç»„åˆ&#x2F;å¤åˆåˆ—å”¯ä¸€çº¦æŸ</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx3(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">uname <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">pwd <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line"><span class="keyword">CONSTRAINT</span> uni_uname_pwd  <span class="keyword">UNIQUE</span>(uname,pwd) # ç”¨æˆ·åå’Œå¯†ç ä¸èƒ½åŒæ—¶ç›¸åŒ</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx3 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;a111&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;cde&#x27;</span>,<span class="string">&#x27;a111&#x27;</span>); # å¯ä»¥æˆåŠŸ</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx3 <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;a111&#x27;</span>),(<span class="number">4</span>,<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;a111&#x27;</span>); # å¤±è´¥,ç”¨æˆ·åå’Œå¯†ç åŒæ—¶ç›¸åŒ</span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤å”¯ä¸€æ€§çº¦æŸ ALTER TABLE è¡¨å DROP INDEX ç´¢å¼•å</strong></p><ul><li>1  æ·»åŠ å”¯ä¸€æ€§çº¦æŸçš„åˆ—ä¸Š ä¼š è‡ªåŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚åˆ é™¤å”¯ä¸€çº¦æŸåªèƒ½é€šè¿‡åˆ é™¤å”¯ä¸€ç´¢å¼•çš„æ–¹å¼åˆ é™¤ã€‚</li><li>2 åˆ é™¤æ—¶éœ€è¦æŒ‡å®šå”¯ä¸€ç´¢å¼•åï¼Œå”¯ä¸€ç´¢å¼•åå°±å’Œå”¯ä¸€çº¦æŸåä¸€æ ·ã€‚</li><li>3 å¦‚æœåˆ›å»ºå”¯ä¸€çº¦æŸæ—¶æœªæŒ‡å®šåç§°ï¼Œå¦‚æœæ˜¯å•åˆ—ï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒï¼› å¦‚æœæ˜¯ç»„åˆ&#x2F;å¤åˆåˆ—ï¼Œé‚£ä¹ˆé»˜è®¤å’Œï¼ˆï¼‰ä¸­æ’åœ¨ç¬¬ä¸€ä¸ªçš„åˆ—åç›¸åŒã€‚ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å”¯ä¸€æ€§çº¦æŸå</li></ul><p><strong>æŸ¥çœ‹è¡¨ç´¢å¼• SHOW INDEX FROM è¡¨å</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx3 <span class="keyword">DROP</span> INDEX id;</span><br></pre></td></tr></table></figure><h1 id="ä¸»é”®çº¦æŸ-PRIMARY-KEY"><a href="#ä¸»é”®çº¦æŸ-PRIMARY-KEY" class="headerlink" title="ä¸»é”®çº¦æŸ PRIMARY KEY"></a>ä¸»é”®çº¦æŸ PRIMARY KEY</h1><p><strong>ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”® å”¯ä¸€ä¸”éç©º æ‰€ä»¥ ä¸»é”®çº¦æŸ &#x3D; å”¯ä¸€çº¦æŸ + éç©ºçº¦æŸ</strong><br><code>ä¸»é”®çº¦æŸçš„åˆ«åæ€»æ˜¯ä¸ºPRIMARY æ‰€ä»¥æ— éœ€èµ·åˆ«å</code></p><h2 id="CREATE-TABLEæ—¶åˆ›å»º"><a href="#CREATE-TABLEæ—¶åˆ›å»º" class="headerlink" title="CREATE TABLEæ—¶åˆ›å»º"></a>CREATE TABLEæ—¶åˆ›å»º</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx1(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY, # åˆ—çº§çº¦æŸ</span><br><span class="line">uname <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">salary <span class="type">INT</span>,</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx2(</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line">uname <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">salary <span class="type">INT</span>,</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY(id) # è¡¨çº§çº¦æŸ</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="ALTER-TABLEæ·»åŠ ä¸»é”®çº¦æŸ"><a href="#ALTER-TABLEæ·»åŠ ä¸»é”®çº¦æŸ" class="headerlink" title="ALTER TABLEæ·»åŠ ä¸»é”®çº¦æŸ"></a>ALTER TABLEæ·»åŠ ä¸»é”®çº¦æŸ</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx2 <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(id); # æ–¹å¼ä¸€ <span class="keyword">ADD</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx2 MODIFY id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY; # æ–¹å¼äºŒ MODIFY</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤ä¸»é”®-å®é™…å¼€å‘ä¸­ä¸ä¼šè¿™æ ·å»åš"><a href="#åˆ é™¤ä¸»é”®-å®é™…å¼€å‘ä¸­ä¸ä¼šè¿™æ ·å»åš" class="headerlink" title="åˆ é™¤ä¸»é”®(å®é™…å¼€å‘ä¸­ä¸ä¼šè¿™æ ·å»åš)"></a>åˆ é™¤ä¸»é”®(å®é™…å¼€å‘ä¸­ä¸ä¼šè¿™æ ·å»åš)</h2><p><code>ALTER TABLE ... DROP PRIMARY KEY</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx2 <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br></pre></td></tr></table></figure><h1 id="ä¸»é”®è‡ªå¢é•¿-AUTO-INCREMENT"><a href="#ä¸»é”®è‡ªå¢é•¿-AUTO-INCREMENT" class="headerlink" title="ä¸»é”®è‡ªå¢é•¿ AUTO_INCREMENT"></a>ä¸»é”®è‡ªå¢é•¿ AUTO_INCREMENT</h1><h2 id="CREATE-TABLE-æ—¶"><a href="#CREATE-TABLE-æ—¶" class="headerlink" title="CREATE TABLE æ—¶"></a>CREATE TABLE æ—¶</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">uname <span class="type">VARCHAR</span>(<span class="number">15</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx(uname)  <span class="keyword">VALUES</span> (<span class="string">&#x27;aaa&#x27;</span>),(<span class="string">&#x27;bbb&#x27;</span>); # å³ä½¿idæœªå†™ä¹Ÿä¸ä¼šæŠ¥é”™, å› ä¸ºidæœ‰è‡ªå¢é•¿</span><br></pre></td></tr></table></figure><h2 id="ALTER-TABLE-æ—¶å¢åŠ "><a href="#ALTER-TABLE-æ—¶å¢åŠ " class="headerlink" title="ALTER TABLE æ—¶å¢åŠ "></a>ALTER TABLE æ—¶å¢åŠ </h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx MODIFY id <span class="type">INT</span> AUTO_INCREMENT;</span><br></pre></td></tr></table></figure><h2 id="ALTER-TABLE-æ—¶åˆ é™¤"><a href="#ALTER-TABLE-æ—¶åˆ é™¤" class="headerlink" title="ALTER TABLE æ—¶åˆ é™¤"></a>ALTER TABLE æ—¶åˆ é™¤</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx MODIFY id <span class="type">INT</span>;</span><br></pre></td></tr></table></figure><h2 id="MySQL5-7-MySQL8-0"><a href="#MySQL5-7-MySQL8-0" class="headerlink" title="MySQL5.7 &amp; MySQL8.0"></a>MySQL5.7 &amp; MySQL8.0</h2><p>** åœ¨5.7ä¸­ åˆ é™¤æŸä¸ªè‡ªå¢é•¿çš„å€¼åé‡æ–°æ’å…¥çš„å€¼ä¼šæ¥ç€è‡ªå¢**</p><ul><li>ä¾‹å¦‚, 1,2,3,4 åˆ æ‰4åé‡æ–°æ–°å¢ ä¸‹ä¸€ä¸ªä¹Ÿä¸º5 ä½†æ˜¯, è‹¥æ˜¯åˆ é™¤4åé‡å¯MySQLæœåŠ¡ åˆ™æ–°å¢çš„ä¹Ÿä¼š4 å› ä¸ºMySQL5.7çš„è®°å½•æ˜¯è®°å½•åœ¨å†…å­˜é‡Œçš„</li></ul><p><strong>åœ¨MySQL8.0ä¸­ åˆ é™¤æŸä¸ªè‡ªå¢é•¿çš„å€¼åé‡æ–°æ’å…¥çš„å€¼ä¼šæ¥ç€è‡ªå¢</strong></p><ul><li>ä¾‹å¦‚, 1,2,3,4 åˆ æ‰4åé‡æ–°æ–°å¢ ä¸‹ä¸€ä¸ªä¹Ÿä¸º5</li><li>ä½†ä¸åŒ5.7çš„æ˜¯ å³ä½¿åˆ é™¤4åé‡å¯MySQLæœåŠ¡ ä¸‹ä¸€ä¸ªå¢åŠ çš„ä¹Ÿä¸º5 å› ä¸ºMySQL8.0æ–°ç‰¹æ€§ è‡ªå¢æŒä¹…åŒ– è®°å½•åœ¨äº†<code>é‡åšæ—¥å¿—</code>ä¸­</li></ul><h1 id="å¤–é”®çº¦æŸ-FOREIGN-KEY"><a href="#å¤–é”®çº¦æŸ-FOREIGN-KEY" class="headerlink" title="å¤–é”®çº¦æŸ FOREIGN KEY"></a>å¤–é”®çº¦æŸ FOREIGN KEY</h1><p><strong>ä¸»è¡¨å’Œä»è¡¨&#x2F;çˆ¶è¡¨å’Œå­è¡¨ä¸»è¡¨ï¼ˆçˆ¶è¡¨ï¼‰ï¼šè¢«å¼•ç”¨çš„è¡¨ï¼Œè¢«å‚è€ƒçš„è¡¨</strong><br><strong>ä»è¡¨ï¼ˆå­è¡¨ï¼‰ï¼šå¼•ç”¨åˆ«äººçš„è¡¨ï¼Œå‚è€ƒåˆ«äººçš„è¡¨</strong></p><ul><li>ä¾‹å¦‚ï¼šå‘˜å·¥è¡¨çš„å‘˜å·¥æ‰€åœ¨éƒ¨é—¨è¿™ä¸ªå­—æ®µçš„å€¼è¦å‚è€ƒéƒ¨é—¨è¡¨ï¼šéƒ¨é—¨è¡¨æ˜¯ä¸»è¡¨ï¼Œå‘˜å·¥è¡¨æ˜¯ä»è¡¨ã€‚</li><li>ä¾‹å¦‚ï¼šå­¦ç”Ÿè¡¨ã€è¯¾ç¨‹è¡¨ã€é€‰è¯¾è¡¨ï¼šé€‰è¯¾è¡¨çš„å­¦ç”Ÿå’Œè¯¾ç¨‹è¦åˆ†åˆ«å‚è€ƒå­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨ï¼Œ å­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨æ˜¯ä¸»è¡¨ï¼Œé€‰è¯¾è¡¨æ˜¯ä»è¡¨ã€‚</li></ul><h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><ul><li>(1ï¼‰ä»è¡¨çš„å¤–é”®åˆ—ï¼Œå¿…é¡»å¼•ç”¨&#x2F;å‚è€ƒä¸»è¡¨çš„é”®ä¸»é”®æˆ–å”¯ä¸€çº¦æŸçš„åˆ— ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè¢«ä¾èµ–&#x2F;è¢«å‚è€ƒçš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„</li><li>(2ï¼‰åœ¨åˆ›å»ºå¤–é”®çº¦æŸæ—¶ï¼Œå¦‚æœä¸ç»™å¤–é”®çº¦æŸå‘½åï¼Œ<code>é»˜è®¤åä¸æ˜¯åˆ—åï¼Œè€Œæ˜¯è‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªå¤–é”®å</code>ï¼ˆä¾‹å¦‚student_.ibfk_1ï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå¤–é”®çº¦æŸåã€‚</li><li>(3ï¼‰åˆ›å»ºï¼ˆCREATEï¼‰è¡¨æ—¶å°±æŒ‡å®šå¤–é”®çº¦æŸçš„è¯ï¼Œå…ˆåˆ›å»ºä¸»è¡¨ï¼Œå†åˆ›å»ºä»è¡¨</li><li>(4ï¼‰åˆ è¡¨æ—¶ï¼Œå…ˆåˆ ä»è¡¨ï¼ˆæˆ–å…ˆé™¤å¤–é”®çº¦æŸï¼‰ï¼Œå†åˆ é™¤ä¸»è¡¨</li><li>(5ï¼‰å½“ä¸»è¡¨çš„è®°å½•è¢«ä»è¡¨å‚ç…§æ—¶ï¼Œä¸»è¡¨çš„è®°å½•å°†ä¸å…è®¸åˆ é™¤ï¼Œå¦‚æœè¦åˆ é™¤æ•°æ®ï¼Œéœ€è¦å…ˆåˆ é™¤ä»è¡¨ä¸­ä¾èµ–è¯¥è®°å½•çš„æ•°æ®ï¼Œç„¶åæ‰å¯ä»¥åˆ é™¤ä¸»è¡¨çš„æ•°æ®</li><li>(6ï¼‰åœ¨â€œä»è¡¨â€ä¸­æŒ‡å®šå¤–é”®çº¦æŸï¼Œå¹¶ä¸”ä¸€ä¸ªè¡¨å¯ä»¥å»ºç«‹å¤šä¸ªå¤–é”®çº¦æŸ</li><li>(7ï¼‰ä»è¡¨çš„å¤–é”®åˆ—ä¸ä¸»è¡¨è¢«å‚ç…§çš„åˆ—åå­—å¯ä»¥ä¸ç›¸åŒï¼Œä½†æ˜¯æ•°æ®ç±»å‹å¿…é¡»ä¸€æ ·ï¼Œé€»è¾‘æ„ä¹‰ä¸€è‡´ã€‚å¦‚æœç±»å‹ä¸ä¸€æ ·ä¼šå‡ºé”™</li><li>(8ï¼‰<code>å½“åˆ›å»ºå¤–é”®çº¦æŸæ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¼šåœ¨æ‰€åœ¨çš„åˆ—ä¸Šå»ºç«‹å¯¹åº”çš„æ™®é€šç´¢å¼•ã€‚</code>ä½†æ˜¯ç´¢å¼•åæ˜¯åˆ—åï¼Œä¸æ˜¯å¤–é”®çš„çº¦æŸåã€‚ï¼ˆæ ¹æ®å¤–é”®æŸ¥è¯¢æ•ˆç‡å¾ˆé«˜ï¼‰</li><li>(9ï¼‰åˆ é™¤å¤–é”®çº¦æŸåï¼Œå¿…é¡»æ‰‹åŠ¨åˆ é™¤å¯¹åº”çš„ç´¢å¼•</li></ul><h2 id="CREATE-TABLE-æ—¶æ·»åŠ å¤–é”®"><a href="#CREATE-TABLE-æ—¶æ·»åŠ å¤–é”®" class="headerlink" title="CREATE TABLE æ—¶æ·»åŠ å¤–é”®"></a>CREATE TABLE æ—¶æ·»åŠ å¤–é”®</h2><ul><li><p>å…ˆåˆ›å»ºä¸»è¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx (</span><br><span class="line">dept_id <span class="type">int</span>,</span><br><span class="line">dept_name <span class="type">VARCHAR</span>(<span class="number">15</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>ALTER TABLE æ·»åŠ ä¸»é”®</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (dept_id);</span><br></pre></td></tr></table></figure></li><li><p>å†åˆ›å»ºä»è¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx1 (</span><br><span class="line">emp_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">emp_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">department_id <span class="type">INT</span>,</span><br><span class="line"># è¡¨çº§çº¦æŸ</span><br><span class="line"><span class="keyword">CONSTRAINT</span> fk_dept <span class="keyword">FOREIGN</span> KEY (department_id) <span class="keyword">REFERENCES</span> nnx(dept_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>æ³¨ï¼š</strong></p></li><li><p>1 æ–°å¢å¤±è´¥ï¼šåšäº†å¤–é”®çº¦æŸå åœ¨ä¸»è¡¨nnxå†…æ²¡æœ‰æ·»åŠ  éƒ¨é—¨ID(dept_id)æ—¶,æ— æ³•åœ¨ä»è¡¨çš„department_idå†…æ’å…¥æ•°æ® å¦‚æœä¸»è¡¨æœ‰ä¸€ä¸ªéƒ¨é—¨ä¸ºidä¸º10,åˆ™å¯ä»¥å¾€ä»è¡¨æ·»åŠ  department_idä¸º10çš„æ•°æ®</p></li><li><p>2 åˆ é™¤å¤±è´¥ï¼šå½“ä¸»è¡¨å’Œä»è¡¨æœ‰éƒ¨é—¨idä¸º10, åˆ™æ— æ³•ç›´æ¥ä»ä¸»è¡¨ä¸­åˆ é™¤éƒ¨é—¨ID 10, å› ä¸ºä¸»è¡¨çš„éƒ¨é—¨id 10è¢«ä»è¡¨æ‰€ä¾èµ–</p></li><li><p>3 ä¿®æ”¹å¤±è´¥ï¼š åŒç†, ä¸»è¡¨æ²¡æœ‰æŸæŸéƒ¨é—¨æ—¶, ä»è¡¨ä¹Ÿæ— æ³•ä¿®æ”¹è¡¨å†…çš„éƒ¨é—¨IDä¸ºä¸»è¡¨ä¹‹å¤–çš„ID</p></li></ul><h2 id="ALTER-TABLEæ—¶æ·»åŠ å¤–é”®"><a href="#ALTER-TABLEæ—¶æ·»åŠ å¤–é”®" class="headerlink" title="ALTER TABLEæ—¶æ·»åŠ å¤–é”®"></a>ALTER TABLEæ—¶æ·»åŠ å¤–é”®</h2><ul><li><p>å…ˆåˆ›å»ºä¸»è¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx (</span><br><span class="line">dept_id <span class="type">int</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">dept_name <span class="type">VARCHAR</span>(<span class="number">15</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>å†åˆ›å»ºä»è¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx1 (</span><br><span class="line">emp_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">emp_name <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">department_id <span class="type">INT</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ å¤–é”®</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx1 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_dept <span class="keyword">FOREIGN</span> KEY (department_id) <span class="keyword">REFERENCES</span> nnx(dept_id);</span><br></pre></td></tr></table></figure></li></ul><h1 id="çº¦æŸç­‰çº§"><a href="#çº¦æŸç­‰çº§" class="headerlink" title="çº¦æŸç­‰çº§"></a>çº¦æŸç­‰çº§</h1><ul><li>1 Cascadeæ–¹å¼ï¼šåœ¨çˆ¶è¡¨ä¸Šupdate&#x2F;deleteè®°å½•æ—¶ï¼ŒåŒæ­¥update&#x2F;deleteæ‰å­è¡¨çš„åŒ¹é…è®°å½•</li><li>2 SET NULLæ–¹å¼ï¼šåœ¨çˆ¶è¡¨ä¸Šupdate&#x2F;deleteè®°å½•æ—¶ï¼Œå°†å­è¡¨ä¸ŠåŒ¹é…è®°å½•çš„åˆ—è®¾ä¸ºnullï¼Œä½†æ˜¯è¦æ³¨æ„å­è¡¨çš„å¤–é”®åˆ—ä¸èƒ½ä¸ºNOTNULL</li><li>3 No actionæ–¹å¼ï¼šå¦‚æœå­è¡¨ä¸­æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™ä¸å…è®¸å¯¹çˆ¶è¡¨å¯¹åº”å€™é€‰é”®è¿›è¡Œupdate&#x2F;deleteæ“ä½œ</li><li>4 Restrictæ–¹å¼ï¼šåŒno actionï¼Œéƒ½æ˜¯ç«‹å³æ£€æŸ¥å¤–é”®çº¦æŸ</li><li>5 Set defau1tæ–¹å¼ï¼ˆåœ¨å¯è§†åŒ–å·¥å…·SQLyogä¸­å¯èƒ½æ˜¾ç¤ºç©ºç™½ï¼‰ï¼šçˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®åˆ—è®¾ç½®æˆä¸€ä¸ªé»˜è®¤çš„å€¼ï¼Œä½†Innodbä¸èƒ½è¯†åˆ« å¦‚æœæ²¡æœ‰æŒ‡å®šç­‰çº§ï¼Œå°±ç›¸å½“äºRestrictæ–¹å¼<br><code>å¯¹äºå¤–é”®çº¦æŸï¼Œæœ€å¥½æ˜¯é‡‡ç”¨ï¼šON UPDATE CASCADE ON DELETE RESTRICTçš„æ–¹å¼ã€‚</code></li></ul><h2 id="æ¼”ç¤ºï¼š"><a href="#æ¼”ç¤ºï¼š" class="headerlink" title="æ¼”ç¤ºï¼š"></a>æ¼”ç¤ºï¼š</h2><ul><li><p>å»ºç«‹ä¸»è¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx (</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line">departmen_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY ,</span><br><span class="line">uname <span class="type">VARCHAR</span>(<span class="number">15</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>å»ºç«‹ä»è¡¨ è®¾ç½®çº¦æŸç­‰çº§ ON UPDATE CASCADE ON DELETE RESTRICT</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx1 (</span><br><span class="line">dept_id <span class="type">INT</span>,</span><br><span class="line">job_id <span class="type">INT</span>,</span><br><span class="line"><span class="keyword">FOREIGN</span> KEY (dept_id) <span class="keyword">REFERENCES</span> nnx (departmen_id) <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li></ul><h1 id="æ£€æŸ¥çº¦æŸ-CHECKçº¦æŸ"><a href="#æ£€æŸ¥çº¦æŸ-CHECKçº¦æŸ" class="headerlink" title="æ£€æŸ¥çº¦æŸ CHECKçº¦æŸ"></a>æ£€æŸ¥çº¦æŸ CHECKçº¦æŸ</h1><p><strong>æ£€æŸ¥æ˜¯å¦æ»¡è¶³XXæ¡ä»¶(MySQL5.7ä¸æ”¯æŒ)</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx(</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line">uname <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">CHECK</span>(salary <span class="operator">&gt;</span> <span class="number">2000</span>) # å·¥èµ„å¤§äº<span class="number">2000</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx(id,uname,salary) <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;å†°ç³–&#x27;</span>,<span class="number">2500</span>); # æ·»åŠ æˆåŠŸ</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx(id,uname,salary) <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;nnx&#x27;</span>,<span class="number">1500</span>); # æ·»åŠ å¤±è´¥</span><br></pre></td></tr></table></figure><h1 id="é»˜è®¤å€¼çº¦æŸ-DEFAULTçº¦æŸ"><a href="#é»˜è®¤å€¼çº¦æŸ-DEFAULTçº¦æŸ" class="headerlink" title="é»˜è®¤å€¼çº¦æŸ DEFAULTçº¦æŸ"></a>é»˜è®¤å€¼çº¦æŸ DEFAULTçº¦æŸ</h1><h2 id="CREATE-TABLE-æ—¶æ·»åŠ "><a href="#CREATE-TABLE-æ—¶æ·»åŠ " class="headerlink" title="CREATE TABLE æ—¶æ·»åŠ "></a>CREATE TABLE æ—¶æ·»åŠ </h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">uname <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="number">2000</span> # å·¥èµ„é»˜è®¤<span class="number">2000</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx(uname) <span class="keyword">VALUES</span> (<span class="string">&#x27;å†°ç³–&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> nnx; # æ·»åŠ æˆåŠŸ <span class="number">1</span>,å†°ç³–,<span class="number">2000.00</span></span><br></pre></td></tr></table></figure><h2 id="ALTER-TABLE-æ—¶æ·»åŠ "><a href="#ALTER-TABLE-æ—¶æ·»åŠ " class="headerlink" title="ALTER TABLE æ—¶æ·»åŠ "></a>ALTER TABLE æ—¶æ·»åŠ </h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx1(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">uname <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx1 MODIFY salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="number">2000</span>; # æ·»åŠ </span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx1 MODIFY salary; <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>); # åˆ é™¤</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;éç©ºçº¦æŸ-NOT-NULL-åªæœ‰åˆ—çº§çº¦æŸ&quot;&gt;&lt;a href=&quot;#éç©ºçº¦æŸ-NOT-NULL-åªæœ‰åˆ—çº§çº¦æŸ&quot; class=&quot;headerlink&quot; title=&quot;éç©ºçº¦æŸ NOT NULL åªæœ‰åˆ—çº§çº¦æŸ&quot;&gt;&lt;/a&gt;éç©ºçº¦æŸ NOT NULL åªæœ‰åˆ—çº§çº¦æŸ&lt;/h1&gt;&lt;</summary>
      
    
    
    
    <category term="Language" scheme="http://cvki.cn/categories/Language/"/>
    
    
    <category term="Database" scheme="http://cvki.cn/tags/Database/"/>
    
    <category term="MariaDB" scheme="http://cvki.cn/tags/MariaDB/"/>
    
  </entry>
  
  <entry>
    <title>09å­—ç¬¦é›†&amp;0å¡«å……&amp;æ— ç¬¦å·ç±»å‹</title>
    <link href="http://cvki.cn/posts/22fc367a.html"/>
    <id>http://cvki.cn/posts/22fc367a.html</id>
    <published>2023-02-20T04:12:56.000Z</published>
    <updated>2023-08-18T08:21:25.578Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è®¾ç½®å­—ç¬¦é›†-CHARACTER-SET-â€˜nameâ€™"><a href="#è®¾ç½®å­—ç¬¦é›†-CHARACTER-SET-â€˜nameâ€™" class="headerlink" title="è®¾ç½®å­—ç¬¦é›† CHARACTER SET â€˜nameâ€™"></a>è®¾ç½®å­—ç¬¦é›† CHARACTER SET â€˜nameâ€™</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE test01 <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="string">&#x27;utf8mb4&#x27;</span>; # ç»™æ•°æ®åº“è®¾ç½®</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE test01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx5(id <span class="type">int</span>,last_name <span class="type">varchar</span>(<span class="number">20</span>)) <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="string">&#x27;utf8mb4&#x27;</span>; # ç»™æ•°æ®è¡¨è®¾ç½®</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">table</span> nnx5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx6(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">last_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="string">&#x27;utf8mb4&#x27;</span> # ç»™æ•°æ®è¡¨æŸå­—æ®µå•ç‹¬è®¾ç½®</span><br><span class="line">); </span><br></pre></td></tr></table></figure><h1 id="ZEROFILL-0å¡«å……"><a href="#ZEROFILL-0å¡«å……" class="headerlink" title="ZEROFILL 0å¡«å……"></a>ZEROFILL 0å¡«å……</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx7(</span><br><span class="line">f1 <span class="type">INT</span>,</span><br><span class="line">f2 <span class="type">INT</span> ZEROFILL</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx7(f1,f2) <span class="keyword">VALUES</span>(<span class="number">123</span>,<span class="number">123</span>),(<span class="number">456</span>,<span class="number">456</span>); </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> nnx7; # f1ä¸º<span class="number">123</span>å’Œ<span class="number">456</span> f2ä¸º<span class="number">0000000123</span>å’Œ<span class="number">0000000456</span></span><br></pre></td></tr></table></figure><h1 id="UNSIGNEDï¼šæ— ç¬¦å·ç±»å‹ï¼ˆéè´Ÿï¼‰"><a href="#UNSIGNEDï¼šæ— ç¬¦å·ç±»å‹ï¼ˆéè´Ÿï¼‰" class="headerlink" title="UNSIGNEDï¼šæ— ç¬¦å·ç±»å‹ï¼ˆéè´Ÿï¼‰"></a>UNSIGNEDï¼šæ— ç¬¦å·ç±»å‹ï¼ˆéè´Ÿï¼‰</h1><p><strong>æ‰€æœ‰çš„æ•´æ•°ç±»å‹éƒ½æœ‰ä¸€ä¸ªå¯é€‰çš„å±æ€§UNSIGNEDï¼ˆæ— ç¬¦å·å±æ€§ï¼‰æ— ç¬¦å·æ•´æ•°ç±»å‹çš„æœ€å°å–å€¼ä¸º0.</strong><br><strong>æ‰€ä»¥ï¼Œå¦‚æœéœ€è¦åœ¨MySQLæ•°æ®åº“ä¸­ä¿å­˜éè´Ÿæ•´æ•°å€¼æ—¶ï¼Œå¯ä»¥å°†æ•´æ•°ç±»å‹è®¾ç½®ä¸ºæ— ç¬¦å·ç±»å‹ã€‚</strong><br><strong>intç±»å‹é»˜è®¤æ˜¾ç¤ºå®½åº¦ä¸ºintï¼ˆ11ï¼‰ï¼Œæ— ç¬¦å·intç±»å‹é»˜è®¤æ˜¾ç¤ºå®½åº¦ä¸ºintï¼ˆ10ï¼‰ã€‚</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx8(</span><br><span class="line">f1 <span class="type">INT</span> UNSIGNED</span><br><span class="line">);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è®¾ç½®å­—ç¬¦é›†-CHARACTER-SET-â€˜nameâ€™&quot;&gt;&lt;a href=&quot;#è®¾ç½®å­—ç¬¦é›†-CHARACTER-SET-â€˜nameâ€™&quot; class=&quot;headerlink&quot; title=&quot;è®¾ç½®å­—ç¬¦é›† CHARACTER SET â€˜nameâ€™&quot;&gt;&lt;/a&gt;è®¾ç½®å­—ç¬¦é›† CH</summary>
      
    
    
    
    <category term="Language" scheme="http://cvki.cn/categories/Language/"/>
    
    
    <category term="Database" scheme="http://cvki.cn/tags/Database/"/>
    
    <category term="MariaDB" scheme="http://cvki.cn/tags/MariaDB/"/>
    
  </entry>
  
  <entry>
    <title>08å¢åˆ æ”¹</title>
    <link href="http://cvki.cn/posts/9f7c914b.html"/>
    <id>http://cvki.cn/posts/9f7c914b.html</id>
    <published>2023-02-15T10:47:31.000Z</published>
    <updated>2023-08-18T08:21:25.578Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h1><p><strong>æ–¹å¼ä¸€ ç›´æ¥åˆ›å»º</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> nnx(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">pro <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">birth <span class="type">DATE</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼äºŒ åŸºäºç°æœ‰è¡¨</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> copy_table <span class="keyword">AS</span> <span class="keyword">SELECT</span> last_name,salary <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><h1 id="ä¿®æ”¹è¡¨-ALTER-TABLE"><a href="#ä¿®æ”¹è¡¨-ALTER-TABLE" class="headerlink" title="ä¿®æ”¹è¡¨ ALTER TABLE"></a>ä¿®æ”¹è¡¨ ALTER TABLE</h1><h2 id="ADD-å¢åŠ å­—æ®µ"><a href="#ADD-å¢åŠ å­—æ®µ" class="headerlink" title="ADD å¢åŠ å­—æ®µ"></a>ADD å¢åŠ å­—æ®µ</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx <span class="keyword">ADD</span> salary <span class="keyword">DOUBLE</span> (<span class="number">10</span>,<span class="number">2</span>); # é»˜è®¤æ·»åŠ è‡³è¡¨æœ€åä¸€ä¸ªå­—æ®µ</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx <span class="keyword">ADD</span> phone_number <span class="type">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">FIRST</span>; # ç”¨<span class="keyword">FIRST</span> å°†å­—æ®µæ·»åŠ è‡³å¼€å¤´</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx <span class="keyword">ADD</span> address <span class="type">VARCHAR</span>(<span class="number">15</span>) AFTER phone_number; # ç”¨AFTER å°†å­—æ®µæ”¾è‡³æŸæŸå­—æ®µä¹‹å æ§åˆ¶ä½ç½®</span><br></pre></td></tr></table></figure><h2 id="MODIFY-ä¿®æ”¹æŸå­—æ®µæ•°æ®é•¿åº¦-ç±»å‹-é»˜è®¤å€¼"><a href="#MODIFY-ä¿®æ”¹æŸå­—æ®µæ•°æ®é•¿åº¦-ç±»å‹-é»˜è®¤å€¼" class="headerlink" title="MODIFY ä¿®æ”¹æŸå­—æ®µæ•°æ®é•¿åº¦,ç±»å‹,é»˜è®¤å€¼"></a>MODIFY ä¿®æ”¹æŸå­—æ®µæ•°æ®é•¿åº¦,ç±»å‹,é»˜è®¤å€¼</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx MODIFY phone_number <span class="type">VARCHAR</span>(<span class="number">25</span>) <span class="keyword">DEFAULT</span>(<span class="number">15687654321</span>);</span><br></pre></td></tr></table></figure><h2 id="CHANGE-é‡å‘½åå­—æ®µ"><a href="#CHANGE-é‡å‘½åå­—æ®µ" class="headerlink" title="CHANGE é‡å‘½åå­—æ®µ"></a>CHANGE é‡å‘½åå­—æ®µ</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx CHANGE last_name lst_name <span class="type">VARCHAR</span> (<span class="number">15</span>);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx CHANGE salary month_salary <span class="type">VARCHAR</span> (<span class="number">20</span>);</span><br></pre></td></tr></table></figure><h2 id="DROP-åˆ é™¤å­—æ®µ"><a href="#DROP-åˆ é™¤å­—æ®µ" class="headerlink" title="DROP åˆ é™¤å­—æ®µ"></a>DROP åˆ é™¤å­—æ®µ</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx <span class="keyword">DROP</span> address;</span><br><span class="line"><span class="keyword">DESC</span> nnx;</span><br></pre></td></tr></table></figure><h1 id="é‡å‘½åè¡¨"><a href="#é‡å‘½åè¡¨" class="headerlink" title="é‡å‘½åè¡¨"></a>é‡å‘½åè¡¨</h1><p><code>RENAME TABLE A TO B</code></p><p><strong>æ–¹å¼ä¸€ æ¨è</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RENAME <span class="keyword">TABLE</span> nnx1 <span class="keyword">TO</span> nnx;</span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼äºŒ</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> nnx RENAME <span class="keyword">TO</span> nnx1;</span><br></pre></td></tr></table></figure><h1 id="åˆ é™¤è¡¨-DROP"><a href="#åˆ é™¤è¡¨-DROP" class="headerlink" title="åˆ é™¤è¡¨ DROP"></a>åˆ é™¤è¡¨ DROP</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> nnx1;</span><br></pre></td></tr></table></figure><h1 id="æ¸…ç©ºè¡¨"><a href="#æ¸…ç©ºè¡¨" class="headerlink" title="æ¸…ç©ºè¡¨"></a>æ¸…ç©ºè¡¨</h1><h2 id="DDL-å®šä¹‰è¡¨-ç»“æ„-å’Œ-DML-ç®¡ç†è¡¨æ•°æ®-è¯´æ˜"><a href="#DDL-å®šä¹‰è¡¨-ç»“æ„-å’Œ-DML-ç®¡ç†è¡¨æ•°æ®-è¯´æ˜" class="headerlink" title="DDL å®šä¹‰è¡¨(ç»“æ„) å’Œ DML(ç®¡ç†è¡¨æ•°æ®) è¯´æ˜"></a>DDL å®šä¹‰è¡¨(ç»“æ„) å’Œ DML(ç®¡ç†è¡¨æ•°æ®) è¯´æ˜</h2><p>1.DDLçš„æ“ä½œä¸€æ—¦æ‰§è¡Œï¼Œå°±ä¸å¯å›æ»šã€‚<br>2.DMLçš„æ“ä½œé»˜è®¤æƒ…å†µï¼Œä¸€æ—¦æ‰§è¡Œï¼Œä¹Ÿæ˜¯ä¸å¯å›æ»šçš„<br>ä½†æ˜¯ï¼Œå¦‚æœåœ¨æ‰§è¡ŒDMLä¹‹å‰ï¼Œæ‰§è¡Œäº†SET AUTOCOMMIT &#x3D; FALSEï¼Œåˆ™æ‰§è¡Œçš„DMLæ“ä½œå°±å¯ä»¥å®ç°å›æ»šã€‚</p><h2 id="COMMIT-å’Œ-ROLLBACK"><a href="#COMMIT-å’Œ-ROLLBACK" class="headerlink" title="COMMIT å’Œ ROLLBACK"></a>COMMIT å’Œ ROLLBACK</h2><p><code>COMMIT æäº¤æ•°æ®, æ•°æ®æ°¸ä¹…ä¿å­˜åœ¨æ•°æ®åº“ä¸­ ä¸å¯å›æ»š</code></p><p><code>ROLLBACK å›æ»šæ•°æ® å›æ»šè‡³æœ€è¿‘çš„ä¸€æ¬¡COMMITä¹‹å</code><br><strong>æ¼”ç¤º</strong><br><strong>DELETE FROM æ•°æ®å¯ä»¥å›æ»š</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> nnx1 <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">100</span>; # æ¸…ç©ºæŒ‡å®šè¡Œ</span><br><span class="line"><span class="keyword">ROLLBACK</span>; # å›æ»š</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> nnx1; # id <span class="number">100</span>å›æ»šå¤±è´¥</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> AUTOCOMMIT <span class="operator">=</span> <span class="literal">FALSE</span>; # å…³é—­è‡ªåŠ¨æäº¤</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> nnx1 <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">101</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> nnx1; # id <span class="number">101</span>è¢«åˆ é™¤</span><br><span class="line"><span class="keyword">ROLLBACK</span>; # å›æ»š</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> nnx1; # id <span class="number">101</span>å›æ»šæˆåŠŸ</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> nnx1; # æ¸…ç©ºæ‰€æœ‰</span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> nnx1; # å›æ»šæˆåŠŸ</span><br></pre></td></tr></table></figure><h2 id="TRUNCATE-TABLE-æ•°æ®ä¸å¯å›æ»š"><a href="#TRUNCATE-TABLE-æ•°æ®ä¸å¯å›æ»š" class="headerlink" title="TRUNCATE TABLE æ•°æ®ä¸å¯å›æ»š"></a>TRUNCATE TABLE æ•°æ®ä¸å¯å›æ»š</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> nnx1;</span><br></pre></td></tr></table></figure><h1 id="æ•°æ®æ–°å¢"><a href="#æ•°æ®æ–°å¢" class="headerlink" title="æ•°æ®æ–°å¢"></a>æ•°æ®æ–°å¢</h1><p><code>INSERT INTO è¡¨å(å­—æ®µ1,å­—æ®µ2) VALUES(å€¼1,å€¼2)</code></p><p><strong>æ–¹å¼1 æ‰‹åŠ¨æ·»åŠ </strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx <span class="keyword">VALUES</span>(<span class="number">15687654399</span>,<span class="number">1</span>,<span class="string">&#x27;NotNoneX&#x27;</span>,<span class="string">&#x27;å“ˆå“ˆ&#x27;</span>,<span class="string">&#x27;1995-11-11&#x27;</span>,<span class="number">9999</span>); # ä¸æŒ‡æ˜å­—æ®µ</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx(id,last_name,month_salary) <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;å†°ç³–2&#x27;</span>,<span class="number">12002</span>),(<span class="number">3</span>,<span class="string">&#x27;å†°ç³–3&#x27;</span>,<span class="number">12003</span>); # æŒ‡æ˜å­—æ®µ</span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼2 æŸ¥è¯¢ç»“æœæ·»åŠ </strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx(id,last_name,month_salary) </span><br><span class="line"> <span class="keyword">SELECT</span> employee_id,last_name,salary <span class="keyword">FROM</span> employees LIMIT <span class="number">5</span>;</span><br></pre></td></tr></table></figure><h1 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h1><p><code>UPDATE è¡¨å SET å­—æ®µå WHERE æ¡ä»¶</code><br><strong>åƒä¸‡åˆ«å¿˜äº†WHERE å¦åˆ™ä¸ºæ‰¹é‡ä¿®æ”¹æ‰€æœ‰</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> nnx <span class="keyword">SET</span> birth <span class="operator">=</span> <span class="built_in">CURRENT_DATE</span>,month_salary <span class="operator">=</span> <span class="number">8000</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">3</span>; # ä¿®æ”¹idä¸º<span class="number">3</span>çš„ç”Ÿæ—¥ä¸ºå½“å‰æ—¥æœŸ,å·¥èµ„ä¸º<span class="number">8</span>K</span><br></pre></td></tr></table></figure><p><strong>é¢˜ç›® åå­—ä»¥Nå¼€å¤´çš„å·¥èµ„ æé«˜2000å…ƒ</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> nnx <span class="keyword">SET</span> salary <span class="operator">=</span> salary <span class="operator">+</span> <span class="number">2000</span> <span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;N%&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> nnx;</span><br><span class="line"><span class="keyword">DESC</span> nnx;</span><br></pre></td></tr></table></figure><h1 id="MySQL8-æ–°ç‰¹æ€§-è®¡ç®—åˆ—"><a href="#MySQL8-æ–°ç‰¹æ€§-è®¡ç®—åˆ—" class="headerlink" title="MySQL8 æ–°ç‰¹æ€§ è®¡ç®—åˆ—"></a>MySQL8 æ–°ç‰¹æ€§ è®¡ç®—åˆ—</h1><p><strong>cåˆ—çš„å€¼å§‹ç»ˆä¸ºaåˆ—å’Œbåˆ—ä¹‹å’Œ</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> nnx4 (</span><br><span class="line">a <span class="type">int</span>,</span><br><span class="line">b <span class="type">int</span>,</span><br><span class="line">c <span class="type">int</span> GENERATED ALWAYS <span class="keyword">AS</span> (a <span class="operator">+</span> b) VIRTUAL</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> nnx4(a,b) <span class="keyword">VALUES</span>(<span class="number">10</span>,<span class="number">20</span>); # å¾€aå’Œbåˆ—æ·»åŠ æ•°æ®</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> nnx4; # æŸ¥è¯¢å¾—åˆ°a,b,c åˆ†åˆ«ä¸º<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åˆ›å»ºè¡¨&quot;&gt;&lt;a href=&quot;#åˆ›å»ºè¡¨&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºè¡¨&quot;&gt;&lt;/a&gt;åˆ›å»ºè¡¨&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;æ–¹å¼ä¸€ ç›´æ¥åˆ›å»º&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table</summary>
      
    
    
    
    <category term="Language" scheme="http://cvki.cn/categories/Language/"/>
    
    
    <category term="Database" scheme="http://cvki.cn/tags/Database/"/>
    
    <category term="MariaDB" scheme="http://cvki.cn/tags/MariaDB/"/>
    
  </entry>
  
  <entry>
    <title>07å­æŸ¥è¯¢</title>
    <link href="http://cvki.cn/posts/38ab61e7.html"/>
    <id>http://cvki.cn/posts/38ab61e7.html</id>
    <published>2023-02-13T13:47:50.000Z</published>
    <updated>2023-08-18T08:21:25.574Z</updated>
    
    <content type="html"><![CDATA[<p>2023å¹´2æœˆ13æ—¥21:47:50</p><h1 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h1><p><strong>æŸ¥è¯¢å·¥èµ„æ¯”Abelé«˜çš„äººçš„ä¿¡æ¯</strong><br><strong>æ–¹å¼ä¸€</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> last_name <span class="operator">=</span> &quot;Abel&quot;; # æŸ¥è¯¢Abelçš„å·¥èµ„ ç»“æœ<span class="number">11000</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="number">11000</span>; # æŸ¥è¯¢å·¥èµ„å¤§äº<span class="number">11000</span>çš„äºº</span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼äºŒ è‡ªè¿æ¥</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e2.last_name,e2.salary <span class="keyword">FROM</span> employees e1,employees e2 <span class="keyword">WHERE</span> e1.last_name <span class="operator">=</span> &quot;Abel&quot; <span class="keyword">AND</span> e2.salary <span class="operator">&gt;</span> e1.salary;</span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼ä¸‰ å­æŸ¥è¯¢</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> last_name <span class="operator">=</span> &quot;Abel&quot;);</span><br></pre></td></tr></table></figure><h1 id="å­æŸ¥è¯¢åˆ†ç±»"><a href="#å­æŸ¥è¯¢åˆ†ç±»" class="headerlink" title="å­æŸ¥è¯¢åˆ†ç±»"></a>å­æŸ¥è¯¢åˆ†ç±»</h1><p><strong>è§’åº¦ä¸€ï¼šä»å†…æŸ¥è¯¢è¿”å›çš„ç»“æœæ¡ç›®åˆ†ç±»</strong></p><p><code>å•è¡Œå­æŸ¥è¯¢</code>  \  <code>å¤šè¡Œå­æŸ¥è¯¢</code></p><h2 id="å•è¡Œå­æŸ¥è¯¢"><a href="#å•è¡Œå­æŸ¥è¯¢" class="headerlink" title="å•è¡Œå­æŸ¥è¯¢"></a>å•è¡Œå­æŸ¥è¯¢</h2><p><strong>é¢˜ç›®ï¼šæŸ¥è¯¢ä¸141å·å‘˜å·¥çš„manager_idå’Œdepartment_idç›¸åŒçš„å…¶ä»–å‘˜å·¥çš„employee_id,manager_id,department_id</strong></p><p>æ–¹å¼ä¸€</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,manager_id,department_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> manager_id <span class="operator">=</span> (<span class="keyword">SELECT</span> manager_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">141</span>) <span class="keyword">AND</span> department_id <span class="operator">=</span> (<span class="keyword">SELECT</span> department_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">141</span>) <span class="keyword">AND</span> employee_id <span class="operator">&lt;&gt;</span> <span class="number">141</span>;</span><br></pre></td></tr></table></figure><p>æ–¹å¼äºŒ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,manager_id,department_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> (manager_id,department_id) <span class="operator">=</span> (<span class="keyword">SELECT</span> manager_id,department_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">141</span>) <span class="keyword">AND</span> employee_id <span class="operator">!=</span> <span class="number">141</span>;</span><br></pre></td></tr></table></figure><p><strong>HAVINGæŸ¥è¯¢é¢˜ç›®ï¼šæŸ¥è¯¢æœ€ä½å·¥èµ„å¤§äº50å·éƒ¨é—¨æœ€ä½å·¥èµ„çš„éƒ¨é—¨idå’Œå…¶æœ€ä½å·¥èµ„</strong><br><code>é€»è¾‘ï¼šå…ˆæŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„æœ€ä½å·¥èµ„(åˆ†ç»„ å†æŸ¥éƒ¨é—¨æœ€ä½) ç„¶åè¿‡æ»¤ æœ€ä½å·¥èµ„ &gt; 50å·éƒ¨é—¨æœ€ä½å·¥èµ„</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">50</span>; # <span class="number">2100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">MIN</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id <span class="keyword">HAVING</span> <span class="built_in">MIN</span>(salary) <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">50</span>);</span><br></pre></td></tr></table></figure><p><strong>é¢˜ç›®ï¼šæ˜¾ç¤ºå‘˜å·¥çš„employee_id,last_nameå’Œlocationã€‚<br>å…¶ä¸­ï¼Œè‹¥å‘˜å·¥department_idä¸location_idä¸ºl800çš„department_idç›¸åŒï¼Œåˆ™locationä¸ºâ€™Canadaâ€™ï¼Œå…¶ä½™åˆ™ä¸ºâ€™USAâ€™ã€‚</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id <span class="keyword">FROM</span> departments <span class="keyword">WHERE</span> location_id <span class="operator">=</span> <span class="number">1800</span>; # ä½ç½®idä¸º<span class="number">1800</span>çš„éƒ¨é—¨id ç»“æœ<span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,<span class="keyword">CASE</span> department_id</span><br><span class="line"><span class="keyword">WHEN</span> (<span class="keyword">SELECT</span> department_id <span class="keyword">FROM</span> departments <span class="keyword">WHERE</span> location_id <span class="operator">=</span> <span class="number">1800</span>) <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;Canada&#x27;</span></span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line"><span class="string">&#x27;USA&#x27;</span></span><br><span class="line"><span class="keyword">END</span> <span class="keyword">AS</span> location</span><br><span class="line"> <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/38ab61e7/image-20230213224536311.png" alt="image-20230213224536311"></div><div class="image-meta"><span class="image-caption center">image-20230213224536311</span></div></div><h2 id="å¤šè¡Œå­æŸ¥è¯¢"><a href="#å¤šè¡Œå­æŸ¥è¯¢" class="headerlink" title="å¤šè¡Œå­æŸ¥è¯¢"></a>å¤šè¡Œå­æŸ¥è¯¢</h2><p><strong>IN ANY ALL SOME(ADYçš„åˆ«å ç­‰åŒäºANY)</strong><br><code>é¢˜ç›®ï¼šæŸ¥è¯¢å¹³å‡å·¥èµ„æœ€ä½çš„éƒ¨é—¨id</code><br>æ–¹å¼ä¸€  é€»è¾‘ å…ˆæŸ¥å‡ºæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„, å†æŸ¥å‡ºæœ€å°å¹³å‡å·¥èµ„(å°†ä¸Šä¸€æ­¥çš„å¹³å‡å·¥èµ„åšä¸ºä¸€å¼ è¡¨ä½¿ç”¨ å¿…é¡»èµ·åˆ«å) æœ€åæŸ¥å“ªä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„ç­‰äºè¯¥éƒ¨é—¨50</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary) AVS <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id; # æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(AVS) <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary) AVS <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id) <span class="keyword">AS</span> tem; # æœ€å°çš„å¹³å‡å·¥èµ„ çœ‹åšä¸€å¼ è¡¨ å¿…é¡»æœ‰åˆ«å</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id <span class="keyword">HAVING</span> <span class="built_in">AVG</span>(salary) <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(AVS) <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary) AVS <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id) <span class="keyword">AS</span> tem); </span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/38ab61e7/image-20230215153911821.png" alt="1"></div><div class="image-meta"><span class="image-caption center">1</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="/posts/38ab61e7/image-20230215154005090.png" alt="2"></div><div class="image-meta"><span class="image-caption center">2</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="/posts/38ab61e7/image-20230215154032683.png" alt="3"></div><div class="image-meta"><span class="image-caption center">3</span></div></div><p>æ–¹å¼äºŒ ALL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id; # æŸ¥å‡ºæ‰€æœ‰å¹³å‡å·¥èµ„</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id <span class="keyword">HAVING</span> <span class="built_in">AVG</span>(salary) <span class="operator">&lt;=</span> <span class="keyword">ALL</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id); # æŸ¥å‡º å¹³å‡å·¥èµ„ <span class="operator">&lt;=</span> æ‰€æœ‰çš„å¹³å‡å·¥èµ„ çš„éƒ¨é—¨ä»¥åŠè¯¥éƒ¨é—¨çš„å¹³å‡å·¥èµ„</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/38ab61e7/image-20230215154105227.png" alt="1"></div><div class="image-meta"><span class="image-caption center">1</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="/posts/38ab61e7/image-20230215154128372.png" alt="2"></div><div class="image-meta"><span class="image-caption center">2</span></div></div><p><strong>è§’åº¦äºŒï¼šå†…æŸ¥è¯¢æ˜¯å¦è¢«æ‰§è¡Œå¤šæ¬¡</strong></p><p><code>ç›¸å…³å­æŸ¥è¯¢</code>  \ <code>ä¸ç›¸å…³å­æŸ¥è¯¢</code></p><h2 id="ç›¸å…³å­æŸ¥è¯¢"><a href="#ç›¸å…³å­æŸ¥è¯¢" class="headerlink" title="ç›¸å…³å­æŸ¥è¯¢"></a>ç›¸å…³å­æŸ¥è¯¢</h2><p><strong>æŸ¥è¯¢å‘˜å·¥ä¸­å·¥èµ„å¤§äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥çš„1ast_name,salaryå’Œå…¶department_id</strong><br><code>æ–¹å¼ä¸€</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary) <span class="keyword">AS</span> AVGS <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id; # æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> e1.last_name,e1.salary,e1.department_id <span class="keyword">FROM</span> employees <span class="keyword">AS</span> e1,(<span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary) <span class="keyword">AS</span> AVGS <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id) <span class="keyword">AS</span> tem  <span class="keyword">WHERE</span> e1.salary <span class="operator">&gt;</span> AVGS <span class="keyword">AND</span> e1.department_id <span class="operator">=</span> tem.department_id;</span><br></pre></td></tr></table></figure><p><code>æ–¹å¼äºŒæ¨è ç›¸å…³å­æŸ¥è¯¢ å†…æŸ¥è¯¢çš„department_id ç­‰äº å†…æŸ¥è¯¢çš„department_id æ‰€ä»¥ç»™å¤–æŸ¥è¯¢åŠ åˆ«å</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary,department_id <span class="keyword">FROM</span> employees <span class="keyword">AS</span> e1 <span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id <span class="keyword">HAVING</span> department_id <span class="operator">=</span> e1.department_id);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2023å¹´2æœˆ13æ—¥21:47:50&lt;/p&gt;
&lt;h1 id=&quot;å­æŸ¥è¯¢&quot;&gt;&lt;a href=&quot;#å­æŸ¥è¯¢&quot; class=&quot;headerlink&quot; title=&quot;å­æŸ¥è¯¢&quot;&gt;&lt;/a&gt;å­æŸ¥è¯¢&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢å·¥èµ„æ¯”Abelé«˜çš„äººçš„ä¿¡æ¯&lt;/strong&gt;&lt;br&gt;&lt;str</summary>
      
    
    
    
    <category term="Language" scheme="http://cvki.cn/categories/Language/"/>
    
    
    <category term="Database" scheme="http://cvki.cn/tags/Database/"/>
    
    <category term="MariaDB" scheme="http://cvki.cn/tags/MariaDB/"/>
    
  </entry>
  
  <entry>
    <title>06èšåˆå‡½æ•°</title>
    <link href="http://cvki.cn/posts/d7394d1d.html"/>
    <id>http://cvki.cn/posts/d7394d1d.html</id>
    <published>2023-02-11T10:31:56.000Z</published>
    <updated>2023-08-18T08:21:25.574Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¸¸ç”¨èšåˆå‡½æ•°"><a href="#å¸¸ç”¨èšåˆå‡½æ•°" class="headerlink" title="å¸¸ç”¨èšåˆå‡½æ•°"></a>å¸¸ç”¨èšåˆå‡½æ•°</h1><h2 id="AVG-å¹³å‡æ•°-SUM-æ±‚å’Œå‡½æ•°"><a href="#AVG-å¹³å‡æ•°-SUM-æ±‚å’Œå‡½æ•°" class="headerlink" title="AVG() å¹³å‡æ•° \ SUM() æ±‚å’Œå‡½æ•°"></a>AVG() å¹³å‡æ•° \ SUM() æ±‚å’Œå‡½æ•°</h2><p><strong>ä»…é€‚ç”¨äºæ•°å€¼ç±»å‹</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">AS</span> &quot;å¹³å‡å·¥èµ„&quot;,<span class="built_in">SUM</span>(salary) <span class="keyword">AS</span> <span class="string">&#x27;å…¬å¸æ€»å·¥èµ„&#x27;</span> <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/d7394d1d/image-20230211170839746.png" alt="image-20230211170839746"></div><div class="image-meta"><span class="image-caption center">image-20230211170839746</span></div></div><h2 id="MAX-æœ€å¤§å€¼-MIN-æœ€å°å€¼"><a href="#MAX-æœ€å¤§å€¼-MIN-æœ€å°å€¼" class="headerlink" title="MAX() æœ€å¤§å€¼ \ MIN() æœ€å°å€¼"></a>MAX() æœ€å¤§å€¼ \ MIN() æœ€å°å€¼</h2><p><strong>é€‚ç”¨ä¸æ•°å€¼ å­—ç¬¦ä¸² æ—¥æœŸç±»å‹çš„å­—æ®µæˆ–å˜é‡</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary),<span class="built_in">MIN</span>(salary) <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/d7394d1d/image-20230211171107109.png" alt="image-20230211171107109"></div><div class="image-meta"><span class="image-caption center">image-20230211171107109</span></div></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(last_name),<span class="built_in">MIN</span>(last_name),<span class="built_in">MAX</span>(hire_date) <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><img src="/posts/d7394d1d/image-20230211171435889.png" alt="image-20230211171435889" style="zoom:80%;"><h2 id="COUNT-è®¡ç®—æŒ‡å®šå­—æ®µåœ¨æŸ¥è¯¢ç»“æœä¸­çš„æ¬¡æ•°"><a href="#COUNT-è®¡ç®—æŒ‡å®šå­—æ®µåœ¨æŸ¥è¯¢ç»“æœä¸­çš„æ¬¡æ•°" class="headerlink" title="COUNT() è®¡ç®—æŒ‡å®šå­—æ®µåœ¨æŸ¥è¯¢ç»“æœä¸­çš„æ¬¡æ•°"></a>COUNT() è®¡ç®—æŒ‡å®šå­—æ®µåœ¨æŸ¥è¯¢ç»“æœä¸­çš„æ¬¡æ•°</h2><p><code>æ³¨æ„!!! è®¡ç®—çš„æ¬¡æ•°ä¸åŒ…å«NULLç©ºå€¼</code><br>**æ–¹å¼ä¸€ï¼šCOUNT(å…·ä½“å­—æ®µ,ä¸ä¸€å®šå¯¹) **</p><p>*<em>æ–¹å¼äºŒï¼šCOUNT(</em>) **</p><p><strong>æ–¹å¼ä¸‰ï¼šCOUNT(1) ä»»æ„å¸¸é‡</strong></p><p>æ–¹å¼äºŒå’Œæ–¹å¼ä¸‰éƒ½æ˜¯å…¨è¡¨æ‰«æè¡Œæ•°, ä¸éœ€è¦è¯»å–å…·ä½“çš„è¡Œ</p><p>åœ¨innodbä¸­æ•ˆç‡ æ–¹å¼ä¸€ &lt; æ–¹å¼äºŒ &#x3D; æ–¹å¼ä¸‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(employee_id),<span class="built_in">COUNT</span>(<span class="operator">*</span>),<span class="built_in">COUNT</span>(<span class="number">1</span>) <span class="keyword">FROM</span> employees; # ç»“æœå‡ä¸º<span class="number">107</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(commission_pct) <span class="keyword">FROM</span> employees; # ç»“æœå´åªæœ‰<span class="number">35</span>æ¡ å› ä¸ºå…¶ä½™éƒ½ä¸ºç©º</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(IFNULL(commission_pct,<span class="number">0</span>)) <span class="keyword">FROM</span> employees; # è§£å†³æ–¹å¼ IFNULL(,) å½“ä¸ºç©ºæ—¶å¡«å……<span class="number">0</span> ç»“æœ<span class="number">107</span>æ¡</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> commission_pct <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>; # <span class="number">35</span>æ¡éç©º</span><br></pre></td></tr></table></figure><h2 id="GROUP-BY-åˆ†ç»„"><a href="#GROUP-BY-åˆ†ç»„" class="headerlink" title="GROUP BY åˆ†ç»„"></a>GROUP BY åˆ†ç»„</h2><p><strong>éœ€æ±‚ æŸ¥è¯¢å„éƒ¨é—¨å¹³å‡å·¥èµ„ æœ€é«˜å·¥èµ„</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary),<span class="built_in">MAX</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/d7394d1d/image-20230211174728448.png" alt="image-20230211174728448"></div><div class="image-meta"><span class="image-caption center">image-20230211174728448</span></div></div><p><strong>éœ€æ±‚ å¤šçº§åˆ†ç»„ æŸ¥è¯¢å„éƒ¨é—¨åŠå„å·¥ç§çš„å¹³å‡å·¥èµ„ æœ€é«˜å·¥èµ„</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id,job_id,<span class="built_in">AVG</span>(salary),<span class="built_in">MAX</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id,job_id;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/d7394d1d/image-20230211175246729.png" alt="image-20230211175246729"></div><div class="image-meta"><span class="image-caption center">image-20230211175246729</span></div></div><p><strong>WITH ROLLUPï¼šåœ¨GROUPåˆ†ç»„å­—æ®µçš„åŸºç¡€ä¸Šå†è¿›è¡Œç»Ÿè®¡æ•°æ®,ä¸”ä¸èƒ½å’ŒORDER BYä¸€èµ·ä½¿ç”¨</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary),<span class="built_in">MAX</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id; # å›¾ä¸€ <span class="number">12</span>æ¡</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary),<span class="built_in">MAX</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>; # å›¾äºŒ <span class="number">13</span>æ¡</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/d7394d1d/image-20230211180226153.png" alt="å›¾ä¸€"></div><div class="image-meta"><span class="image-caption center">å›¾ä¸€</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="/posts/d7394d1d/image-20230211180319098.png" alt="å›¾äºŒ"></div><div class="image-meta"><span class="image-caption center">å›¾äºŒ</span></div></div><h2 id="HAVING-è¿‡æ»¤æ•°æ®"><a href="#HAVING-è¿‡æ»¤æ•°æ®" class="headerlink" title="HAVING è¿‡æ»¤æ•°æ®"></a>HAVING è¿‡æ»¤æ•°æ®</h2><p><code>å¦‚æœè¿‡æ»¤æ¡ä»¶å‡ºç°äº†èšåˆå‡½æ•° åˆ™å¿…é¡»ç”¨HAVINGæ›¿æ¢WHERE å¦åˆ™æŠ¥é”™</code></p><p><strong>ç»ƒä¹  æŸ¥è¯¢å„éƒ¨é—¨ä¸­æœ€é«˜å·¥èµ„å¤§äº1wçš„ä¿¡æ¯</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">MAX</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id <span class="keyword">HAVING</span> <span class="built_in">MAX</span>(salary) <span class="operator">&gt;</span> <span class="number">10000</span>; # é€»è¾‘ï¼šå…ˆæŒ‰éƒ¨é—¨åˆ†ç»„ å†æ±‚å„éƒ¨é—¨æœ€é«˜å·¥èµ„ æœ€ååªæ˜¾ç¤ºå¤§äº<span class="number">1</span>Wçš„éƒ¨é—¨</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/d7394d1d/image-20230211181222169.png" alt="image-20230211181222169"></div><div class="image-meta"><span class="image-caption center">image-20230211181222169</span></div></div><p><strong>ç»ƒä¹  æŸ¥è¯¢ 10,20,30,40è¿™å‡ ä¸ªéƒ¨é—¨ä¸­ æœ€é«˜å·¥èµ„å¤§äº1Wçš„ä¿¡æ¯</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># é€»è¾‘ å…ˆæŸ¥è¯¢<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>è¿™å‡ ä¸ªéƒ¨é—¨IDåˆ†ç»„åçš„æœ€é«˜å·¥èµ„ æœ€åç­›é€‰å‡ºæœ€é«˜å·¥èµ„å¤§äº<span class="number">1</span>Wçš„éƒ¨é—¨</span><br><span class="line"></span><br><span class="line"># æ–¹å¼ä¸€ è¿‡æ»¤æ¡ä»¶æ²¡æœ‰èšåˆå‡½æ•°æ—¶ä½¿ç”¨<span class="keyword">WHERE</span> æ•ˆç‡æ›´é«˜</span><br><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">MAX</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>) <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id <span class="keyword">HAVING</span> <span class="built_in">MAX</span>(salary) <span class="operator">&gt;</span> <span class="number">10000</span>;</span><br><span class="line"></span><br><span class="line"># æ–¹å¼äºŒ ä¸ä½¿ç”¨<span class="keyword">WHERE</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">MAX</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id <span class="keyword">HAVING</span> <span class="built_in">MAX</span>(salary) <span class="operator">&gt;</span> <span class="number">10000</span> <span class="keyword">AND</span> department_id <span class="keyword">IN</span> (<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>);</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/d7394d1d/image-20230211182428365.png" alt="image-20230211182428365"></div><div class="image-meta"><span class="image-caption center">image-20230211182428365</span></div></div><h1 id="MYSQLç»“æ„"><a href="#MYSQLç»“æ„" class="headerlink" title="MYSQLç»“æ„"></a>MYSQLç»“æ„</h1><div class="tag-plugin image"><div class="image-bg"><img src="/posts/d7394d1d/image-20230211183847631.png" alt="image-20230211183847631"></div><div class="image-meta"><span class="image-caption center">image-20230211183847631</span></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¸¸ç”¨èšåˆå‡½æ•°&quot;&gt;&lt;a href=&quot;#å¸¸ç”¨èšåˆå‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;å¸¸ç”¨èšåˆå‡½æ•°&quot;&gt;&lt;/a&gt;å¸¸ç”¨èšåˆå‡½æ•°&lt;/h1&gt;&lt;h2 id=&quot;AVG-å¹³å‡æ•°-SUM-æ±‚å’Œå‡½æ•°&quot;&gt;&lt;a href=&quot;#AVG-å¹³å‡æ•°-SUM-æ±‚å’Œå‡½æ•°&quot; cla</summary>
      
    
    
    
    <category term="Language" scheme="http://cvki.cn/categories/Language/"/>
    
    
    <category term="Database" scheme="http://cvki.cn/tags/Database/"/>
    
    <category term="MariaDB" scheme="http://cvki.cn/tags/MariaDB/"/>
    
  </entry>
  
  <entry>
    <title>05åŠ å¯†è§£å¯†å‡½æ•°</title>
    <link href="http://cvki.cn/posts/4b7c2baa.html"/>
    <id>http://cvki.cn/posts/4b7c2baa.html</id>
    <published>2023-02-11T05:15:16.000Z</published>
    <updated>2023-08-18T08:21:25.574Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŠ å¯†å‡½æ•°"><a href="#åŠ å¯†å‡½æ•°" class="headerlink" title="åŠ å¯†å‡½æ•°"></a>åŠ å¯†å‡½æ•°</h1><h2 id="PASSWORD-str"><a href="#PASSWORD-str" class="headerlink" title="PASSWORD(str)"></a>PASSWORD(str)</h2><p><strong>æ­¤å‡½æ•°åœ¨MySQL8.0ä¸­å¼ƒç”¨</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> PASSWORD(<span class="string">&#x27;test&#x27;</span>) FROMd DUAL;</span><br></pre></td></tr></table></figure><h2 id="MD5-str"><a href="#MD5-str" class="headerlink" title="MD5(str)"></a>MD5(str)</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> MD5(<span class="string">&#x27;mysql&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4b7c2baa/image-20230211160650916.png" alt="image-20230211160650916"></div><div class="image-meta"><span class="image-caption center">image-20230211160650916</span></div></div><h2 id="SHA-str"><a href="#SHA-str" class="headerlink" title="SHA(str)"></a>SHA(str)</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SHA(<span class="string">&#x27;mysql&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4b7c2baa/image-20230211160801116.png" alt="image-20230211160801116"></div><div class="image-meta"><span class="image-caption center">image-20230211160801116</span></div></div><h2 id="ENCODE-A-B-DECODE-C-D"><a href="#ENCODE-A-B-DECODE-C-D" class="headerlink" title="ENCODE(A,B)  \ DECODE(C,D)"></a>ENCODE(A,B)  \ DECODE(C,D)</h2><p><code>ä¸Šè¿°ä¸¤ä¸ªå‡½æ•°åœ¨MySQLå‡½æ•°ä¸­å‡å·²å¼ƒç”¨</code></p><p><strong>Aä¸ºå¾…åŠ å¯†å†…å®¹ Bä¸ºç§˜é’¥  Cä¸ºå¾…è§£å¯†å†…å®¹ Dä¸ºç§˜é’¥</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ENCODE(<span class="string">&#x27;mysql&#x27;</span>,<span class="string">&#x27;0000&#x27;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DECODE(ENCODE(<span class="string">&#x27;mysql&#x27;</span>,<span class="string">&#x27;0000&#x27;</span>),<span class="string">&#x27;0000&#x27;</span>);</span><br></pre></td></tr></table></figure><h1 id="å…¶ä»–å‡½æ•°"><a href="#å…¶ä»–å‡½æ•°" class="headerlink" title="å…¶ä»–å‡½æ•°"></a>å…¶ä»–å‡½æ•°</h1><h2 id="å››èˆäº”å…¥-FORMAT-A-B"><a href="#å››èˆäº”å…¥-FORMAT-A-B" class="headerlink" title="å››èˆäº”å…¥ FORMAT(A,B)"></a>å››èˆäº”å…¥ FORMAT(A,B)</h2><p><strong>å°†Aä¿ç•™Bä¸ºæ•°å­—å››èˆäº”å…¥</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> FORMAT(<span class="number">106.3654</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4b7c2baa/image-20230211163100665.png" alt="image-20230211163100665"></div><div class="image-meta"><span class="image-caption center">image-20230211163100665</span></div></div><h2 id="è¿›åˆ¶è½¬æ¢-CONV-A-B-C"><a href="#è¿›åˆ¶è½¬æ¢-CONV-A-B-C" class="headerlink" title="è¿›åˆ¶è½¬æ¢ CONV(A,B,C)"></a>è¿›åˆ¶è½¬æ¢ CONV(A,B,C)</h2><p><strong>Aä¸ºå¾…è½¬æ¢æ•°å­—,Bä¸ºå½“å‰è¿›åˆ¶,Cä¸ºç›®æ ‡è¿›åˆ¶</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONV(<span class="number">201</span>,<span class="number">10</span>,<span class="number">2</span>); # å°†<span class="number">201</span>ä»åè¿›åˆ¶è½¬æ¢ä¸º<span class="number">2</span>è¿›åˆ¶</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4b7c2baa/image-20230211163214182.png" alt="image-20230211163214182"></div><div class="image-meta"><span class="image-caption center">image-20230211163214182</span></div></div><h2 id="IPåœ°å€è½¬æ¢"><a href="#IPåœ°å€è½¬æ¢" class="headerlink" title="IPåœ°å€è½¬æ¢"></a>IPåœ°å€è½¬æ¢</h2><p><code>INET_ATON(A)</code>ï¼šå°†IPåœ°å€Aè½¬æ¢ä¸ºæ•°å­—åœ°å€</p><p>å¦‚ä¸‹è®¡ç®—æ–¹å¼ä¸ºï¼š192X256^3 + 168X256^2 + 1X256^1 + 100X256^0</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT INET_ATON(&#x27;192.168.1.100&#x27;); # ç»“æœï¼š3232235876</span><br></pre></td></tr></table></figure><p><code>INET_NTOA(B)</code>ï¼šæ•°å­—åœ°å€è½¬IP</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> INET_NTOA(<span class="number">3232235876</span>); # ç»“æœï¼š<span class="number">192.168</span><span class="number">.1</span><span class="number">.100</span></span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4b7c2baa/image-20230211164520992.png" alt="image-20230211164520992"></div><div class="image-meta"><span class="image-caption center">image-20230211164520992</span></div></div><h2 id="é‡å¤æ‰§è¡Œè¡¨è¾¾å¼"><a href="#é‡å¤æ‰§è¡Œè¡¨è¾¾å¼" class="headerlink" title="é‡å¤æ‰§è¡Œè¡¨è¾¾å¼"></a>é‡å¤æ‰§è¡Œè¡¨è¾¾å¼</h2><p><code>BENCHMARK(N,A)</code> é‡å¤æ‰§è¡Œè¡¨è¾¾å¼A,æ‰§è¡Œæ¬¡æ•°ä¸ºNæ¬¡ç”¨äºæµ‹è¯•è¡¨è¾¾å¼æ€§èƒ½</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> BENCHMARK(<span class="number">5</span>,MD5(<span class="string">&#x27;mysql&#x27;</span>)) # ç»“æœ<span class="number">0.028</span>s</span><br><span class="line"><span class="keyword">SELECT</span> BENCHMARK(<span class="number">100000</span>,MD5(<span class="string">&#x27;mysql&#x27;</span>)); # ç»“æœ<span class="number">0.046</span>s</span><br></pre></td></tr></table></figure><h2 id="å­—ç¬¦ç¼–ç è½¬æ¢-CONVERT-A-USING-B"><a href="#å­—ç¬¦ç¼–ç è½¬æ¢-CONVERT-A-USING-B" class="headerlink" title="å­—ç¬¦ç¼–ç è½¬æ¢ CONVERT(A USING B)"></a>å­—ç¬¦ç¼–ç è½¬æ¢ CONVERT(A USING B)</h2><p><strong>å°†Aå­—ç¬¦çš„ç¼–ç è½¬æ¢ä¸ºBå­—ç¬¦ç¼–ç </strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CHARSET(<span class="string">&#x27;mysql&#x27;</span>); # æŸ¥çœ‹æ­¤å­—ç¬¦å½“å‰çš„ç¼–ç  ç»“æœä¸ºï¼šutf8mb4</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> CHARSET(<span class="keyword">CONVERT</span>(<span class="string">&#x27;mysql&#x27;</span> <span class="keyword">USING</span> <span class="string">&#x27;utf8mb3&#x27;</span>)); # å°†mysqlå­—ç¬¦è½¬æ¢ä¸ºutf8mb3 å†æŸ¥çœ‹ç»“æœ ç»“æœä¸ºutf8mb3 è½¬æ¢æˆåŠŸ</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åŠ å¯†å‡½æ•°&quot;&gt;&lt;a href=&quot;#åŠ å¯†å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;åŠ å¯†å‡½æ•°&quot;&gt;&lt;/a&gt;åŠ å¯†å‡½æ•°&lt;/h1&gt;&lt;h2 id=&quot;PASSWORD-str&quot;&gt;&lt;a href=&quot;#PASSWORD-str&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="Language" scheme="http://cvki.cn/categories/Language/"/>
    
    
    <category term="Database" scheme="http://cvki.cn/tags/Database/"/>
    
    <category term="MariaDB" scheme="http://cvki.cn/tags/MariaDB/"/>
    
  </entry>
  
  <entry>
    <title>04å‡½æ•°</title>
    <link href="http://cvki.cn/posts/7cac1c60.html"/>
    <id>http://cvki.cn/posts/7cac1c60.html</id>
    <published>2023-02-10T07:30:33.000Z</published>
    <updated>2023-08-18T08:21:25.574Z</updated>
    
    <content type="html"><![CDATA[<p>2023å¹´2æœˆ10æ—¥15:30:33</p><h1 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h1><h2 id="IF-æ¡ä»¶-æ¡ä»¶ä¸ºçœŸè¿”å›-æ¡ä»¶ä¸ºå‡è¿”å›"><a href="#IF-æ¡ä»¶-æ¡ä»¶ä¸ºçœŸè¿”å›-æ¡ä»¶ä¸ºå‡è¿”å›" class="headerlink" title="IF(æ¡ä»¶,æ¡ä»¶ä¸ºçœŸè¿”å›,æ¡ä»¶ä¸ºå‡è¿”å›)"></a>IF(æ¡ä»¶,æ¡ä»¶ä¸ºçœŸè¿”å›,æ¡ä»¶ä¸ºå‡è¿”å›)</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name <span class="keyword">AS</span> &quot;åå­—&quot;,salary <span class="keyword">AS</span> &quot;å·¥èµ„&quot;,IF(salary<span class="operator">&gt;=</span><span class="number">6000</span>,&quot;é«˜å·¥èµ„&quot;,&quot;ä½å·¥èµ„&quot;) <span class="keyword">AS</span> &quot;å·¥èµ„ç­‰çº§&quot; <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/7cac1c60/image-20230210161452603.png" alt="image-20230210161452603"></div><div class="image-meta"><span class="image-caption center">image-20230210161452603</span></div></div><h2 id="IFNULL-A-B-å¦‚æœAä¸ºç©º-åˆ™è¿”å›B"><a href="#IFNULL-A-B-å¦‚æœAä¸ºç©º-åˆ™è¿”å›B" class="headerlink" title="IFNULL(A,B) å¦‚æœAä¸ºç©º åˆ™è¿”å›B"></a>IFNULL(A,B) å¦‚æœAä¸ºç©º åˆ™è¿”å›B</h2><h2 id="CASE-WHEN-A-THEN-B-ELSE-C-END-CASE"><a href="#CASE-WHEN-A-THEN-B-ELSE-C-END-CASE" class="headerlink" title="CASE WHEN A THEN B ELSE C END CASE"></a>CASE WHEN A THEN B ELSE C END CASE</h2><p><strong>å½“æ»¡è¶³æ¡ä»¶Açš„æ—¶å€™è¿”å›B å¦åˆ™è¿”å›C</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary,<span class="keyword">CASE</span></span><br><span class="line"><span class="keyword">WHEN</span> salary <span class="operator">&gt;=</span> <span class="number">8000</span></span><br><span class="line"><span class="keyword">THEN</span> &quot;é«˜å·¥èµ„&quot;</span><br><span class="line"><span class="keyword">WHEN</span> salary <span class="operator">&gt;=</span> <span class="number">6000</span></span><br><span class="line"><span class="keyword">THEN</span> &quot;ä¸€èˆ¬å·¥èµ„&quot;</span><br><span class="line"><span class="keyword">ELSE</span> &quot;ä½å·¥èµ„&quot; <span class="keyword">END</span> <span class="keyword">AS</span> &quot;å·¥èµ„ç­‰çº§&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/7cac1c60/image-20230210163045164.png" alt="image-20230210163045164"></div><div class="image-meta"><span class="image-caption center">image-20230210163045164</span></div></div><h2 id="CASE-WHEN-A-THEN-B-ELSE-C-END-CASE-1"><a href="#CASE-WHEN-A-THEN-B-ELSE-C-END-CASE-1" class="headerlink" title="CASE WHEN A THEN B ELSE C END CASE"></a>CASE WHEN A THEN B ELSE C END CASE</h2><p><strong>ç»ƒä¹ ï¼šæŸ¥è¯¢éƒ¨é—¨idä¸º10,20,30çš„å‘˜å·¥ éƒ¨é—¨10æ‰“å°å·¥èµ„çš„1.1å€ éƒ¨é—¨20æ‰“å°å·¥èµ„çš„1.2å€ éƒ¨é—¨30 æ‰“å°å·¥èµ„çš„1.3å€</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_id,salary,<span class="keyword">CASE</span> department_id</span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line">salary <span class="operator">*</span> <span class="number">1.1</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">20</span> <span class="keyword">THEN</span></span><br><span class="line">  salary <span class="operator">*</span> <span class="number">1.2</span></span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">salary <span class="operator">*</span> <span class="number">1.3</span></span><br><span class="line"><span class="keyword">END</span> <span class="keyword">AS</span> &quot;å·¥èµ„åŠ æˆ&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department_id <span class="keyword">IN</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>);</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/7cac1c60/image-20230210164005037.png" alt="image-20230210164005037"></div><div class="image-meta"><span class="image-caption center">image-20230210164005037</span></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2023å¹´2æœˆ10æ—¥15:30:33&lt;/p&gt;
&lt;h1 id=&quot;æµç¨‹æ§åˆ¶&quot;&gt;&lt;a href=&quot;#æµç¨‹æ§åˆ¶&quot; class=&quot;headerlink&quot; title=&quot;æµç¨‹æ§åˆ¶&quot;&gt;&lt;/a&gt;æµç¨‹æ§åˆ¶&lt;/h1&gt;&lt;h2 id=&quot;IF-æ¡ä»¶-æ¡ä»¶ä¸ºçœŸè¿”å›-æ¡ä»¶ä¸ºå‡è¿”å›&quot;&gt;&lt;a href=&quot;#</summary>
      
    
    
    
    <category term="Language" scheme="http://cvki.cn/categories/Language/"/>
    
    
    <category term="Database" scheme="http://cvki.cn/tags/Database/"/>
    
    <category term="MariaDB" scheme="http://cvki.cn/tags/MariaDB/"/>
    
  </entry>
  
  <entry>
    <title>03å¤šè¡¨æŸ¥è¯¢</title>
    <link href="http://cvki.cn/posts/4bc002fb.html"/>
    <id>http://cvki.cn/posts/4bc002fb.html</id>
    <published>2023-02-09T07:22:37.000Z</published>
    <updated>2023-08-18T08:21:25.566Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¤šè¡¨æŸ¥è¯¢"><a href="#å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢"></a>å¤šè¡¨æŸ¥è¯¢</h1><h2 id="éœ€æ±‚-æŸ¥è¯¢åä¸ºAbelçš„äººåœ¨å“ªé‡Œå·¥ä½œ"><a href="#éœ€æ±‚-æŸ¥è¯¢åä¸ºAbelçš„äººåœ¨å“ªé‡Œå·¥ä½œ" class="headerlink" title="éœ€æ±‚ æŸ¥è¯¢åä¸ºAbelçš„äººåœ¨å“ªé‡Œå·¥ä½œ"></a>éœ€æ±‚ æŸ¥è¯¢åä¸ºAbelçš„äººåœ¨å“ªé‡Œå·¥ä½œ</h2><h3 id="æ­£å¸¸æŸ¥è¯¢"><a href="#æ­£å¸¸æŸ¥è¯¢" class="headerlink" title="æ­£å¸¸æŸ¥è¯¢"></a>æ­£å¸¸æŸ¥è¯¢</h3><p><strong>ç¬¬ä¸€æ­¥ æŸ¥è¯¢Ableæ‰€å¤„çš„éƒ¨é—¨ID</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span>; # ç»“æœ<span class="number">80</span></span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230209152705384.png" alt="img"></div><div class="image-meta"><span class="image-caption center">img</span></div></div><p><strong>ç¬¬äºŒæ­¥ æŸ¥è¯¢è¯¥éƒ¨é—¨IDæ‰€å¯¹åº”çš„åŸå¸‚ID</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> departments <span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">80</span>; # ç»“æœ<span class="number">2500</span></span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230209153011198.png" alt="image-20230209153011198"></div><div class="image-meta"><span class="image-caption center">image-20230209153011198</span></div></div><p><strong>ç¬¬ä¸‰æ­¥ é€šè¿‡åŸå¸‚IDè·å¾—å…·ä½“å·¥ä½œåœ°ç‚¹</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> locations <span class="keyword">WHERE</span> location_id <span class="operator">=</span> <span class="number">2500</span>; # å¾—åˆ°ç»“æœOxford</span><br></pre></td></tr></table></figure><h3 id="å¤šè¡¨æŸ¥è¯¢-1"><a href="#å¤šè¡¨æŸ¥è¯¢-1" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢"></a>å¤šè¡¨æŸ¥è¯¢</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># æ³¨ï¼šå¦‚æœæŸ¥è¯¢çš„å­—æ®µåœ¨å¤šä¸ªè¡¨åŒæ—¶å­˜åœ¨,å¿…é¡»æŒ‡æ˜æ­¤å­—æ®µæ‰€åœ¨çš„è¡¨(å»ºè®®å¤šè¡¨æŸ¥è¯¢æ—¶éƒ½åŠ ä¸Š)</span><br><span class="line"># å¦‚ä¸‹é¢çš„departments.department_id</span><br><span class="line"><span class="keyword">SELECT</span> last_name,departments.department_id,city <span class="keyword">FROM</span> employees,departments,locations <span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span> <span class="keyword">AND</span> employees.department_id <span class="operator">=</span> departments.department_id <span class="keyword">AND</span> departments.location_id <span class="operator">=</span> locations.location_id;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230209160218764.png" alt="image-20230209160218764"></div><div class="image-meta"><span class="image-caption center">image-20230209160218764</span></div></div><p><strong>ç»™è¡¨èµ·åˆ«å</strong></p><p>å¢åŠ å¯è¯»æ€§, ä½†èµ·åˆ«åååªèƒ½ç”¨åˆ«å åŸåä¸å¯ä½¿ç”¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> el.last_name,dp.department_id,lc.city <span class="keyword">FROM</span> employees <span class="keyword">AS</span> el,departments <span class="keyword">as</span> dp,locations <span class="keyword">as</span> lc <span class="keyword">WHERE</span> el.last_name <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span> <span class="keyword">AND</span> el.department_id <span class="operator">=</span> dp.department_id <span class="keyword">AND</span> dp.location_id <span class="operator">=</span> lc.location_id;</span><br></pre></td></tr></table></figure><h1 id="å¤šè¡¨è¿æ¥"><a href="#å¤šè¡¨è¿æ¥" class="headerlink" title="å¤šè¡¨è¿æ¥"></a>å¤šè¡¨è¿æ¥</h1><h2 id="ç­‰å€¼è¿æ¥-éç­‰å€¼è¿æ¥"><a href="#ç­‰å€¼è¿æ¥-éç­‰å€¼è¿æ¥" class="headerlink" title="ç­‰å€¼è¿æ¥ \ éç­‰å€¼è¿æ¥"></a><strong>ç­‰å€¼è¿æ¥ \ éç­‰å€¼è¿æ¥</strong></h2><p><strong>éç­‰å€¼è¿æ¥ä¾‹å­</strong></p><p>æŸ¥è¯¢elè¡¨ä¸­çš„æ‰€æœ‰äººå·¥èµ„æ‰€å¯¹åº”çš„jbgè¡¨ä¸­çš„å·¥èµ„ç­‰çº§</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> el.last_name,el.salary,jbg.grade_level <span class="keyword">FROM</span> job_grades <span class="keyword">as</span> jbg,employees <span class="keyword">AS</span> el <span class="keyword">WHERE</span> el.salary <span class="operator">&gt;=</span> jbg.lowest_sal <span class="keyword">AND</span> el.salary <span class="operator">&lt;=</span> jbg.highest_sal;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230209163819456.png" alt="image-20230209163819456"></div><div class="image-meta"><span class="image-caption center">image-20230209163819456</span></div></div><p>ç”¨between â€¦ and â€¦.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> el.last_name,el.salary,jbg.grade_level <span class="keyword">FROM</span> job_grades <span class="keyword">as</span> jbg,employees <span class="keyword">AS</span> el <span class="keyword">WHERE</span> el.salary <span class="keyword">BETWEEN</span> jbg.lowest_sal <span class="keyword">AND</span> jbg.highest_sal;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230209163806690.png" alt="image-20230209163806690"></div><div class="image-meta"><span class="image-caption center">image-20230209163806690</span></div></div><h2 id="è‡ªè¿æ¥-éè‡ªè¿æ¥"><a href="#è‡ªè¿æ¥-éè‡ªè¿æ¥" class="headerlink" title="è‡ªè¿æ¥ \ éè‡ªè¿æ¥"></a>è‡ªè¿æ¥ \ éè‡ªè¿æ¥</h2><p><strong>è‡ªè¿æ¥(è‡ªæˆ‘å¼•ç”¨)</strong></p><p>è‡ªè¿æ¥ä¾‹å­ æŸ¥è¯¢elè¡¨ä¸­å‘˜å·¥å¯¹åº”çš„ç®¡ç†è€…</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> elyg.last_name &quot;å‘˜å·¥åå­—&quot;,elyg.employee_id <span class="keyword">AS</span> &quot;å‘˜å·¥ID&quot;,elgl.last_name <span class="keyword">AS</span> &quot;ç®¡ç†è€…åå­—&quot;,elgl.employee_id <span class="keyword">AS</span> &quot;ç®¡ç†è€…ID&quot; <span class="keyword">FROM</span> employees <span class="keyword">as</span> elyg,employees <span class="keyword">AS</span> elgl <span class="keyword">WHERE</span> elyg.manager_id <span class="operator">=</span> elgl.employee_id;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230209164300811.png" alt="image-20230209164300811"></div><div class="image-meta"><span class="image-caption center">image-20230209164300811</span></div></div><h2 id="å†…è¿æ¥-å¤–è¿æ¥"><a href="#å†…è¿æ¥-å¤–è¿æ¥" class="headerlink" title="å†…è¿æ¥ \ å¤–è¿æ¥"></a>å†…è¿æ¥ \ å¤–è¿æ¥</h2><p><strong>å†…è¿æ¥ï¼šåˆå¹¶å…·æœ‰åŒä¸€åˆ—çš„ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨çš„è¡Œ, ç»“æœé›†ä¸­ä¸åŒ…å«ä¸€ä¸ªè¡¨ä¸å¦ä¸€ä¸ªè¡¨ä¸åŒ¹é…çš„è¡Œ</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e,departments d</span><br><span class="line"><span class="keyword">WHERE</span> e.`department_id` <span class="operator">=</span> d.department_id;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230209180814479.png" alt="image-20230209180814479"></div><div class="image-meta"><span class="image-caption center">image-20230209180814479</span></div></div><p><strong>å¤–è¿æ¥ï¼šåˆå¹¶å…·æœ‰åŒä¸€åˆ—çš„ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨çš„è¡Œ, ç»“æœé›†ä¸­é™¤äº†åŒ…å«ä¸€ä¸ªè¡¨ä¸å¦ä¸€ä¸ªè¡¨åŒ¹é…çš„è¡Œä¹‹å¤–,è¿˜æŸ¥è¯¢åˆ°äº†å·¦è¡¨ æˆ– å³è¡¨ä¸­ä¸åŒ¹é…çš„è¡Œã€‚</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># å¤–è¿æ¥çš„åˆ†ç±»ï¼šå·¦å¤–è¿æ¥ã€å³å¤–è¿æ¥ã€æ»¡å¤–è¿æ¥</span><br><span class="line"></span><br><span class="line"># å·¦å¤–è¿æ¥ï¼šä¸¤ä¸ªè¡¨åœ¨è¿æ¥è¿‡ç¨‹ä¸­é™¤äº†è¿”å›æ»¡è¶³è¿æ¥æ¡ä»¶çš„è¡Œä»¥å¤–è¿˜è¿”å›å·¦è¡¨ä¸­ä¸æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œè¿™ç§è¿æ¥ç§°ä¸ºå·¦å¤–è¿æ¥ã€‚</span><br><span class="line"># å³å¤–è¿æ¥ï¼šä¸¤ä¸ªè¡¨åœ¨è¿æ¥è¿‡ç¨‹ä¸­é™¤äº†è¿”å›æ»¡è¶³è¿æ¥æ¡ä»¶çš„è¡Œä»¥å¤–è¿˜è¿”å›å³è¡¨ä¸­ä¸æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œè¿™ç§è¿æ¥ç§°ä¸ºå³å¤–è¿æ¥ã€‚</span><br></pre></td></tr></table></figure><p><strong>å·¦å¤–è¿æ¥ â€¦ LEFT JOIN â€¦ ON â€¦</strong><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230209180124050.png" alt="image-20230209180124050"></div><div class="image-meta"><span class="image-caption center">image-20230209180124050</span></div></div></p><p><strong>å³å¤–è¿æ¥ â€¦ RIGHT JOIN â€¦ ON â€¦</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> el.employee_id,el.last_name,dp.department_id <span class="keyword">FROM</span> employees <span class="keyword">AS</span> el <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments <span class="keyword">AS</span> dp <span class="keyword">ON</span> el.department_id <span class="operator">=</span> dp.department_id;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230209180435649.png" alt="image-20230209180435649"></div><div class="image-meta"><span class="image-caption center">image-20230209180435649</span></div></div><p><strong>æ»¡å¤–è¿æ¥(MySQLä¸æ”¯æŒ)</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> el.employee_id,el.last_name,dp.department_id <span class="keyword">FROM</span> employees <span class="keyword">AS</span> el <span class="keyword">FULL</span> <span class="keyword">JOIN</span> departments <span class="keyword">AS</span> dp <span class="keyword">ON</span> el.department_id <span class="operator">=</span> dp.department_id;</span><br></pre></td></tr></table></figure><h1 id="7ç§SQL-JOINå®ç°"><a href="#7ç§SQL-JOINå®ç°" class="headerlink" title="7ç§SQL JOINå®ç°"></a>7ç§SQL JOINå®ç°</h1><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230209181311179.png" alt="image-20230209181311179"></div><div class="image-meta"><span class="image-caption center">image-20230209181311179</span></div></div><h2 id="ä¸­å›¾"><a href="#ä¸­å›¾" class="headerlink" title="ä¸­å›¾"></a>ä¸­å›¾</h2><p>å†…è¿æ¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> el.employee_id,el.last_name,dp.department_id <span class="keyword">FROM</span> employees el,departments dp <span class="keyword">WHERE</span> el.department_id <span class="operator">=</span> dp.department_id; # <span class="number">106</span>æ¡</span><br></pre></td></tr></table></figure><h2 id="å·¦ä¸Šå›¾"><a href="#å·¦ä¸Šå›¾" class="headerlink" title="å·¦ä¸Šå›¾"></a>å·¦ä¸Šå›¾</h2><p>å·¦å¤–è¿æ¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> el.employee_id,el.last_name,dp.department_id <span class="keyword">FROM</span> employees el <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments dp <span class="keyword">ON</span> el.department_id <span class="operator">=</span> dp.department_id; # <span class="number">107</span>æ¡</span><br></pre></td></tr></table></figure><h2 id="å³ä¸Šå›¾"><a href="#å³ä¸Šå›¾" class="headerlink" title="å³ä¸Šå›¾"></a>å³ä¸Šå›¾</h2><p>å³å¤–è¿æ¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> el.employee_id,el.last_name,dp.department_id <span class="keyword">FROM</span> employees el <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments dp <span class="keyword">ON</span> el.department_id <span class="operator">=</span> dp.department_id; # <span class="number">122</span>æ¡</span><br></pre></td></tr></table></figure><h2 id="å·¦ä¸­å›¾"><a href="#å·¦ä¸­å›¾" class="headerlink" title="å·¦ä¸­å›¾"></a>å·¦ä¸­å›¾</h2><p>å·¦å¤–è¿æ¥å»äº¤é›†</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> el.employee_id,el.last_name,el.department_id <span class="keyword">FROM</span> employees el <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments dp <span class="keyword">ON</span> el.department_id <span class="operator">=</span> dp.department_id <span class="keyword">WHERE</span> dp.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>; # <span class="number">1</span>æ¡</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230210142608821.png" alt="image-20230210142608821"></div><div class="image-meta"><span class="image-caption center">image-20230210142608821</span></div></div><h2 id="å³ä¸­å›¾"><a href="#å³ä¸­å›¾" class="headerlink" title="å³ä¸­å›¾"></a>å³ä¸­å›¾</h2><p>å³å¤–è¿æ¥å»äº¤é›†</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> el.employee_id,el.last_name,el.department_id <span class="keyword">FROM</span> employees el <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments dp <span class="keyword">ON</span> el.department_id <span class="operator">=</span> dp.department_id <span class="keyword">WHERE</span> el.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>; # <span class="number">16</span>æ¡</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230210142634148.png" alt="image-20230210142634148"></div><div class="image-meta"><span class="image-caption center">image-20230210142634148</span></div></div><h2 id="å·¦ä¸‹å›¾"><a href="#å·¦ä¸‹å›¾" class="headerlink" title="å·¦ä¸‹å›¾"></a>å·¦ä¸‹å›¾</h2><p>æ»¡å¤–è¿æ¥ï¼šå·¦ä¸Šå›¾ UNION ALL å³ä¸­å›¾ (ç›´æ¥ç”¨UNION ALL åœ¨ä¸­é—´è¿æ¥å³å¯)</p><p>å¯ä»¥ç”¨UNIONè¿æ¥ ä¹Ÿå¯ä»¥ç”¨ UNION ALL </p><p>ä½†UNIONæ¯”UNION ALLå¤šäº†å»é‡æ“ä½œ ç›¸å¯¹è¾ƒæ…¢ æ‰€ä»¥ä¼˜å…ˆä½¿ç”¨UNION ALL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> el.employee_id,el.last_name,dp.department_id <span class="keyword">FROM</span> employees el <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments dp <span class="keyword">ON</span> el.department_id <span class="operator">=</span> dp.department_id</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> el.employee_id,el.last_name,el.department_id <span class="keyword">FROM</span> employees el <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments dp <span class="keyword">ON</span> el.department_id <span class="operator">=</span> dp.department_id <span class="keyword">WHERE</span> el.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>; # <span class="number">123</span>æ¡</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230210142827221.png" alt="image-20230210142827221"></div><div class="image-meta"><span class="image-caption center">image-20230210142827221</span></div></div><h1 id="è‡ªç„¶è¿æ¥"><a href="#è‡ªç„¶è¿æ¥" class="headerlink" title="è‡ªç„¶è¿æ¥"></a>è‡ªç„¶è¿æ¥</h1><p>NATURAL JOINï¼šè‡ªåŠ¨æŸ¥è¯¢ä¸¤å¼ è¡¨ä¸­<code>æ‰€æœ‰ç›¸åŒçš„å­—æ®µ</code> å¹¶è¿›è¡Œ<code>ç­‰å€¼è¿æ¥</code></p><p>æ‰€ä»¥ä¹Ÿä¸å¤Ÿçµæ´», ä½†åªæœ‰å•ä¸ªè¿æ¥æˆ–åªéœ€è¦å•ä¸ªè¿æ¥æ—¶æ¨èä½¿ç”¨ç­‰å€¼è¿æ¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> el.employee_id,el.last_name <span class="keyword">FROM</span> employees el, departments dp <span class="keyword">WHERE</span> el.department_id <span class="operator">=</span> dp.department_id <span class="keyword">AND</span> el.manager_id <span class="operator">=</span> dp.manager_id; # <span class="number">32</span>æ¡</span><br></pre></td></tr></table></figure><p>ç­‰ä»·äº</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> el.employee_id,el.last_name <span class="keyword">FROM</span> employees el <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> departments dp; # <span class="number">32</span>æ¡</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="/posts/4bc002fb/image-20230210144127963.png" alt="image-20230210144127963"></div><div class="image-meta"><span class="image-caption center">image-20230210144127963</span></div></div><h1 id="USINGè¿æ¥"><a href="#USINGè¿æ¥" class="headerlink" title="USINGè¿æ¥"></a>USINGè¿æ¥</h1><p>ä»…æ”¯æŒåŒåå­—æ®µè¿æ¥ è¾ƒä¸ºå±€é™</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees el,departments dp <span class="keyword">WHERE</span> el.department_id <span class="operator">=</span> dp.department_id; # <span class="number">106</span>æ¡</span><br></pre></td></tr></table></figure><p>ç­‰ä»·</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">JOIN</span> departments <span class="keyword">USING</span>(department_id); # <span class="number">106</span>æ¡</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¤šè¡¨æŸ¥è¯¢&quot;&gt;&lt;a href=&quot;#å¤šè¡¨æŸ¥è¯¢&quot; class=&quot;headerlink&quot; title=&quot;å¤šè¡¨æŸ¥è¯¢&quot;&gt;&lt;/a&gt;å¤šè¡¨æŸ¥è¯¢&lt;/h1&gt;&lt;h2 id=&quot;éœ€æ±‚-æŸ¥è¯¢åä¸ºAbelçš„äººåœ¨å“ªé‡Œå·¥ä½œ&quot;&gt;&lt;a href=&quot;#éœ€æ±‚-æŸ¥è¯¢åä¸ºAbelçš„äººåœ¨å“ªé‡Œå·¥ä½œ&quot; class=&quot;</summary>
      
    
    
    
    <category term="Language" scheme="http://cvki.cn/categories/Language/"/>
    
    
    <category term="Database" scheme="http://cvki.cn/tags/Database/"/>
    
    <category term="MariaDB" scheme="http://cvki.cn/tags/MariaDB/"/>
    
  </entry>
  
</feed>
